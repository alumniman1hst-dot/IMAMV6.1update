const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-BzJEALrc.js","assets/format-DylC2ZLE.js","assets/Presensi-8idRMrgh.js","assets/studentService-CIZKz8Ta.js","assets/ContentGeneration-BJv-4Mnz.js","assets/geminiService-AGvTVMkM.js","assets/ClassList-xNRslrpl.js","assets/Schedule-BoYNlNRX.js","assets/Layout-aA6jRwwe.js","assets/Profile-Bf_b8slB.js","assets/claimService-5F3p9bVQ.js","assets/index-DPVcr-rT.js","assets/AcademicYear-weYae3US.js","assets/Reports-9ljv0CcT.js","assets/Advisor-DNma1eLS.js","assets/Settings-qplp6qiA.js","assets/PointsView-D5IhyvPF.js","assets/AllFeatures-Cp5JHacX.js","assets/AttendanceHistory-Bl2ZVBPs.js","assets/QRScanner-7oNgfgty.js","assets/TeachingJournal-BTDRRVmn.js","assets/academicService-BlZ1ib-Y.js","assets/Assignments-C1d3r1ia.js","assets/Grades-C3VclZtW.js","assets/StudentData-Cj9Es4bv.js","assets/TeacherData-DeQjlCmp.js","assets/IDCard-BfB2yVZW.js","assets/Letters-CUyxhcYM.js","assets/CreateAccount-Dm1b8je4.js","assets/DeveloperConsole-CU_k8nOx.js","assets/LoginHistory-cInqUAY4.js","assets/History-tIcazThG.js","assets/Premium-yoDzmP3u.js","assets/News-Dx2pVudi.js","assets/MadrasahInfo-BezRS9d3.js","assets/KemenagHub-DS17fVmx.js","assets/ClaimManagement-CvNDc733.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var s6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function s5(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Cg={exports:{}},ac={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GE;function a5(){if(GE)return ac;GE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:r,key:c,ref:a!==void 0?a:null,props:l}}return ac.Fragment=e,ac.jsx=t,ac.jsxs=t,ac}var HE;function o5(){return HE||(HE=1,Cg.exports=a5()),Cg.exports}var b=o5(),Dg={exports:{}},be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KE;function l5(){if(KE)return be;KE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),I=Symbol.iterator;function N(k){return k===null||typeof k!="object"?null:(k=I&&k[I]||k["@@iterator"],typeof k=="function"?k:null)}var Q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ee=Object.assign,Z={};function te(k,W,se){this.props=k,this.context=W,this.refs=Z,this.updater=se||Q}te.prototype.isReactComponent={},te.prototype.setState=function(k,W){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,W,"setState")},te.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function me(){}me.prototype=te.prototype;function ce(k,W,se){this.props=k,this.context=W,this.refs=Z,this.updater=se||Q}var Ae=ce.prototype=new me;Ae.constructor=ce,ee(Ae,te.prototype),Ae.isPureReactComponent=!0;var Re=Array.isArray;function Te(){}var R={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function C(k,W,se){var fe=se.ref;return{$$typeof:n,type:k,key:W,ref:fe!==void 0?fe:null,props:se}}function P(k,W){return C(k.type,W,k.props)}function V(k){return typeof k=="object"&&k!==null&&k.$$typeof===n}function L(k){var W={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(se){return W[se]})}var x=/\/+/g;function wt(k,W){return typeof k=="object"&&k!==null&&k.key!=null?L(""+k.key):W.toString(36)}function Ut(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(Te,Te):(k.status="pending",k.then(function(W){k.status==="pending"&&(k.status="fulfilled",k.value=W)},function(W){k.status==="pending"&&(k.status="rejected",k.reason=W)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function K(k,W,se,fe,Ie){var Oe=typeof k;(Oe==="undefined"||Oe==="boolean")&&(k=null);var Fe=!1;if(k===null)Fe=!0;else switch(Oe){case"bigint":case"string":case"number":Fe=!0;break;case"object":switch(k.$$typeof){case n:case e:Fe=!0;break;case v:return Fe=k._init,K(Fe(k._payload),W,se,fe,Ie)}}if(Fe)return Ie=Ie(k),Fe=fe===""?"."+wt(k,0):fe,Re(Ie)?(se="",Fe!=null&&(se=Fe.replace(x,"$&/")+"/"),K(Ie,W,se,"",function(Mi){return Mi})):Ie!=null&&(V(Ie)&&(Ie=P(Ie,se+(Ie.key==null||k&&k.key===Ie.key?"":(""+Ie.key).replace(x,"$&/")+"/")+Fe)),W.push(Ie)),1;Fe=0;var an=fe===""?".":fe+":";if(Re(k))for(var vt=0;vt<k.length;vt++)fe=k[vt],Oe=an+wt(fe,vt),Fe+=K(fe,W,se,Oe,Ie);else if(vt=N(k),typeof vt=="function")for(k=vt.call(k),vt=0;!(fe=k.next()).done;)fe=fe.value,Oe=an+wt(fe,vt++),Fe+=K(fe,W,se,Oe,Ie);else if(Oe==="object"){if(typeof k.then=="function")return K(Ut(k),W,se,fe,Ie);throw W=String(k),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Fe}function oe(k,W,se){if(k==null)return k;var fe=[],Ie=0;return K(k,fe,"","",function(Oe){return W.call(se,Oe,Ie++)}),fe}function _e(k){if(k._status===-1){var W=k._result;W=W(),W.then(function(se){(k._status===0||k._status===-1)&&(k._status=1,k._result=se)},function(se){(k._status===0||k._status===-1)&&(k._status=2,k._result=se)}),k._status===-1&&(k._status=0,k._result=W)}if(k._status===1)return k._result.default;throw k._result}var Ke=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},Ze={map:oe,forEach:function(k,W,se){oe(k,function(){W.apply(this,arguments)},se)},count:function(k){var W=0;return oe(k,function(){W++}),W},toArray:function(k){return oe(k,function(W){return W})||[]},only:function(k){if(!V(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return be.Activity=T,be.Children=Ze,be.Component=te,be.Fragment=t,be.Profiler=a,be.PureComponent=ce,be.StrictMode=r,be.Suspense=m,be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,be.__COMPILER_RUNTIME={__proto__:null,c:function(k){return R.H.useMemoCache(k)}},be.cache=function(k){return function(){return k.apply(null,arguments)}},be.cacheSignal=function(){return null},be.cloneElement=function(k,W,se){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var fe=ee({},k.props),Ie=k.key;if(W!=null)for(Oe in W.key!==void 0&&(Ie=""+W.key),W)!S.call(W,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&W.ref===void 0||(fe[Oe]=W[Oe]);var Oe=arguments.length-2;if(Oe===1)fe.children=se;else if(1<Oe){for(var Fe=Array(Oe),an=0;an<Oe;an++)Fe[an]=arguments[an+2];fe.children=Fe}return C(k.type,Ie,fe)},be.createContext=function(k){return k={$$typeof:c,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:l,_context:k},k},be.createElement=function(k,W,se){var fe,Ie={},Oe=null;if(W!=null)for(fe in W.key!==void 0&&(Oe=""+W.key),W)S.call(W,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(Ie[fe]=W[fe]);var Fe=arguments.length-2;if(Fe===1)Ie.children=se;else if(1<Fe){for(var an=Array(Fe),vt=0;vt<Fe;vt++)an[vt]=arguments[vt+2];Ie.children=an}if(k&&k.defaultProps)for(fe in Fe=k.defaultProps,Fe)Ie[fe]===void 0&&(Ie[fe]=Fe[fe]);return C(k,Oe,Ie)},be.createRef=function(){return{current:null}},be.forwardRef=function(k){return{$$typeof:d,render:k}},be.isValidElement=V,be.lazy=function(k){return{$$typeof:v,_payload:{_status:-1,_result:k},_init:_e}},be.memo=function(k,W){return{$$typeof:g,type:k,compare:W===void 0?null:W}},be.startTransition=function(k){var W=R.T,se={};R.T=se;try{var fe=k(),Ie=R.S;Ie!==null&&Ie(se,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(Te,Ke)}catch(Oe){Ke(Oe)}finally{W!==null&&se.types!==null&&(W.types=se.types),R.T=W}},be.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},be.use=function(k){return R.H.use(k)},be.useActionState=function(k,W,se){return R.H.useActionState(k,W,se)},be.useCallback=function(k,W){return R.H.useCallback(k,W)},be.useContext=function(k){return R.H.useContext(k)},be.useDebugValue=function(){},be.useDeferredValue=function(k,W){return R.H.useDeferredValue(k,W)},be.useEffect=function(k,W){return R.H.useEffect(k,W)},be.useEffectEvent=function(k){return R.H.useEffectEvent(k)},be.useId=function(){return R.H.useId()},be.useImperativeHandle=function(k,W,se){return R.H.useImperativeHandle(k,W,se)},be.useInsertionEffect=function(k,W){return R.H.useInsertionEffect(k,W)},be.useLayoutEffect=function(k,W){return R.H.useLayoutEffect(k,W)},be.useMemo=function(k,W){return R.H.useMemo(k,W)},be.useOptimistic=function(k,W){return R.H.useOptimistic(k,W)},be.useReducer=function(k,W,se){return R.H.useReducer(k,W,se)},be.useRef=function(k){return R.H.useRef(k)},be.useState=function(k){return R.H.useState(k)},be.useSyncExternalStore=function(k,W,se){return R.H.useSyncExternalStore(k,W,se)},be.useTransition=function(){return R.H.useTransition()},be.version="19.2.4",be}var QE;function j_(){return QE||(QE=1,Dg.exports=l5()),Dg.exports}var Pi=j_();const Ne=s5(Pi);var xg={exports:{}},oc={},Ng={exports:{}},Og={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YE;function u5(){return YE||(YE=1,(function(n){function e(K,oe){var _e=K.length;K.push(oe);e:for(;0<_e;){var Ke=_e-1>>>1,Ze=K[Ke];if(0<a(Ze,oe))K[Ke]=oe,K[_e]=Ze,_e=Ke;else break e}}function t(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var oe=K[0],_e=K.pop();if(_e!==oe){K[0]=_e;e:for(var Ke=0,Ze=K.length,k=Ze>>>1;Ke<k;){var W=2*(Ke+1)-1,se=K[W],fe=W+1,Ie=K[fe];if(0>a(se,_e))fe<Ze&&0>a(Ie,se)?(K[Ke]=Ie,K[fe]=_e,Ke=fe):(K[Ke]=se,K[W]=_e,Ke=W);else if(fe<Ze&&0>a(Ie,_e))K[Ke]=Ie,K[fe]=_e,Ke=fe;else break e}}return oe}function a(K,oe){var _e=K.sortIndex-oe.sortIndex;return _e!==0?_e:K.id-oe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var m=[],g=[],v=1,T=null,I=3,N=!1,Q=!1,ee=!1,Z=!1,te=typeof setTimeout=="function"?setTimeout:null,me=typeof clearTimeout=="function"?clearTimeout:null,ce=typeof setImmediate<"u"?setImmediate:null;function Ae(K){for(var oe=t(g);oe!==null;){if(oe.callback===null)r(g);else if(oe.startTime<=K)r(g),oe.sortIndex=oe.expirationTime,e(m,oe);else break;oe=t(g)}}function Re(K){if(ee=!1,Ae(K),!Q)if(t(m)!==null)Q=!0,Te||(Te=!0,L());else{var oe=t(g);oe!==null&&Ut(Re,oe.startTime-K)}}var Te=!1,R=-1,S=5,C=-1;function P(){return Z?!0:!(n.unstable_now()-C<S)}function V(){if(Z=!1,Te){var K=n.unstable_now();C=K;var oe=!0;try{e:{Q=!1,ee&&(ee=!1,me(R),R=-1),N=!0;var _e=I;try{t:{for(Ae(K),T=t(m);T!==null&&!(T.expirationTime>K&&P());){var Ke=T.callback;if(typeof Ke=="function"){T.callback=null,I=T.priorityLevel;var Ze=Ke(T.expirationTime<=K);if(K=n.unstable_now(),typeof Ze=="function"){T.callback=Ze,Ae(K),oe=!0;break t}T===t(m)&&r(m),Ae(K)}else r(m);T=t(m)}if(T!==null)oe=!0;else{var k=t(g);k!==null&&Ut(Re,k.startTime-K),oe=!1}}break e}finally{T=null,I=_e,N=!1}oe=void 0}}finally{oe?L():Te=!1}}}var L;if(typeof ce=="function")L=function(){ce(V)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,wt=x.port2;x.port1.onmessage=V,L=function(){wt.postMessage(null)}}else L=function(){te(V,0)};function Ut(K,oe){R=te(function(){K(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_next=function(K){switch(I){case 1:case 2:case 3:var oe=3;break;default:oe=I}var _e=I;I=oe;try{return K()}finally{I=_e}},n.unstable_requestPaint=function(){Z=!0},n.unstable_runWithPriority=function(K,oe){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var _e=I;I=K;try{return oe()}finally{I=_e}},n.unstable_scheduleCallback=function(K,oe,_e){var Ke=n.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Ke+_e:Ke):_e=Ke,K){case 1:var Ze=-1;break;case 2:Ze=250;break;case 5:Ze=1073741823;break;case 4:Ze=1e4;break;default:Ze=5e3}return Ze=_e+Ze,K={id:v++,callback:oe,priorityLevel:K,startTime:_e,expirationTime:Ze,sortIndex:-1},_e>Ke?(K.sortIndex=_e,e(g,K),t(m)===null&&K===t(g)&&(ee?(me(R),R=-1):ee=!0,Ut(Re,_e-Ke))):(K.sortIndex=Ze,e(m,K),Q||N||(Q=!0,Te||(Te=!0,L()))),K},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(K){var oe=I;return function(){var _e=I;I=oe;try{return K.apply(this,arguments)}finally{I=_e}}}})(Og)),Og}var WE;function c5(){return WE||(WE=1,Ng.exports=u5()),Ng.exports}var kg={exports:{}},Tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $E;function h5(){if($E)return Tn;$E=1;var n=j_();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:m,containerInfo:g,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Tn.createPortal=function(m,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,v)},Tn.flushSync=function(m){var g=c.T,v=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=g,r.p=v,r.d.f()}},Tn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(m,g))},Tn.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},Tn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var v=g.as,T=d(v,g.crossOrigin),I=typeof g.integrity=="string"?g.integrity:void 0,N=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?r.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:I,fetchPriority:N}):v==="script"&&r.d.X(m,{crossOrigin:T,integrity:I,fetchPriority:N,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Tn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=d(g.as,g.crossOrigin);r.d.M(m,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(m)},Tn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,T=d(v,g.crossOrigin);r.d.L(m,v,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Tn.preloadModule=function(m,g){if(typeof m=="string")if(g){var v=d(g.as,g.crossOrigin);r.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(m)},Tn.requestFormReset=function(m){r.d.r(m)},Tn.unstable_batchedUpdates=function(m,g){return m(g)},Tn.useFormState=function(m,g,v){return c.H.useFormState(m,g,v)},Tn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Tn.version="19.2.4",Tn}var XE;function u2(){if(XE)return kg.exports;XE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),kg.exports=h5(),kg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZE;function d5(){if(ZE)return oc;ZE=1;var n=c5(),e=j_(),t=u2();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,o=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(o=s.return),i=s.return;while(i)}return s.tag===3?o:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function m(i){if(l(i)!==i)throw Error(r(188))}function g(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(r(188));return s!==i?null:i}for(var o=i,u=s;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return m(f),i;if(p===u)return m(f),s;p=p.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=p;else{for(var y=!1,w=f.child;w;){if(w===o){y=!0,o=f,u=p;break}if(w===u){y=!0,u=f,o=p;break}w=w.sibling}if(!y){for(w=p.child;w;){if(w===o){y=!0,o=p,u=f;break}if(w===u){y=!0,u=p,o=f;break}w=w.sibling}if(!y)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?i:s}function v(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=v(i),s!==null)return s;i=i.sibling}return null}var T=Object.assign,I=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),Q=Symbol.for("react.portal"),ee=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),me=Symbol.for("react.consumer"),ce=Symbol.for("react.context"),Ae=Symbol.for("react.forward_ref"),Re=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function L(i){return i===null||typeof i!="object"?null:(i=V&&i[V]||i["@@iterator"],typeof i=="function"?i:null)}var x=Symbol.for("react.client.reference");function wt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===x?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case ee:return"Fragment";case te:return"Profiler";case Z:return"StrictMode";case Re:return"Suspense";case Te:return"SuspenseList";case C:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case Q:return"Portal";case ce:return i.displayName||"Context";case me:return(i._context.displayName||"Context")+".Consumer";case Ae:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case R:return s=i.displayName||null,s!==null?s:wt(i.type)||"Memo";case S:s=i._payload,i=i._init;try{return wt(i(s))}catch{}}return null}var Ut=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},Ke=[],Ze=-1;function k(i){return{current:i}}function W(i){0>Ze||(i.current=Ke[Ze],Ke[Ze]=null,Ze--)}function se(i,s){Ze++,Ke[Ze]=i.current,i.current=s}var fe=k(null),Ie=k(null),Oe=k(null),Fe=k(null);function an(i,s){switch(se(Oe,s),se(Ie,i),se(fe,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?fE(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=fE(s),i=mE(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}W(fe),se(fe,i)}function vt(){W(fe),W(Ie),W(Oe)}function Mi(i){i.memoizedState!==null&&se(Fe,i);var s=fe.current,o=mE(s,i.type);s!==o&&(se(Ie,i),se(fe,o))}function lr(i){Ie.current===i&&(W(fe),W(Ie)),Fe.current===i&&(W(Fe),nc._currentValue=_e)}var ca,Ao;function Si(i){if(ca===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);ca=s&&s[1]||"",Ao=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ca+i+Ao}var ha=!1;function Io(i,s){if(!i||ha)return"";ha=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(q){var F=q}Reflect.construct(i,[],J)}else{try{J.call()}catch(q){F=q}i.call(J.prototype)}}else{try{throw Error()}catch(q){F=q}(J=i())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(q){if(q&&F&&typeof q.stack=="string")return[q.stack,F.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),y=p[0],w=p[1];if(y&&w){var D=y.split(`
`),j=w.split(`
`);for(f=u=0;u<D.length&&!D[u].includes("DetermineComponentFrameRoot");)u++;for(;f<j.length&&!j[f].includes("DetermineComponentFrameRoot");)f++;if(u===D.length||f===j.length)for(u=D.length-1,f=j.length-1;1<=u&&0<=f&&D[u]!==j[f];)f--;for(;1<=u&&0<=f;u--,f--)if(D[u]!==j[f]){if(u!==1||f!==1)do if(u--,f--,0>f||D[u]!==j[f]){var Y=`
`+D[u].replace(" at new "," at ");return i.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",i.displayName)),Y}while(1<=u&&0<=f);break}}}finally{ha=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?Si(o):""}function bm(i,s){switch(i.tag){case 26:case 27:case 5:return Si(i.type);case 16:return Si("Lazy");case 13:return i.child!==s&&s!==null?Si("Suspense Fallback"):Si("Suspense");case 19:return Si("SuspenseList");case 0:case 15:return Io(i.type,!1);case 11:return Io(i.type.render,!1);case 1:return Io(i.type,!0);case 31:return Si("Activity");default:return""}}function Ih(i){try{var s="",o=null;do s+=bm(i,o),o=i,i=i.return;while(i);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var bo=Object.prototype.hasOwnProperty,da=n.unstable_scheduleCallback,So=n.unstable_cancelCallback,Sm=n.unstable_shouldYield,su=n.unstable_requestPaint,on=n.unstable_now,bh=n.unstable_getCurrentPriorityLevel,Kt=n.unstable_ImmediatePriority,$t=n.unstable_UserBlockingPriority,ur=n.unstable_NormalPriority,Sh=n.unstable_LowPriority,au=n.unstable_IdlePriority,Rm=n.log,fa=n.unstable_setDisableYieldValue,$r=null,vn=null;function ui(i){if(typeof Rm=="function"&&fa(i),vn&&typeof vn.setStrictMode=="function")try{vn.setStrictMode($r,i)}catch{}}var In=Math.clz32?Math.clz32:Rh,Cm=Math.log,ou=Math.LN2;function Rh(i){return i>>>=0,i===0?32:31-(Cm(i)/ou|0)|0}var ma=256,Li=262144,Xr=4194304;function Ri(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function ci(i,s,o){var u=i.pendingLanes;if(u===0)return 0;var f=0,p=i.suspendedLanes,y=i.pingedLanes;i=i.warmLanes;var w=u&134217727;return w!==0?(u=w&~p,u!==0?f=Ri(u):(y&=w,y!==0?f=Ri(y):o||(o=w&~i,o!==0&&(f=Ri(o))))):(w=u&~p,w!==0?f=Ri(w):y!==0?f=Ri(y):o||(o=u&~i,o!==0&&(f=Ri(o)))),f===0?0:s!==0&&s!==f&&(s&p)===0&&(p=f&-f,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:f}function Zr(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function Ro(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lu(){var i=Xr;return Xr<<=1,(Xr&62914560)===0&&(Xr=4194304),i}function cr(i){for(var s=[],o=0;31>o;o++)s.push(i);return s}function Jr(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function ln(i,s,o,u,f,p){var y=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var w=i.entanglements,D=i.expirationTimes,j=i.hiddenUpdates;for(o=y&~o;0<o;){var Y=31-In(o),J=1<<Y;w[Y]=0,D[Y]=-1;var F=j[Y];if(F!==null)for(j[Y]=null,Y=0;Y<F.length;Y++){var q=F[Y];q!==null&&(q.lane&=-536870913)}o&=~J}u!==0&&uu(i,u,0),p!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=p&~(y&~s))}function uu(i,s,o){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-In(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|o&261930}function es(i,s){var o=i.entangledLanes|=s;for(i=i.entanglements;o;){var u=31-In(o),f=1<<u;f&s|i[u]&s&&(i[u]|=s),o&=~f}}function ts(i,s){var o=s&-s;return o=(o&42)!==0?1:cu(o),(o&(i.suspendedLanes|s))!==0?0:o}function cu(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function hu(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function hr(){var i=oe.p;return i!==0?i:(i=window.event,i===void 0?32:LE(i.type))}function Ch(i,s){var o=oe.p;try{return oe.p=i,s()}finally{oe.p=o}}var Ui=Math.random().toString(36).slice(2),At="__reactFiber$"+Ui,un="__reactProps$"+Ui,Bi="__reactContainer$"+Ui,ns="__reactEvents$"+Ui,ji="__reactListeners$"+Ui,Dh="__reactHandles$"+Ui,du="__reactResources$"+Ui,dr="__reactMarker$"+Ui;function pa(i){delete i[At],delete i[un],delete i[ns],delete i[ji],delete i[Dh]}function fr(i){var s=i[At];if(s)return s;for(var o=i.parentNode;o;){if(s=o[Bi]||o[At]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(i=TE(i);i!==null;){if(o=i[At])return o;i=TE(i)}return s}i=o,o=i.parentNode}return null}function mr(i){if(i=i[At]||i[Bi]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function ga(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function Ci(i){var s=i[du];return s||(s=i[du]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ot(i){i[dr]=!0}var Co=new Set,is={};function bn(i,s){zi(i,s),zi(i+"Capture",s)}function zi(i,s){for(is[i]=s,i=0;i<s.length;i++)Co.add(s[i])}var Dm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fu={},mu={};function xh(i){return bo.call(mu,i)?!0:bo.call(fu,i)?!1:Dm.test(i)?mu[i]=!0:(fu[i]=!0,!1)}function rs(i,s,o){if(xh(s))if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+o)}}function ss(i,s,o){if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+o)}}function hi(i,s,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(s,o,""+u)}}function Sn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Nh(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function xm(i,s,o){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,p=u.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return f.call(this)},set:function(y){o=""+y,p.call(this,y)}}),Object.defineProperty(i,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(y){o=""+y},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Do(i){if(!i._valueTracker){var s=Nh(i)?"checked":"value";i._valueTracker=xm(i,s,""+i[s])}}function pu(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return i&&(u=Nh(i)?i.checked?"true":"false":i.value),i=u,i!==o?(s.setValue(i),!0):!1}function xo(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var pr=/[\n"\\]/g;function It(i){return i.replace(pr,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function as(i,s,o,u,f,p,y,w){i.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?i.type=y:i.removeAttribute("type"),s!=null?y==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+Sn(s)):i.value!==""+Sn(s)&&(i.value=""+Sn(s)):y!=="submit"&&y!=="reset"||i.removeAttribute("value"),s!=null?No(i,y,Sn(s)):o!=null?No(i,y,Sn(o)):u!=null&&i.removeAttribute("value"),f==null&&p!=null&&(i.defaultChecked=!!p),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.name=""+Sn(w):i.removeAttribute("name")}function _a(i,s,o,u,f,p,y,w){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(i.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null)){Do(i);return}o=o!=null?""+Sn(o):"",s=s!=null?""+Sn(s):o,w||s===i.value||(i.value=s),i.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=w?i.checked:!!u,i.defaultChecked=!!u,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.name=y),Do(i)}function No(i,s,o){s==="number"&&xo(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function Qe(i,s,o,u){if(i=i.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<i.length;o++)f=s.hasOwnProperty("$"+i[o].value),i[o].selected!==f&&(i[o].selected=f),f&&u&&(i[o].defaultSelected=!0)}else{for(o=""+Sn(o),s=null,f=0;f<i.length;f++){if(i[f].value===o){i[f].selected=!0,u&&(i[f].defaultSelected=!0);return}s!==null||i[f].disabled||(s=i[f])}s!==null&&(s.selected=!0)}}function ya(i,s,o){if(s!=null&&(s=""+Sn(s),s!==i.value&&(i.value=s),o==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=o!=null?""+Sn(o):""}function os(i,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(r(92));if(Ut(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=Sn(s),i.defaultValue=o,u=i.textContent,u===o&&u!==""&&u!==null&&(i.value=u),Do(i)}function di(i,s){if(s){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=s;return}}i.textContent=s}var Nm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gu(i,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,o):typeof o!="number"||o===0||Nm.has(s)?s==="float"?i.cssFloat=o:i[s]=(""+o).trim():i[s]=o+"px"}function Oh(i,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&gu(i,f,u)}else for(var p in s)s.hasOwnProperty(p)&&gu(i,p,s[p])}function _u(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Om=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),km=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fi(i){return km.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Xt(){}var Oo=null;function ko(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var gr=null,$n=null;function kh(i){var s=mr(i);if(s&&(i=s.stateNode)){var o=i[un]||null;e:switch(i=s.stateNode,s.type){case"input":if(as(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+It(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==i&&u.form===i.form){var f=u[un]||null;if(!f)throw Error(r(90));as(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===i.form&&pu(u)}break e;case"textarea":ya(i,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Qe(i,!!o.multiple,s,!1)}}}var yu=!1;function Ph(i,s,o){if(yu)return i(s,o);yu=!0;try{var u=i(s);return u}finally{if(yu=!1,(gr!==null||$n!==null)&&(xd(),gr&&(s=gr,i=$n,$n=gr=null,kh(s),i)))for(s=0;s<i.length;s++)kh(i[s])}}function Un(i,s){var o=i.stateNode;if(o===null)return null;var u=o[un]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var Di=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vu=!1;if(Di)try{var qi={};Object.defineProperty(qi,"passive",{get:function(){vu=!0}}),window.addEventListener("test",qi,qi),window.removeEventListener("test",qi,qi)}catch{vu=!1}var Xn=null,Po=null,Gi=null;function ls(){if(Gi)return Gi;var i,s=Po,o=s.length,u,f="value"in Xn?Xn.value:Xn.textContent,p=f.length;for(i=0;i<o&&s[i]===f[i];i++);var y=o-i;for(u=1;u<=y&&s[o-u]===f[p-u];u++);return Gi=f.slice(i,1<u?1-u:void 0)}function va(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function us(){return!0}function ct(){return!1}function En(i){function s(o,u,f,p,y){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=y,this.currentTarget=null;for(var w in i)i.hasOwnProperty(w)&&(o=i[w],this[w]=o?o(p):p[w]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?us:ct,this.isPropagationStopped=ct,this}return T(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=us)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=us)},persist:function(){},isPersistent:us}),s}var _r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ea=En(_r),cs=T({},_r,{view:0,detail:0}),Vh=En(cs),hs,Vo,Rn,Ta=T({},cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fs,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Rn&&(Rn&&i.type==="mousemove"?(hs=i.screenX-Rn.screenX,Vo=i.screenY-Rn.screenY):Vo=hs=0,Rn=i),hs)},movementY:function(i){return"movementY"in i?i.movementY:Vo}}),Mh=En(Ta),wa=T({},Ta,{dataTransfer:0}),Lh=En(wa),Eu=T({},cs,{relatedTarget:0}),ds=En(Eu),Uh=T({},_r,{animationName:0,elapsedTime:0,pseudoElement:0}),Mo=En(Uh),Pm=T({},_r,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Bh=En(Pm),Aa=T({},_r,{data:0}),Tu=En(Aa),jh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Au={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zh(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Au[i])?!!s[i]:!1}function fs(){return zh}var Fh=T({},cs,{key:function(i){if(i.key){var s=jh[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=va(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?wu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fs,charCode:function(i){return i.type==="keypress"?va(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?va(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),qh=En(Fh),yr=T({},Ta,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Iu=En(yr),Gh=T({},cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fs}),Hh=En(Gh),Kh=T({},_r,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lo=En(Kh),Cn=T({},Ta,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Qh=En(Cn),Yh=T({},_r,{newState:0,oldState:0}),ms=En(Yh),h=[9,13,27,32],_=Di&&"CompositionEvent"in window,E=null;Di&&"documentMode"in document&&(E=document.documentMode);var A=Di&&"TextEvent"in window&&!E,U=Di&&(!_||E&&8<E&&11>=E),H=" ",ae=!1;function Je(i,s){switch(i){case"keyup":return h.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bt(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ke=!1;function Zt(i,s){switch(i){case"compositionend":return Bt(s);case"keypress":return s.which!==32?null:(ae=!0,H);case"textInput":return i=s.data,i===H&&ae?null:i;default:return null}}function Jt(i,s){if(ke)return i==="compositionend"||!_&&Je(i,s)?(i=ls(),Gi=Po=Xn=null,ke=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return U&&s.locale!=="ko"?null:s.data;default:return null}}var ps={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bn(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!ps[i.type]:s==="textarea"}function Ia(i,s,o,u){gr?$n?$n.push(u):$n=[u]:gr=u,s=Ld(s,"onChange"),0<s.length&&(o=new Ea("onChange","change",null,o,u),i.push({event:o,listeners:s}))}var vr=null,bu=null;function OS(i){oE(i,0)}function Wh(i){var s=ga(i);if(pu(s))return i}function S0(i,s){if(i==="change")return s}var R0=!1;if(Di){var Vm;if(Di){var Mm="oninput"in document;if(!Mm){var C0=document.createElement("div");C0.setAttribute("oninput","return;"),Mm=typeof C0.oninput=="function"}Vm=Mm}else Vm=!1;R0=Vm&&(!document.documentMode||9<document.documentMode)}function D0(){vr&&(vr.detachEvent("onpropertychange",x0),bu=vr=null)}function x0(i){if(i.propertyName==="value"&&Wh(bu)){var s=[];Ia(s,bu,i,ko(i)),Ph(OS,s)}}function kS(i,s,o){i==="focusin"?(D0(),vr=s,bu=o,vr.attachEvent("onpropertychange",x0)):i==="focusout"&&D0()}function PS(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Wh(bu)}function VS(i,s){if(i==="click")return Wh(s)}function MS(i,s){if(i==="input"||i==="change")return Wh(s)}function LS(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Zn=typeof Object.is=="function"?Object.is:LS;function Su(i,s){if(Zn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var o=Object.keys(i),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!bo.call(s,f)||!Zn(i[f],s[f]))return!1}return!0}function N0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function O0(i,s){var o=N0(i);i=0;for(var u;o;){if(o.nodeType===3){if(u=i+o.textContent.length,i<=s&&u>=s)return{node:o,offset:s-i};i=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=N0(o)}}function k0(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?k0(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function P0(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=xo(i.document);s instanceof i.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)i=s.contentWindow;else break;s=xo(i.document)}return s}function Lm(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var US=Di&&"documentMode"in document&&11>=document.documentMode,Uo=null,Um=null,Ru=null,Bm=!1;function V0(i,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Bm||Uo==null||Uo!==xo(u)||(u=Uo,"selectionStart"in u&&Lm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ru&&Su(Ru,u)||(Ru=u,u=Ld(Um,"onSelect"),0<u.length&&(s=new Ea("onSelect","select",null,s,o),i.push({event:s,listeners:u}),s.target=Uo)))}function ba(i,s){var o={};return o[i.toLowerCase()]=s.toLowerCase(),o["Webkit"+i]="webkit"+s,o["Moz"+i]="moz"+s,o}var Bo={animationend:ba("Animation","AnimationEnd"),animationiteration:ba("Animation","AnimationIteration"),animationstart:ba("Animation","AnimationStart"),transitionrun:ba("Transition","TransitionRun"),transitionstart:ba("Transition","TransitionStart"),transitioncancel:ba("Transition","TransitionCancel"),transitionend:ba("Transition","TransitionEnd")},jm={},M0={};Di&&(M0=document.createElement("div").style,"AnimationEvent"in window||(delete Bo.animationend.animation,delete Bo.animationiteration.animation,delete Bo.animationstart.animation),"TransitionEvent"in window||delete Bo.transitionend.transition);function Sa(i){if(jm[i])return jm[i];if(!Bo[i])return i;var s=Bo[i],o;for(o in s)if(s.hasOwnProperty(o)&&o in M0)return jm[i]=s[o];return i}var L0=Sa("animationend"),U0=Sa("animationiteration"),B0=Sa("animationstart"),BS=Sa("transitionrun"),jS=Sa("transitionstart"),zS=Sa("transitioncancel"),j0=Sa("transitionend"),z0=new Map,zm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zm.push("scrollEnd");function xi(i,s){z0.set(i,s),bn(s,[i])}var $h=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},fi=[],jo=0,Fm=0;function Xh(){for(var i=jo,s=Fm=jo=0;s<i;){var o=fi[s];fi[s++]=null;var u=fi[s];fi[s++]=null;var f=fi[s];fi[s++]=null;var p=fi[s];if(fi[s++]=null,u!==null&&f!==null){var y=u.pending;y===null?f.next=f:(f.next=y.next,y.next=f),u.pending=f}p!==0&&F0(o,f,p)}}function Zh(i,s,o,u){fi[jo++]=i,fi[jo++]=s,fi[jo++]=o,fi[jo++]=u,Fm|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function qm(i,s,o,u){return Zh(i,s,o,u),Jh(i)}function Ra(i,s){return Zh(i,null,null,s),Jh(i)}function F0(i,s,o){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o);for(var f=!1,p=i.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(i=p.stateNode,i===null||i._visibility&1||(f=!0)),i=p,p=p.return;return i.tag===3?(p=i.stateNode,f&&s!==null&&(f=31-In(o),i=p.hiddenUpdates,u=i[f],u===null?i[f]=[s]:u.push(s),s.lane=o|536870912),p):null}function Jh(i){if(50<Wu)throw Wu=0,Zp=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var zo={};function FS(i,s,o,u){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jn(i,s,o,u){return new FS(i,s,o,u)}function Gm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Er(i,s){var o=i.alternate;return o===null?(o=Jn(i.tag,s,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=s,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,s=i.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function q0(i,s){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,s=o.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function ed(i,s,o,u,f,p){var y=0;if(u=i,typeof i=="function")Gm(i)&&(y=1);else if(typeof i=="string")y=QR(i,o,fe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case C:return i=Jn(31,o,s,f),i.elementType=C,i.lanes=p,i;case ee:return Ca(o.children,f,p,s);case Z:y=8,f|=24;break;case te:return i=Jn(12,o,s,f|2),i.elementType=te,i.lanes=p,i;case Re:return i=Jn(13,o,s,f),i.elementType=Re,i.lanes=p,i;case Te:return i=Jn(19,o,s,f),i.elementType=Te,i.lanes=p,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case ce:y=10;break e;case me:y=9;break e;case Ae:y=11;break e;case R:y=14;break e;case S:y=16,u=null;break e}y=29,o=Error(r(130,i===null?"null":typeof i,"")),u=null}return s=Jn(y,o,s,f),s.elementType=i,s.type=u,s.lanes=p,s}function Ca(i,s,o,u){return i=Jn(7,i,u,s),i.lanes=o,i}function Hm(i,s,o){return i=Jn(6,i,null,s),i.lanes=o,i}function G0(i){var s=Jn(18,null,null,0);return s.stateNode=i,s}function Km(i,s,o){return s=Jn(4,i.children!==null?i.children:[],i.key,s),s.lanes=o,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var H0=new WeakMap;function mi(i,s){if(typeof i=="object"&&i!==null){var o=H0.get(i);return o!==void 0?o:(s={value:i,source:s,stack:Ih(s)},H0.set(i,s),s)}return{value:i,source:s,stack:Ih(s)}}var Fo=[],qo=0,td=null,Cu=0,pi=[],gi=0,gs=null,Hi=1,Ki="";function Tr(i,s){Fo[qo++]=Cu,Fo[qo++]=td,td=i,Cu=s}function K0(i,s,o){pi[gi++]=Hi,pi[gi++]=Ki,pi[gi++]=gs,gs=i;var u=Hi;i=Ki;var f=32-In(u)-1;u&=~(1<<f),o+=1;var p=32-In(s)+f;if(30<p){var y=f-f%5;p=(u&(1<<y)-1).toString(32),u>>=y,f-=y,Hi=1<<32-In(s)+f|o<<f|u,Ki=p+i}else Hi=1<<p|o<<f|u,Ki=i}function Qm(i){i.return!==null&&(Tr(i,1),K0(i,1,0))}function Ym(i){for(;i===td;)td=Fo[--qo],Fo[qo]=null,Cu=Fo[--qo],Fo[qo]=null;for(;i===gs;)gs=pi[--gi],pi[gi]=null,Ki=pi[--gi],pi[gi]=null,Hi=pi[--gi],pi[gi]=null}function Q0(i,s){pi[gi++]=Hi,pi[gi++]=Ki,pi[gi++]=gs,Hi=s.id,Ki=s.overflow,gs=i}var cn=null,ht=null,qe=!1,_s=null,_i=!1,Wm=Error(r(519));function ys(i){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Du(mi(s,i)),Wm}function Y0(i){var s=i.stateNode,o=i.type,u=i.memoizedProps;switch(s[At]=i,s[un]=u,o){case"dialog":Ve("cancel",s),Ve("close",s);break;case"iframe":case"object":case"embed":Ve("load",s);break;case"video":case"audio":for(o=0;o<Xu.length;o++)Ve(Xu[o],s);break;case"source":Ve("error",s);break;case"img":case"image":case"link":Ve("error",s),Ve("load",s);break;case"details":Ve("toggle",s);break;case"input":Ve("invalid",s),_a(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ve("invalid",s);break;case"textarea":Ve("invalid",s),os(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||hE(s.textContent,o)?(u.popover!=null&&(Ve("beforetoggle",s),Ve("toggle",s)),u.onScroll!=null&&Ve("scroll",s),u.onScrollEnd!=null&&Ve("scrollend",s),u.onClick!=null&&(s.onclick=Xt),s=!0):s=!1,s||ys(i,!0)}function W0(i){for(cn=i.return;cn;)switch(cn.tag){case 5:case 31:case 13:_i=!1;return;case 27:case 3:_i=!0;return;default:cn=cn.return}}function Go(i){if(i!==cn)return!1;if(!qe)return W0(i),qe=!0,!1;var s=i.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||fg(i.type,i.memoizedProps)),o=!o),o&&ht&&ys(i),W0(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));ht=EE(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));ht=EE(i)}else s===27?(s=ht,Os(i.type)?(i=yg,yg=null,ht=i):ht=s):ht=cn?vi(i.stateNode.nextSibling):null;return!0}function Da(){ht=cn=null,qe=!1}function $m(){var i=_s;return i!==null&&(qn===null?qn=i:qn.push.apply(qn,i),_s=null),i}function Du(i){_s===null?_s=[i]:_s.push(i)}var Xm=k(null),xa=null,wr=null;function vs(i,s,o){se(Xm,s._currentValue),s._currentValue=o}function Ar(i){i._currentValue=Xm.current,W(Xm)}function Zm(i,s,o){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===o)break;i=i.return}}function Jm(i,s,o,u){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var p=f.dependencies;if(p!==null){var y=f.child;p=p.firstContext;e:for(;p!==null;){var w=p;p=f;for(var D=0;D<s.length;D++)if(w.context===s[D]){p.lanes|=o,w=p.alternate,w!==null&&(w.lanes|=o),Zm(p.return,o,i),u||(y=null);break e}p=w.next}}else if(f.tag===18){if(y=f.return,y===null)throw Error(r(341));y.lanes|=o,p=y.alternate,p!==null&&(p.lanes|=o),Zm(y,o,i),y=null}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===i){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}}function Ho(i,s,o,u){i=null;for(var f=s,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var y=f.alternate;if(y===null)throw Error(r(387));if(y=y.memoizedProps,y!==null){var w=f.type;Zn(f.pendingProps.value,y.value)||(i!==null?i.push(w):i=[w])}}else if(f===Fe.current){if(y=f.alternate,y===null)throw Error(r(387));y.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(nc):i=[nc])}f=f.return}i!==null&&Jm(s,i,o,u),s.flags|=262144}function nd(i){for(i=i.firstContext;i!==null;){if(!Zn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Na(i){xa=i,wr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function hn(i){return $0(xa,i)}function id(i,s){return xa===null&&Na(i),$0(i,s)}function $0(i,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},wr===null){if(i===null)throw Error(r(308));wr=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else wr=wr.next=s;return o}var qS=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(o,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(o){return o()})}},GS=n.unstable_scheduleCallback,HS=n.unstable_NormalPriority,jt={$$typeof:ce,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ep(){return{controller:new qS,data:new Map,refCount:0}}function xu(i){i.refCount--,i.refCount===0&&GS(HS,function(){i.controller.abort()})}var Nu=null,tp=0,Ko=0,Qo=null;function KS(i,s){if(Nu===null){var o=Nu=[];tp=0,Ko=rg(),Qo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return tp++,s.then(X0,X0),s}function X0(){if(--tp===0&&Nu!==null){Qo!==null&&(Qo.status="fulfilled");var i=Nu;Nu=null,Ko=0,Qo=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function QS(i,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var Z0=K.S;K.S=function(i,s){V1=on(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&KS(i,s),Z0!==null&&Z0(i,s)};var Oa=k(null);function np(){var i=Oa.current;return i!==null?i:lt.pooledCache}function rd(i,s){s===null?se(Oa,Oa.current):se(Oa,s.pool)}function J0(){var i=np();return i===null?null:{parent:jt._currentValue,pool:i}}var Yo=Error(r(460)),ip=Error(r(474)),sd=Error(r(542)),ad={then:function(){}};function ev(i){return i=i.status,i==="fulfilled"||i==="rejected"}function tv(i,s,o){switch(o=i[o],o===void 0?i.push(s):o!==s&&(s.then(Xt,Xt),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,iv(i),i;default:if(typeof s.status=="string")s.then(Xt,Xt);else{if(i=lt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,iv(i),i}throw Pa=s,Yo}}function ka(i){try{var s=i._init;return s(i._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Pa=o,Yo):o}}var Pa=null;function nv(){if(Pa===null)throw Error(r(459));var i=Pa;return Pa=null,i}function iv(i){if(i===Yo||i===sd)throw Error(r(483))}var Wo=null,Ou=0;function od(i){var s=Ou;return Ou+=1,Wo===null&&(Wo=[]),tv(Wo,i,s)}function ku(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function ld(i,s){throw s.$$typeof===I?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function rv(i){function s(M,O){if(i){var B=M.deletions;B===null?(M.deletions=[O],M.flags|=16):B.push(O)}}function o(M,O){if(!i)return null;for(;O!==null;)s(M,O),O=O.sibling;return null}function u(M){for(var O=new Map;M!==null;)M.key!==null?O.set(M.key,M):O.set(M.index,M),M=M.sibling;return O}function f(M,O){return M=Er(M,O),M.index=0,M.sibling=null,M}function p(M,O,B){return M.index=B,i?(B=M.alternate,B!==null?(B=B.index,B<O?(M.flags|=67108866,O):B):(M.flags|=67108866,O)):(M.flags|=1048576,O)}function y(M){return i&&M.alternate===null&&(M.flags|=67108866),M}function w(M,O,B,$){return O===null||O.tag!==6?(O=Hm(B,M.mode,$),O.return=M,O):(O=f(O,B),O.return=M,O)}function D(M,O,B,$){var Ee=B.type;return Ee===ee?Y(M,O,B.props.children,$,B.key):O!==null&&(O.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===S&&ka(Ee)===O.type)?(O=f(O,B.props),ku(O,B),O.return=M,O):(O=ed(B.type,B.key,B.props,null,M.mode,$),ku(O,B),O.return=M,O)}function j(M,O,B,$){return O===null||O.tag!==4||O.stateNode.containerInfo!==B.containerInfo||O.stateNode.implementation!==B.implementation?(O=Km(B,M.mode,$),O.return=M,O):(O=f(O,B.children||[]),O.return=M,O)}function Y(M,O,B,$,Ee){return O===null||O.tag!==7?(O=Ca(B,M.mode,$,Ee),O.return=M,O):(O=f(O,B),O.return=M,O)}function J(M,O,B){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Hm(""+O,M.mode,B),O.return=M,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case N:return B=ed(O.type,O.key,O.props,null,M.mode,B),ku(B,O),B.return=M,B;case Q:return O=Km(O,M.mode,B),O.return=M,O;case S:return O=ka(O),J(M,O,B)}if(Ut(O)||L(O))return O=Ca(O,M.mode,B,null),O.return=M,O;if(typeof O.then=="function")return J(M,od(O),B);if(O.$$typeof===ce)return J(M,id(M,O),B);ld(M,O)}return null}function F(M,O,B,$){var Ee=O!==null?O.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return Ee!==null?null:w(M,O,""+B,$);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case N:return B.key===Ee?D(M,O,B,$):null;case Q:return B.key===Ee?j(M,O,B,$):null;case S:return B=ka(B),F(M,O,B,$)}if(Ut(B)||L(B))return Ee!==null?null:Y(M,O,B,$,null);if(typeof B.then=="function")return F(M,O,od(B),$);if(B.$$typeof===ce)return F(M,O,id(M,B),$);ld(M,B)}return null}function q(M,O,B,$,Ee){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return M=M.get(B)||null,w(O,M,""+$,Ee);if(typeof $=="object"&&$!==null){switch($.$$typeof){case N:return M=M.get($.key===null?B:$.key)||null,D(O,M,$,Ee);case Q:return M=M.get($.key===null?B:$.key)||null,j(O,M,$,Ee);case S:return $=ka($),q(M,O,B,$,Ee)}if(Ut($)||L($))return M=M.get(B)||null,Y(O,M,$,Ee,null);if(typeof $.then=="function")return q(M,O,B,od($),Ee);if($.$$typeof===ce)return q(M,O,B,id(O,$),Ee);ld(O,$)}return null}function de(M,O,B,$){for(var Ee=null,Ye=null,ge=O,xe=O=0,Be=null;ge!==null&&xe<B.length;xe++){ge.index>xe?(Be=ge,ge=null):Be=ge.sibling;var We=F(M,ge,B[xe],$);if(We===null){ge===null&&(ge=Be);break}i&&ge&&We.alternate===null&&s(M,ge),O=p(We,O,xe),Ye===null?Ee=We:Ye.sibling=We,Ye=We,ge=Be}if(xe===B.length)return o(M,ge),qe&&Tr(M,xe),Ee;if(ge===null){for(;xe<B.length;xe++)ge=J(M,B[xe],$),ge!==null&&(O=p(ge,O,xe),Ye===null?Ee=ge:Ye.sibling=ge,Ye=ge);return qe&&Tr(M,xe),Ee}for(ge=u(ge);xe<B.length;xe++)Be=q(ge,M,xe,B[xe],$),Be!==null&&(i&&Be.alternate!==null&&ge.delete(Be.key===null?xe:Be.key),O=p(Be,O,xe),Ye===null?Ee=Be:Ye.sibling=Be,Ye=Be);return i&&ge.forEach(function(Ls){return s(M,Ls)}),qe&&Tr(M,xe),Ee}function we(M,O,B,$){if(B==null)throw Error(r(151));for(var Ee=null,Ye=null,ge=O,xe=O=0,Be=null,We=B.next();ge!==null&&!We.done;xe++,We=B.next()){ge.index>xe?(Be=ge,ge=null):Be=ge.sibling;var Ls=F(M,ge,We.value,$);if(Ls===null){ge===null&&(ge=Be);break}i&&ge&&Ls.alternate===null&&s(M,ge),O=p(Ls,O,xe),Ye===null?Ee=Ls:Ye.sibling=Ls,Ye=Ls,ge=Be}if(We.done)return o(M,ge),qe&&Tr(M,xe),Ee;if(ge===null){for(;!We.done;xe++,We=B.next())We=J(M,We.value,$),We!==null&&(O=p(We,O,xe),Ye===null?Ee=We:Ye.sibling=We,Ye=We);return qe&&Tr(M,xe),Ee}for(ge=u(ge);!We.done;xe++,We=B.next())We=q(ge,M,xe,We.value,$),We!==null&&(i&&We.alternate!==null&&ge.delete(We.key===null?xe:We.key),O=p(We,O,xe),Ye===null?Ee=We:Ye.sibling=We,Ye=We);return i&&ge.forEach(function(r5){return s(M,r5)}),qe&&Tr(M,xe),Ee}function at(M,O,B,$){if(typeof B=="object"&&B!==null&&B.type===ee&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case N:e:{for(var Ee=B.key;O!==null;){if(O.key===Ee){if(Ee=B.type,Ee===ee){if(O.tag===7){o(M,O.sibling),$=f(O,B.props.children),$.return=M,M=$;break e}}else if(O.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===S&&ka(Ee)===O.type){o(M,O.sibling),$=f(O,B.props),ku($,B),$.return=M,M=$;break e}o(M,O);break}else s(M,O);O=O.sibling}B.type===ee?($=Ca(B.props.children,M.mode,$,B.key),$.return=M,M=$):($=ed(B.type,B.key,B.props,null,M.mode,$),ku($,B),$.return=M,M=$)}return y(M);case Q:e:{for(Ee=B.key;O!==null;){if(O.key===Ee)if(O.tag===4&&O.stateNode.containerInfo===B.containerInfo&&O.stateNode.implementation===B.implementation){o(M,O.sibling),$=f(O,B.children||[]),$.return=M,M=$;break e}else{o(M,O);break}else s(M,O);O=O.sibling}$=Km(B,M.mode,$),$.return=M,M=$}return y(M);case S:return B=ka(B),at(M,O,B,$)}if(Ut(B))return de(M,O,B,$);if(L(B)){if(Ee=L(B),typeof Ee!="function")throw Error(r(150));return B=Ee.call(B),we(M,O,B,$)}if(typeof B.then=="function")return at(M,O,od(B),$);if(B.$$typeof===ce)return at(M,O,id(M,B),$);ld(M,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,O!==null&&O.tag===6?(o(M,O.sibling),$=f(O,B),$.return=M,M=$):(o(M,O),$=Hm(B,M.mode,$),$.return=M,M=$),y(M)):o(M,O)}return function(M,O,B,$){try{Ou=0;var Ee=at(M,O,B,$);return Wo=null,Ee}catch(ge){if(ge===Yo||ge===sd)throw ge;var Ye=Jn(29,ge,null,M.mode);return Ye.lanes=$,Ye.return=M,Ye}finally{}}}var Va=rv(!0),sv=rv(!1),Es=!1;function rp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sp(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ts(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ws(i,s,o){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Xe&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=Jh(i),F0(i,null,o),s}return Zh(i,u,s,o),Jh(i)}function Pu(i,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,es(i,o)}}function ap(i,s){var o=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var y={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?f=p=y:p=p.next=y,o=o.next}while(o!==null);p===null?f=p=s:p=p.next=s}else f=p=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=s:i.next=s,o.lastBaseUpdate=s}var op=!1;function Vu(){if(op){var i=Qo;if(i!==null)throw i}}function Mu(i,s,o,u){op=!1;var f=i.updateQueue;Es=!1;var p=f.firstBaseUpdate,y=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var D=w,j=D.next;D.next=null,y===null?p=j:y.next=j,y=D;var Y=i.alternate;Y!==null&&(Y=Y.updateQueue,w=Y.lastBaseUpdate,w!==y&&(w===null?Y.firstBaseUpdate=j:w.next=j,Y.lastBaseUpdate=D))}if(p!==null){var J=f.baseState;y=0,Y=j=D=null,w=p;do{var F=w.lane&-536870913,q=F!==w.lane;if(q?(Ue&F)===F:(u&F)===F){F!==0&&F===Ko&&(op=!0),Y!==null&&(Y=Y.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var de=i,we=w;F=s;var at=o;switch(we.tag){case 1:if(de=we.payload,typeof de=="function"){J=de.call(at,J,F);break e}J=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=we.payload,F=typeof de=="function"?de.call(at,J,F):de,F==null)break e;J=T({},J,F);break e;case 2:Es=!0}}F=w.callback,F!==null&&(i.flags|=64,q&&(i.flags|=8192),q=f.callbacks,q===null?f.callbacks=[F]:q.push(F))}else q={lane:F,tag:w.tag,payload:w.payload,callback:w.callback,next:null},Y===null?(j=Y=q,D=J):Y=Y.next=q,y|=F;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;q=w,w=q.next,q.next=null,f.lastBaseUpdate=q,f.shared.pending=null}}while(!0);Y===null&&(D=J),f.baseState=D,f.firstBaseUpdate=j,f.lastBaseUpdate=Y,p===null&&(f.shared.lanes=0),Rs|=y,i.lanes=y,i.memoizedState=J}}function av(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function ov(i,s){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)av(o[i],s)}var $o=k(null),ud=k(0);function lv(i,s){i=Or,se(ud,i),se($o,s),Or=i|s.baseLanes}function lp(){se(ud,Or),se($o,$o.current)}function up(){Or=ud.current,W($o),W(ud)}var ei=k(null),yi=null;function As(i){var s=i.alternate;se(kt,kt.current&1),se(ei,i),yi===null&&(s===null||$o.current!==null||s.memoizedState!==null)&&(yi=i)}function cp(i){se(kt,kt.current),se(ei,i),yi===null&&(yi=i)}function uv(i){i.tag===22?(se(kt,kt.current),se(ei,i),yi===null&&(yi=i)):Is()}function Is(){se(kt,kt.current),se(ei,ei.current)}function ti(i){W(ei),yi===i&&(yi=null),W(kt)}var kt=k(0);function cd(i){for(var s=i;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||gg(o)||_g(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ir=0,Ce=null,rt=null,zt=null,hd=!1,Xo=!1,Ma=!1,dd=0,Lu=0,Zo=null,YS=0;function bt(){throw Error(r(321))}function hp(i,s){if(s===null)return!1;for(var o=0;o<s.length&&o<i.length;o++)if(!Zn(i[o],s[o]))return!1;return!0}function dp(i,s,o,u,f,p){return Ir=p,Ce=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,K.H=i===null||i.memoizedState===null?Kv:Rp,Ma=!1,p=o(u,f),Ma=!1,Xo&&(p=hv(s,o,u,f)),cv(i),p}function cv(i){K.H=ju;var s=rt!==null&&rt.next!==null;if(Ir=0,zt=rt=Ce=null,hd=!1,Lu=0,Zo=null,s)throw Error(r(300));i===null||Ft||(i=i.dependencies,i!==null&&nd(i)&&(Ft=!0))}function hv(i,s,o,u){Ce=i;var f=0;do{if(Xo&&(Zo=null),Lu=0,Xo=!1,25<=f)throw Error(r(301));if(f+=1,zt=rt=null,i.updateQueue!=null){var p=i.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}K.H=Qv,p=s(o,u)}while(Xo);return p}function WS(){var i=K.H,s=i.useState()[0];return s=typeof s.then=="function"?Uu(s):s,i=i.useState()[0],(rt!==null?rt.memoizedState:null)!==i&&(Ce.flags|=1024),s}function fp(){var i=dd!==0;return dd=0,i}function mp(i,s,o){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~o}function pp(i){if(hd){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}hd=!1}Ir=0,zt=rt=Ce=null,Xo=!1,Lu=dd=0,Zo=null}function Dn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?Ce.memoizedState=zt=i:zt=zt.next=i,zt}function Pt(){if(rt===null){var i=Ce.alternate;i=i!==null?i.memoizedState:null}else i=rt.next;var s=zt===null?Ce.memoizedState:zt.next;if(s!==null)zt=s,rt=i;else{if(i===null)throw Ce.alternate===null?Error(r(467)):Error(r(310));rt=i,i={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},zt===null?Ce.memoizedState=zt=i:zt=zt.next=i}return zt}function fd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Uu(i){var s=Lu;return Lu+=1,Zo===null&&(Zo=[]),i=tv(Zo,i,s),s=Ce,(zt===null?s.memoizedState:zt.next)===null&&(s=s.alternate,K.H=s===null||s.memoizedState===null?Kv:Rp),i}function md(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Uu(i);if(i.$$typeof===ce)return hn(i)}throw Error(r(438,String(i)))}function gp(i){var s=null,o=Ce.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Ce.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=fd(),Ce.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(i),u=0;u<i;u++)o[u]=P;return s.index++,o}function br(i,s){return typeof s=="function"?s(i):s}function pd(i){var s=Pt();return _p(s,rt,i)}function _p(i,s,o){var u=i.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=i.baseQueue,p=u.pending;if(p!==null){if(f!==null){var y=f.next;f.next=p.next,p.next=y}s.baseQueue=f=p,u.pending=null}if(p=i.baseState,f===null)i.memoizedState=p;else{s=f.next;var w=y=null,D=null,j=s,Y=!1;do{var J=j.lane&-536870913;if(J!==j.lane?(Ue&J)===J:(Ir&J)===J){var F=j.revertLane;if(F===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),J===Ko&&(Y=!0);else if((Ir&F)===F){j=j.next,F===Ko&&(Y=!0);continue}else J={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},D===null?(w=D=J,y=p):D=D.next=J,Ce.lanes|=F,Rs|=F;J=j.action,Ma&&o(p,J),p=j.hasEagerState?j.eagerState:o(p,J)}else F={lane:J,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},D===null?(w=D=F,y=p):D=D.next=F,Ce.lanes|=J,Rs|=J;j=j.next}while(j!==null&&j!==s);if(D===null?y=p:D.next=w,!Zn(p,i.memoizedState)&&(Ft=!0,Y&&(o=Qo,o!==null)))throw o;i.memoizedState=p,i.baseState=y,i.baseQueue=D,u.lastRenderedState=p}return f===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function yp(i){var s=Pt(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=i;var u=o.dispatch,f=o.pending,p=s.memoizedState;if(f!==null){o.pending=null;var y=f=f.next;do p=i(p,y.action),y=y.next;while(y!==f);Zn(p,s.memoizedState)||(Ft=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,u]}function dv(i,s,o){var u=Ce,f=Pt(),p=qe;if(p){if(o===void 0)throw Error(r(407));o=o()}else o=s();var y=!Zn((rt||f).memoizedState,o);if(y&&(f.memoizedState=o,Ft=!0),f=f.queue,Tp(pv.bind(null,u,f,i),[i]),f.getSnapshot!==s||y||zt!==null&&zt.memoizedState.tag&1){if(u.flags|=2048,Jo(9,{destroy:void 0},mv.bind(null,u,f,o,s),null),lt===null)throw Error(r(349));p||(Ir&127)!==0||fv(u,s,o)}return o}function fv(i,s,o){i.flags|=16384,i={getSnapshot:s,value:o},s=Ce.updateQueue,s===null?(s=fd(),Ce.updateQueue=s,s.stores=[i]):(o=s.stores,o===null?s.stores=[i]:o.push(i))}function mv(i,s,o,u){s.value=o,s.getSnapshot=u,gv(s)&&_v(i)}function pv(i,s,o){return o(function(){gv(s)&&_v(i)})}function gv(i){var s=i.getSnapshot;i=i.value;try{var o=s();return!Zn(i,o)}catch{return!0}}function _v(i){var s=Ra(i,2);s!==null&&Gn(s,i,2)}function vp(i){var s=Dn();if(typeof i=="function"){var o=i;if(i=o(),Ma){ui(!0);try{o()}finally{ui(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:br,lastRenderedState:i},s}function yv(i,s,o,u){return i.baseState=o,_p(i,rt,typeof u=="function"?u:br)}function $S(i,s,o,u,f){if(yd(i))throw Error(r(485));if(i=s.action,i!==null){var p={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){p.listeners.push(y)}};K.T!==null?o(!0):p.isTransition=!1,u(p),o=s.pending,o===null?(p.next=s.pending=p,vv(s,p)):(p.next=o.next,s.pending=o.next=p)}}function vv(i,s){var o=s.action,u=s.payload,f=i.state;if(s.isTransition){var p=K.T,y={};K.T=y;try{var w=o(f,u),D=K.S;D!==null&&D(y,w),Ev(i,s,w)}catch(j){Ep(i,s,j)}finally{p!==null&&y.types!==null&&(p.types=y.types),K.T=p}}else try{p=o(f,u),Ev(i,s,p)}catch(j){Ep(i,s,j)}}function Ev(i,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Tv(i,s,u)},function(u){return Ep(i,s,u)}):Tv(i,s,o)}function Tv(i,s,o){s.status="fulfilled",s.value=o,wv(s),i.state=o,s=i.pending,s!==null&&(o=s.next,o===s?i.pending=null:(o=o.next,s.next=o,vv(i,o)))}function Ep(i,s,o){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,wv(s),s=s.next;while(s!==u)}i.action=null}function wv(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function Av(i,s){return s}function Iv(i,s){if(qe){var o=lt.formState;if(o!==null){e:{var u=Ce;if(qe){if(ht){t:{for(var f=ht,p=_i;f.nodeType!==8;){if(!p){f=null;break t}if(f=vi(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){ht=vi(f.nextSibling),u=f.data==="F!";break e}}ys(u)}u=!1}u&&(s=o[0])}}return o=Dn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Av,lastRenderedState:s},o.queue=u,o=qv.bind(null,Ce,u),u.dispatch=o,u=vp(!1),p=Sp.bind(null,Ce,!1,u.queue),u=Dn(),f={state:s,dispatch:null,action:i,pending:null},u.queue=f,o=$S.bind(null,Ce,f,p,o),f.dispatch=o,u.memoizedState=i,[s,o,!1]}function bv(i){var s=Pt();return Sv(s,rt,i)}function Sv(i,s,o){if(s=_p(i,s,Av)[0],i=pd(br)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Uu(s)}catch(y){throw y===Yo?sd:y}else u=s;s=Pt();var f=s.queue,p=f.dispatch;return o!==s.memoizedState&&(Ce.flags|=2048,Jo(9,{destroy:void 0},XS.bind(null,f,o),null)),[u,p,i]}function XS(i,s){i.action=s}function Rv(i){var s=Pt(),o=rt;if(o!==null)return Sv(s,o,i);Pt(),s=s.memoizedState,o=Pt();var u=o.queue.dispatch;return o.memoizedState=i,[s,u,!1]}function Jo(i,s,o,u){return i={tag:i,create:o,deps:u,inst:s,next:null},s=Ce.updateQueue,s===null&&(s=fd(),Ce.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=i.next=i:(u=o.next,o.next=i,i.next=u,s.lastEffect=i),i}function Cv(){return Pt().memoizedState}function gd(i,s,o,u){var f=Dn();Ce.flags|=i,f.memoizedState=Jo(1|s,{destroy:void 0},o,u===void 0?null:u)}function _d(i,s,o,u){var f=Pt();u=u===void 0?null:u;var p=f.memoizedState.inst;rt!==null&&u!==null&&hp(u,rt.memoizedState.deps)?f.memoizedState=Jo(s,p,o,u):(Ce.flags|=i,f.memoizedState=Jo(1|s,p,o,u))}function Dv(i,s){gd(8390656,8,i,s)}function Tp(i,s){_d(2048,8,i,s)}function ZS(i){Ce.flags|=4;var s=Ce.updateQueue;if(s===null)s=fd(),Ce.updateQueue=s,s.events=[i];else{var o=s.events;o===null?s.events=[i]:o.push(i)}}function xv(i){var s=Pt().memoizedState;return ZS({ref:s,nextImpl:i}),function(){if((Xe&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function Nv(i,s){return _d(4,2,i,s)}function Ov(i,s){return _d(4,4,i,s)}function kv(i,s){if(typeof s=="function"){i=i();var o=s(i);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Pv(i,s,o){o=o!=null?o.concat([i]):null,_d(4,4,kv.bind(null,s,i),o)}function wp(){}function Vv(i,s){var o=Pt();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&hp(s,u[1])?u[0]:(o.memoizedState=[i,s],i)}function Mv(i,s){var o=Pt();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&hp(s,u[1]))return u[0];if(u=i(),Ma){ui(!0);try{i()}finally{ui(!1)}}return o.memoizedState=[u,s],u}function Ap(i,s,o){return o===void 0||(Ir&1073741824)!==0&&(Ue&261930)===0?i.memoizedState=s:(i.memoizedState=o,i=L1(),Ce.lanes|=i,Rs|=i,o)}function Lv(i,s,o,u){return Zn(o,s)?o:$o.current!==null?(i=Ap(i,o,u),Zn(i,s)||(Ft=!0),i):(Ir&42)===0||(Ir&1073741824)!==0&&(Ue&261930)===0?(Ft=!0,i.memoizedState=o):(i=L1(),Ce.lanes|=i,Rs|=i,s)}function Uv(i,s,o,u,f){var p=oe.p;oe.p=p!==0&&8>p?p:8;var y=K.T,w={};K.T=w,Sp(i,!1,s,o);try{var D=f(),j=K.S;if(j!==null&&j(w,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Y=QS(D,u);Bu(i,s,Y,ri(i))}else Bu(i,s,u,ri(i))}catch(J){Bu(i,s,{then:function(){},status:"rejected",reason:J},ri())}finally{oe.p=p,y!==null&&w.types!==null&&(y.types=w.types),K.T=y}}function JS(){}function Ip(i,s,o,u){if(i.tag!==5)throw Error(r(476));var f=Bv(i).queue;Uv(i,f,s,_e,o===null?JS:function(){return jv(i),o(u)})}function Bv(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:br,lastRenderedState:_e},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:br,lastRenderedState:o},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function jv(i){var s=Bv(i);s.next===null&&(s=i.alternate.memoizedState),Bu(i,s.next.queue,{},ri())}function bp(){return hn(nc)}function zv(){return Pt().memoizedState}function Fv(){return Pt().memoizedState}function eR(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var o=ri();i=Ts(o);var u=ws(s,i,o);u!==null&&(Gn(u,s,o),Pu(u,s,o)),s={cache:ep()},i.payload=s;return}s=s.return}}function tR(i,s,o){var u=ri();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},yd(i)?Gv(s,o):(o=qm(i,s,o,u),o!==null&&(Gn(o,i,u),Hv(o,s,u)))}function qv(i,s,o){var u=ri();Bu(i,s,o,u)}function Bu(i,s,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(yd(i))Gv(s,f);else{var p=i.alternate;if(i.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var y=s.lastRenderedState,w=p(y,o);if(f.hasEagerState=!0,f.eagerState=w,Zn(w,y))return Zh(i,s,f,0),lt===null&&Xh(),!1}catch{}finally{}if(o=qm(i,s,f,u),o!==null)return Gn(o,i,u),Hv(o,s,u),!0}return!1}function Sp(i,s,o,u){if(u={lane:2,revertLane:rg(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},yd(i)){if(s)throw Error(r(479))}else s=qm(i,o,u,2),s!==null&&Gn(s,i,2)}function yd(i){var s=i.alternate;return i===Ce||s!==null&&s===Ce}function Gv(i,s){Xo=hd=!0;var o=i.pending;o===null?s.next=s:(s.next=o.next,o.next=s),i.pending=s}function Hv(i,s,o){if((o&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,es(i,o)}}var ju={readContext:hn,use:md,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useLayoutEffect:bt,useInsertionEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useSyncExternalStore:bt,useId:bt,useHostTransitionStatus:bt,useFormState:bt,useActionState:bt,useOptimistic:bt,useMemoCache:bt,useCacheRefresh:bt};ju.useEffectEvent=bt;var Kv={readContext:hn,use:md,useCallback:function(i,s){return Dn().memoizedState=[i,s===void 0?null:s],i},useContext:hn,useEffect:Dv,useImperativeHandle:function(i,s,o){o=o!=null?o.concat([i]):null,gd(4194308,4,kv.bind(null,s,i),o)},useLayoutEffect:function(i,s){return gd(4194308,4,i,s)},useInsertionEffect:function(i,s){gd(4,2,i,s)},useMemo:function(i,s){var o=Dn();s=s===void 0?null:s;var u=i();if(Ma){ui(!0);try{i()}finally{ui(!1)}}return o.memoizedState=[u,s],u},useReducer:function(i,s,o){var u=Dn();if(o!==void 0){var f=o(s);if(Ma){ui(!0);try{o(s)}finally{ui(!1)}}}else f=s;return u.memoizedState=u.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},u.queue=i,i=i.dispatch=tR.bind(null,Ce,i),[u.memoizedState,i]},useRef:function(i){var s=Dn();return i={current:i},s.memoizedState=i},useState:function(i){i=vp(i);var s=i.queue,o=qv.bind(null,Ce,s);return s.dispatch=o,[i.memoizedState,o]},useDebugValue:wp,useDeferredValue:function(i,s){var o=Dn();return Ap(o,i,s)},useTransition:function(){var i=vp(!1);return i=Uv.bind(null,Ce,i.queue,!0,!1),Dn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,o){var u=Ce,f=Dn();if(qe){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),lt===null)throw Error(r(349));(Ue&127)!==0||fv(u,s,o)}f.memoizedState=o;var p={value:o,getSnapshot:s};return f.queue=p,Dv(pv.bind(null,u,p,i),[i]),u.flags|=2048,Jo(9,{destroy:void 0},mv.bind(null,u,p,o,s),null),o},useId:function(){var i=Dn(),s=lt.identifierPrefix;if(qe){var o=Ki,u=Hi;o=(u&~(1<<32-In(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=dd++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=YS++,s="_"+s+"r_"+o.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:bp,useFormState:Iv,useActionState:Iv,useOptimistic:function(i){var s=Dn();s.memoizedState=s.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Sp.bind(null,Ce,!0,o),o.dispatch=s,[i,s]},useMemoCache:gp,useCacheRefresh:function(){return Dn().memoizedState=eR.bind(null,Ce)},useEffectEvent:function(i){var s=Dn(),o={impl:i};return s.memoizedState=o,function(){if((Xe&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},Rp={readContext:hn,use:md,useCallback:Vv,useContext:hn,useEffect:Tp,useImperativeHandle:Pv,useInsertionEffect:Nv,useLayoutEffect:Ov,useMemo:Mv,useReducer:pd,useRef:Cv,useState:function(){return pd(br)},useDebugValue:wp,useDeferredValue:function(i,s){var o=Pt();return Lv(o,rt.memoizedState,i,s)},useTransition:function(){var i=pd(br)[0],s=Pt().memoizedState;return[typeof i=="boolean"?i:Uu(i),s]},useSyncExternalStore:dv,useId:zv,useHostTransitionStatus:bp,useFormState:bv,useActionState:bv,useOptimistic:function(i,s){var o=Pt();return yv(o,rt,i,s)},useMemoCache:gp,useCacheRefresh:Fv};Rp.useEffectEvent=xv;var Qv={readContext:hn,use:md,useCallback:Vv,useContext:hn,useEffect:Tp,useImperativeHandle:Pv,useInsertionEffect:Nv,useLayoutEffect:Ov,useMemo:Mv,useReducer:yp,useRef:Cv,useState:function(){return yp(br)},useDebugValue:wp,useDeferredValue:function(i,s){var o=Pt();return rt===null?Ap(o,i,s):Lv(o,rt.memoizedState,i,s)},useTransition:function(){var i=yp(br)[0],s=Pt().memoizedState;return[typeof i=="boolean"?i:Uu(i),s]},useSyncExternalStore:dv,useId:zv,useHostTransitionStatus:bp,useFormState:Rv,useActionState:Rv,useOptimistic:function(i,s){var o=Pt();return rt!==null?yv(o,rt,i,s):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:gp,useCacheRefresh:Fv};Qv.useEffectEvent=xv;function Cp(i,s,o,u){s=i.memoizedState,o=o(u,s),o=o==null?s:T({},s,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var Dp={enqueueSetState:function(i,s,o){i=i._reactInternals;var u=ri(),f=Ts(u);f.payload=s,o!=null&&(f.callback=o),s=ws(i,f,u),s!==null&&(Gn(s,i,u),Pu(s,i,u))},enqueueReplaceState:function(i,s,o){i=i._reactInternals;var u=ri(),f=Ts(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=ws(i,f,u),s!==null&&(Gn(s,i,u),Pu(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var o=ri(),u=Ts(o);u.tag=2,s!=null&&(u.callback=s),s=ws(i,u,o),s!==null&&(Gn(s,i,o),Pu(s,i,o))}};function Yv(i,s,o,u,f,p,y){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,p,y):s.prototype&&s.prototype.isPureReactComponent?!Su(o,u)||!Su(f,p):!0}function Wv(i,s,o,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==i&&Dp.enqueueReplaceState(s,s.state,null)}function La(i,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(i=i.defaultProps){o===s&&(o=T({},o));for(var f in i)o[f]===void 0&&(o[f]=i[f])}return o}function $v(i){$h(i)}function Xv(i){console.error(i)}function Zv(i){$h(i)}function vd(i,s){try{var o=i.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Jv(i,s,o){try{var u=i.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function xp(i,s,o){return o=Ts(o),o.tag=3,o.payload={element:null},o.callback=function(){vd(i,s)},o}function e1(i){return i=Ts(i),i.tag=3,i}function t1(i,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var p=u.value;i.payload=function(){return f(p)},i.callback=function(){Jv(s,o,u)}}var y=o.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(i.callback=function(){Jv(s,o,u),typeof f!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this));var w=u.stack;this.componentDidCatch(u.value,{componentStack:w!==null?w:""})})}function nR(i,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&Ho(s,o,f,!0),o=ei.current,o!==null){switch(o.tag){case 31:case 13:return yi===null?Nd():o.alternate===null&&St===0&&(St=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===ad?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),tg(i,u,f)),!1;case 22:return o.flags|=65536,u===ad?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),tg(i,u,f)),!1}throw Error(r(435,o.tag))}return tg(i,u,f),Nd(),!1}if(qe)return s=ei.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==Wm&&(i=Error(r(422),{cause:u}),Du(mi(i,o)))):(u!==Wm&&(s=Error(r(423),{cause:u}),Du(mi(s,o))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,u=mi(u,o),f=xp(i.stateNode,u,f),ap(i,f),St!==4&&(St=2)),!1;var p=Error(r(520),{cause:u});if(p=mi(p,o),Yu===null?Yu=[p]:Yu.push(p),St!==4&&(St=2),s===null)return!0;u=mi(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,i=f&-f,o.lanes|=i,i=xp(o.stateNode,u,i),ap(o,i),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Cs===null||!Cs.has(p))))return o.flags|=65536,f&=-f,o.lanes|=f,f=e1(f),t1(f,i,o,u),ap(o,f),!1}o=o.return}while(o!==null);return!1}var Np=Error(r(461)),Ft=!1;function dn(i,s,o,u){s.child=i===null?sv(s,null,o,u):Va(s,i.child,o,u)}function n1(i,s,o,u,f){o=o.render;var p=s.ref;if("ref"in u){var y={};for(var w in u)w!=="ref"&&(y[w]=u[w])}else y=u;return Na(s),u=dp(i,s,o,y,p,f),w=fp(),i!==null&&!Ft?(mp(i,s,f),Sr(i,s,f)):(qe&&w&&Qm(s),s.flags|=1,dn(i,s,u,f),s.child)}function i1(i,s,o,u,f){if(i===null){var p=o.type;return typeof p=="function"&&!Gm(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,r1(i,s,p,u,f)):(i=ed(o.type,null,u,s,s.mode,f),i.ref=s.ref,i.return=s,s.child=i)}if(p=i.child,!Bp(i,f)){var y=p.memoizedProps;if(o=o.compare,o=o!==null?o:Su,o(y,u)&&i.ref===s.ref)return Sr(i,s,f)}return s.flags|=1,i=Er(p,u),i.ref=s.ref,i.return=s,s.child=i}function r1(i,s,o,u,f){if(i!==null){var p=i.memoizedProps;if(Su(p,u)&&i.ref===s.ref)if(Ft=!1,s.pendingProps=u=p,Bp(i,f))(i.flags&131072)!==0&&(Ft=!0);else return s.lanes=i.lanes,Sr(i,s,f)}return Op(i,s,o,u,f)}function s1(i,s,o,u){var f=u.children,p=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,i!==null){for(u=s.child=i.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~p}else u=0,s.child=null;return a1(i,s,p,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&rd(s,p!==null?p.cachePool:null),p!==null?lv(s,p):lp(),uv(s);else return u=s.lanes=536870912,a1(i,s,p!==null?p.baseLanes|o:o,o,u)}else p!==null?(rd(s,p.cachePool),lv(s,p),Is(),s.memoizedState=null):(i!==null&&rd(s,null),lp(),Is());return dn(i,s,f,o),s.child}function zu(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function a1(i,s,o,u,f){var p=np();return p=p===null?null:{parent:jt._currentValue,pool:p},s.memoizedState={baseLanes:o,cachePool:p},i!==null&&rd(s,null),lp(),uv(s),i!==null&&Ho(i,s,u,!0),s.childLanes=f,null}function Ed(i,s){return s=wd({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function o1(i,s,o){return Va(s,i.child,null,o),i=Ed(s,s.pendingProps),i.flags|=2,ti(s),s.memoizedState=null,i}function iR(i,s,o){var u=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(qe){if(u.mode==="hidden")return i=Ed(s,u),s.lanes=536870912,zu(null,i);if(cp(s),(i=ht)?(i=vE(i,_i),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:gs!==null?{id:Hi,overflow:Ki}:null,retryLane:536870912,hydrationErrors:null},o=G0(i),o.return=s,s.child=o,cn=s,ht=null)):i=null,i===null)throw ys(s);return s.lanes=536870912,null}return Ed(s,u)}var p=i.memoizedState;if(p!==null){var y=p.dehydrated;if(cp(s),f)if(s.flags&256)s.flags&=-257,s=o1(i,s,o);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(r(558));else if(Ft||Ho(i,s,o,!1),f=(o&i.childLanes)!==0,Ft||f){if(u=lt,u!==null&&(y=ts(u,o),y!==0&&y!==p.retryLane))throw p.retryLane=y,Ra(i,y),Gn(u,i,y),Np;Nd(),s=o1(i,s,o)}else i=p.treeContext,ht=vi(y.nextSibling),cn=s,qe=!0,_s=null,_i=!1,i!==null&&Q0(s,i),s=Ed(s,u),s.flags|=4096;return s}return i=Er(i.child,{mode:u.mode,children:u.children}),i.ref=s.ref,s.child=i,i.return=s,i}function Td(i,s){var o=s.ref;if(o===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(i===null||i.ref!==o)&&(s.flags|=4194816)}}function Op(i,s,o,u,f){return Na(s),o=dp(i,s,o,u,void 0,f),u=fp(),i!==null&&!Ft?(mp(i,s,f),Sr(i,s,f)):(qe&&u&&Qm(s),s.flags|=1,dn(i,s,o,f),s.child)}function l1(i,s,o,u,f,p){return Na(s),s.updateQueue=null,o=hv(s,u,o,f),cv(i),u=fp(),i!==null&&!Ft?(mp(i,s,p),Sr(i,s,p)):(qe&&u&&Qm(s),s.flags|=1,dn(i,s,o,p),s.child)}function u1(i,s,o,u,f){if(Na(s),s.stateNode===null){var p=zo,y=o.contextType;typeof y=="object"&&y!==null&&(p=hn(y)),p=new o(u,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Dp,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=u,p.state=s.memoizedState,p.refs={},rp(s),y=o.contextType,p.context=typeof y=="object"&&y!==null?hn(y):zo,p.state=s.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(Cp(s,o,y,u),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(y=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),y!==p.state&&Dp.enqueueReplaceState(p,p.state,null),Mu(s,u,p,f),Vu(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){p=s.stateNode;var w=s.memoizedProps,D=La(o,w);p.props=D;var j=p.context,Y=o.contextType;y=zo,typeof Y=="object"&&Y!==null&&(y=hn(Y));var J=o.getDerivedStateFromProps;Y=typeof J=="function"||typeof p.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,Y||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w||j!==y)&&Wv(s,p,u,y),Es=!1;var F=s.memoizedState;p.state=F,Mu(s,u,p,f),Vu(),j=s.memoizedState,w||F!==j||Es?(typeof J=="function"&&(Cp(s,o,J,u),j=s.memoizedState),(D=Es||Yv(s,o,D,u,F,j,y))?(Y||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=j),p.props=u,p.state=j,p.context=y,u=D):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{p=s.stateNode,sp(i,s),y=s.memoizedProps,Y=La(o,y),p.props=Y,J=s.pendingProps,F=p.context,j=o.contextType,D=zo,typeof j=="object"&&j!==null&&(D=hn(j)),w=o.getDerivedStateFromProps,(j=typeof w=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(y!==J||F!==D)&&Wv(s,p,u,D),Es=!1,F=s.memoizedState,p.state=F,Mu(s,u,p,f),Vu();var q=s.memoizedState;y!==J||F!==q||Es||i!==null&&i.dependencies!==null&&nd(i.dependencies)?(typeof w=="function"&&(Cp(s,o,w,u),q=s.memoizedState),(Y=Es||Yv(s,o,Y,u,F,q,D)||i!==null&&i.dependencies!==null&&nd(i.dependencies))?(j||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,q,D),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,q,D)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||y===i.memoizedProps&&F===i.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||y===i.memoizedProps&&F===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=q),p.props=u,p.state=q,p.context=D,u=Y):(typeof p.componentDidUpdate!="function"||y===i.memoizedProps&&F===i.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||y===i.memoizedProps&&F===i.memoizedState||(s.flags|=1024),u=!1)}return p=u,Td(i,s),u=(s.flags&128)!==0,p||u?(p=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,i!==null&&u?(s.child=Va(s,i.child,null,f),s.child=Va(s,null,o,f)):dn(i,s,o,f),s.memoizedState=p.state,i=s.child):i=Sr(i,s,f),i}function c1(i,s,o,u){return Da(),s.flags|=256,dn(i,s,o,u),s.child}var kp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pp(i){return{baseLanes:i,cachePool:J0()}}function Vp(i,s,o){return i=i!==null?i.childLanes&~o:0,s&&(i|=ii),i}function h1(i,s,o){var u=s.pendingProps,f=!1,p=(s.flags&128)!==0,y;if((y=p)||(y=i!==null&&i.memoizedState===null?!1:(kt.current&2)!==0),y&&(f=!0,s.flags&=-129),y=(s.flags&32)!==0,s.flags&=-33,i===null){if(qe){if(f?As(s):Is(),(i=ht)?(i=vE(i,_i),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:gs!==null?{id:Hi,overflow:Ki}:null,retryLane:536870912,hydrationErrors:null},o=G0(i),o.return=s,s.child=o,cn=s,ht=null)):i=null,i===null)throw ys(s);return _g(i)?s.lanes=32:s.lanes=536870912,null}var w=u.children;return u=u.fallback,f?(Is(),f=s.mode,w=wd({mode:"hidden",children:w},f),u=Ca(u,f,o,null),w.return=s,u.return=s,w.sibling=u,s.child=w,u=s.child,u.memoizedState=Pp(o),u.childLanes=Vp(i,y,o),s.memoizedState=kp,zu(null,u)):(As(s),Mp(s,w))}var D=i.memoizedState;if(D!==null&&(w=D.dehydrated,w!==null)){if(p)s.flags&256?(As(s),s.flags&=-257,s=Lp(i,s,o)):s.memoizedState!==null?(Is(),s.child=i.child,s.flags|=128,s=null):(Is(),w=u.fallback,f=s.mode,u=wd({mode:"visible",children:u.children},f),w=Ca(w,f,o,null),w.flags|=2,u.return=s,w.return=s,u.sibling=w,s.child=u,Va(s,i.child,null,o),u=s.child,u.memoizedState=Pp(o),u.childLanes=Vp(i,y,o),s.memoizedState=kp,s=zu(null,u));else if(As(s),_g(w)){if(y=w.nextSibling&&w.nextSibling.dataset,y)var j=y.dgst;y=j,u=Error(r(419)),u.stack="",u.digest=y,Du({value:u,source:null,stack:null}),s=Lp(i,s,o)}else if(Ft||Ho(i,s,o,!1),y=(o&i.childLanes)!==0,Ft||y){if(y=lt,y!==null&&(u=ts(y,o),u!==0&&u!==D.retryLane))throw D.retryLane=u,Ra(i,u),Gn(y,i,u),Np;gg(w)||Nd(),s=Lp(i,s,o)}else gg(w)?(s.flags|=192,s.child=i.child,s=null):(i=D.treeContext,ht=vi(w.nextSibling),cn=s,qe=!0,_s=null,_i=!1,i!==null&&Q0(s,i),s=Mp(s,u.children),s.flags|=4096);return s}return f?(Is(),w=u.fallback,f=s.mode,D=i.child,j=D.sibling,u=Er(D,{mode:"hidden",children:u.children}),u.subtreeFlags=D.subtreeFlags&65011712,j!==null?w=Er(j,w):(w=Ca(w,f,o,null),w.flags|=2),w.return=s,u.return=s,u.sibling=w,s.child=u,zu(null,u),u=s.child,w=i.child.memoizedState,w===null?w=Pp(o):(f=w.cachePool,f!==null?(D=jt._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=J0(),w={baseLanes:w.baseLanes|o,cachePool:f}),u.memoizedState=w,u.childLanes=Vp(i,y,o),s.memoizedState=kp,zu(i.child,u)):(As(s),o=i.child,i=o.sibling,o=Er(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,i!==null&&(y=s.deletions,y===null?(s.deletions=[i],s.flags|=16):y.push(i)),s.child=o,s.memoizedState=null,o)}function Mp(i,s){return s=wd({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function wd(i,s){return i=Jn(22,i,null,s),i.lanes=0,i}function Lp(i,s,o){return Va(s,i.child,null,o),i=Mp(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function d1(i,s,o){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),Zm(i.return,s,o)}function Up(i,s,o,u,f,p){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:p}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=u,y.tail=o,y.tailMode=f,y.treeForkCount=p)}function f1(i,s,o){var u=s.pendingProps,f=u.revealOrder,p=u.tail;u=u.children;var y=kt.current,w=(y&2)!==0;if(w?(y=y&1|2,s.flags|=128):y&=1,se(kt,y),dn(i,s,u,o),u=qe?Cu:0,!w&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&d1(i,o,s);else if(i.tag===19)d1(i,o,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(f){case"forwards":for(o=s.child,f=null;o!==null;)i=o.alternate,i!==null&&cd(i)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),Up(s,!1,f,o,p,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(i=f.alternate,i!==null&&cd(i)===null){s.child=f;break}i=f.sibling,f.sibling=o,o=f,f=i}Up(s,!0,o,null,p,u);break;case"together":Up(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function Sr(i,s,o){if(i!==null&&(s.dependencies=i.dependencies),Rs|=s.lanes,(o&s.childLanes)===0)if(i!==null){if(Ho(i,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,o=Er(i,i.pendingProps),s.child=o,o.return=s;i.sibling!==null;)i=i.sibling,o=o.sibling=Er(i,i.pendingProps),o.return=s;o.sibling=null}return s.child}function Bp(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&nd(i)))}function rR(i,s,o){switch(s.tag){case 3:an(s,s.stateNode.containerInfo),vs(s,jt,i.memoizedState.cache),Da();break;case 27:case 5:Mi(s);break;case 4:an(s,s.stateNode.containerInfo);break;case 10:vs(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,cp(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(As(s),s.flags|=128,null):(o&s.child.childLanes)!==0?h1(i,s,o):(As(s),i=Sr(i,s,o),i!==null?i.sibling:null);As(s);break;case 19:var f=(i.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(Ho(i,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return f1(i,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),se(kt,kt.current),u)break;return null;case 22:return s.lanes=0,s1(i,s,o,s.pendingProps);case 24:vs(s,jt,i.memoizedState.cache)}return Sr(i,s,o)}function m1(i,s,o){if(i!==null)if(i.memoizedProps!==s.pendingProps)Ft=!0;else{if(!Bp(i,o)&&(s.flags&128)===0)return Ft=!1,rR(i,s,o);Ft=(i.flags&131072)!==0}else Ft=!1,qe&&(s.flags&1048576)!==0&&K0(s,Cu,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(i=ka(s.elementType),s.type=i,typeof i=="function")Gm(i)?(u=La(i,u),s.tag=1,s=u1(null,s,i,u,o)):(s.tag=0,s=Op(null,s,i,u,o));else{if(i!=null){var f=i.$$typeof;if(f===Ae){s.tag=11,s=n1(null,s,i,u,o);break e}else if(f===R){s.tag=14,s=i1(null,s,i,u,o);break e}}throw s=wt(i)||i,Error(r(306,s,""))}}return s;case 0:return Op(i,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=La(u,s.pendingProps),u1(i,s,u,f,o);case 3:e:{if(an(s,s.stateNode.containerInfo),i===null)throw Error(r(387));u=s.pendingProps;var p=s.memoizedState;f=p.element,sp(i,s),Mu(s,u,null,o);var y=s.memoizedState;if(u=y.cache,vs(s,jt,u),u!==p.cache&&Jm(s,[jt],o,!0),Vu(),u=y.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:y.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=c1(i,s,u,o);break e}else if(u!==f){f=mi(Error(r(424)),s),Du(f),s=c1(i,s,u,o);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ht=vi(i.firstChild),cn=s,qe=!0,_s=null,_i=!0,o=sv(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Da(),u===f){s=Sr(i,s,o);break e}dn(i,s,u,o)}s=s.child}return s;case 26:return Td(i,s),i===null?(o=bE(s.type,null,s.pendingProps,null))?s.memoizedState=o:qe||(o=s.type,i=s.pendingProps,u=Ud(Oe.current).createElement(o),u[At]=s,u[un]=i,fn(u,o,i),Ot(u),s.stateNode=u):s.memoizedState=bE(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Mi(s),i===null&&qe&&(u=s.stateNode=wE(s.type,s.pendingProps,Oe.current),cn=s,_i=!0,f=ht,Os(s.type)?(yg=f,ht=vi(u.firstChild)):ht=f),dn(i,s,s.pendingProps.children,o),Td(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&qe&&((f=u=ht)&&(u=PR(u,s.type,s.pendingProps,_i),u!==null?(s.stateNode=u,cn=s,ht=vi(u.firstChild),_i=!1,f=!0):f=!1),f||ys(s)),Mi(s),f=s.type,p=s.pendingProps,y=i!==null?i.memoizedProps:null,u=p.children,fg(f,p)?u=null:y!==null&&fg(f,y)&&(s.flags|=32),s.memoizedState!==null&&(f=dp(i,s,WS,null,null,o),nc._currentValue=f),Td(i,s),dn(i,s,u,o),s.child;case 6:return i===null&&qe&&((i=o=ht)&&(o=VR(o,s.pendingProps,_i),o!==null?(s.stateNode=o,cn=s,ht=null,i=!0):i=!1),i||ys(s)),null;case 13:return h1(i,s,o);case 4:return an(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=Va(s,null,u,o):dn(i,s,u,o),s.child;case 11:return n1(i,s,s.type,s.pendingProps,o);case 7:return dn(i,s,s.pendingProps,o),s.child;case 8:return dn(i,s,s.pendingProps.children,o),s.child;case 12:return dn(i,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,vs(s,s.type,u.value),dn(i,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,Na(s),f=hn(f),u=u(f),s.flags|=1,dn(i,s,u,o),s.child;case 14:return i1(i,s,s.type,s.pendingProps,o);case 15:return r1(i,s,s.type,s.pendingProps,o);case 19:return f1(i,s,o);case 31:return iR(i,s,o);case 22:return s1(i,s,o,s.pendingProps);case 24:return Na(s),u=hn(jt),i===null?(f=np(),f===null&&(f=lt,p=ep(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=o),f=p),s.memoizedState={parent:u,cache:f},rp(s),vs(s,jt,f)):((i.lanes&o)!==0&&(sp(i,s),Mu(s,null,null,o),Vu()),f=i.memoizedState,p=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),vs(s,jt,u)):(u=p.cache,vs(s,jt,u),u!==f.cache&&Jm(s,[jt],o,!0))),dn(i,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Rr(i){i.flags|=4}function jp(i,s,o,u,f){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(f&335544128)===f)if(i.stateNode.complete)i.flags|=8192;else if(z1())i.flags|=8192;else throw Pa=ad,ip}else i.flags&=-16777217}function p1(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!xE(s))if(z1())i.flags|=8192;else throw Pa=ad,ip}function Ad(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?lu():536870912,i.lanes|=s,il|=s)}function Fu(i,s){if(!qe)switch(i.tailMode){case"hidden":s=i.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function dt(i){var s=i.alternate!==null&&i.alternate.child===i.child,o=0,u=0;if(s)for(var f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=u,i.childLanes=o,s}function sR(i,s,o){var u=s.pendingProps;switch(Ym(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(s),null;case 1:return dt(s),null;case 3:return o=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Ar(jt),vt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(Go(s)?Rr(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,$m())),dt(s),null;case 26:var f=s.type,p=s.memoizedState;return i===null?(Rr(s),p!==null?(dt(s),p1(s,p)):(dt(s),jp(s,f,null,u,o))):p?p!==i.memoizedState?(Rr(s),dt(s),p1(s,p)):(dt(s),s.flags&=-16777217):(i=i.memoizedProps,i!==u&&Rr(s),dt(s),jp(s,f,i,u,o)),null;case 27:if(lr(s),o=Oe.current,f=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Rr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return dt(s),null}i=fe.current,Go(s)?Y0(s):(i=wE(f,u,o),s.stateNode=i,Rr(s))}return dt(s),null;case 5:if(lr(s),f=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Rr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return dt(s),null}if(p=fe.current,Go(s))Y0(s);else{var y=Ud(Oe.current);switch(p){case 1:p=y.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=y.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=y.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof u.is=="string"?y.createElement("select",{is:u.is}):y.createElement("select"),u.multiple?p.multiple=!0:u.size&&(p.size=u.size);break;default:p=typeof u.is=="string"?y.createElement(f,{is:u.is}):y.createElement(f)}}p[At]=s,p[un]=u;e:for(y=s.child;y!==null;){if(y.tag===5||y.tag===6)p.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===s)break e;for(;y.sibling===null;){if(y.return===null||y.return===s)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}s.stateNode=p;e:switch(fn(p,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Rr(s)}}return dt(s),jp(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,o),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&Rr(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(i=Oe.current,Go(s)){if(i=s.stateNode,o=s.memoizedProps,u=null,f=cn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}i[At]=s,i=!!(i.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||hE(i.nodeValue,o)),i||ys(s,!0)}else i=Ud(i).createTextNode(u),i[At]=s,s.stateNode=i}return dt(s),null;case 31:if(o=s.memoizedState,i===null||i.memoizedState!==null){if(u=Go(s),o!==null){if(i===null){if(!u)throw Error(r(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[At]=s}else Da(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;dt(s),i=!1}else o=$m(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=o),i=!0;if(!i)return s.flags&256?(ti(s),s):(ti(s),null);if((s.flags&128)!==0)throw Error(r(558))}return dt(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=Go(s),u!==null&&u.dehydrated!==null){if(i===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[At]=s}else Da(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;dt(s),f=!1}else f=$m(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(ti(s),s):(ti(s),null)}return ti(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,i=i!==null&&i.memoizedState!==null,o&&(u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048)),o!==i&&o&&(s.child.flags|=8192),Ad(s,s.updateQueue),dt(s),null);case 4:return vt(),i===null&&lg(s.stateNode.containerInfo),dt(s),null;case 10:return Ar(s.type),dt(s),null;case 19:if(W(kt),u=s.memoizedState,u===null)return dt(s),null;if(f=(s.flags&128)!==0,p=u.rendering,p===null)if(f)Fu(u,!1);else{if(St!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(p=cd(i),p!==null){for(s.flags|=128,Fu(u,!1),i=p.updateQueue,s.updateQueue=i,Ad(s,i),s.subtreeFlags=0,i=o,o=s.child;o!==null;)q0(o,i),o=o.sibling;return se(kt,kt.current&1|2),qe&&Tr(s,u.treeForkCount),s.child}i=i.sibling}u.tail!==null&&on()>Cd&&(s.flags|=128,f=!0,Fu(u,!1),s.lanes=4194304)}else{if(!f)if(i=cd(p),i!==null){if(s.flags|=128,f=!0,i=i.updateQueue,s.updateQueue=i,Ad(s,i),Fu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!qe)return dt(s),null}else 2*on()-u.renderingStartTime>Cd&&o!==536870912&&(s.flags|=128,f=!0,Fu(u,!1),s.lanes=4194304);u.isBackwards?(p.sibling=s.child,s.child=p):(i=u.last,i!==null?i.sibling=p:s.child=p,u.last=p)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=on(),i.sibling=null,o=kt.current,se(kt,f?o&1|2:o&1),qe&&Tr(s,u.treeForkCount),i):(dt(s),null);case 22:case 23:return ti(s),up(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(dt(s),s.subtreeFlags&6&&(s.flags|=8192)):dt(s),o=s.updateQueue,o!==null&&Ad(s,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),i!==null&&W(Oa),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Ar(jt),dt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function aR(i,s){switch(Ym(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Ar(jt),vt(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return lr(s),null;case 31:if(s.memoizedState!==null){if(ti(s),s.alternate===null)throw Error(r(340));Da()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(ti(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Da()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return W(kt),null;case 4:return vt(),null;case 10:return Ar(s.type),null;case 22:case 23:return ti(s),up(),i!==null&&W(Oa),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Ar(jt),null;case 25:return null;default:return null}}function g1(i,s){switch(Ym(s),s.tag){case 3:Ar(jt),vt();break;case 26:case 27:case 5:lr(s);break;case 4:vt();break;case 31:s.memoizedState!==null&&ti(s);break;case 13:ti(s);break;case 19:W(kt);break;case 10:Ar(s.type);break;case 22:case 23:ti(s),up(),i!==null&&W(Oa);break;case 24:Ar(jt)}}function qu(i,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&i)===i){u=void 0;var p=o.create,y=o.inst;u=p(),y.destroy=u}o=o.next}while(o!==f)}}catch(w){tt(s,s.return,w)}}function bs(i,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&i)===i){var y=u.inst,w=y.destroy;if(w!==void 0){y.destroy=void 0,f=s;var D=o,j=w;try{j()}catch(Y){tt(f,D,Y)}}}u=u.next}while(u!==p)}}catch(Y){tt(s,s.return,Y)}}function _1(i){var s=i.updateQueue;if(s!==null){var o=i.stateNode;try{ov(s,o)}catch(u){tt(i,i.return,u)}}}function y1(i,s,o){o.props=La(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(u){tt(i,s,u)}}function Gu(i,s){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof o=="function"?i.refCleanup=o(u):o.current=u}}catch(f){tt(i,s,f)}}function Qi(i,s){var o=i.ref,u=i.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){tt(i,s,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){tt(i,s,f)}else o.current=null}function v1(i){var s=i.type,o=i.memoizedProps,u=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){tt(i,i.return,f)}}function zp(i,s,o){try{var u=i.stateNode;CR(u,i.type,o,s),u[un]=s}catch(f){tt(i,i.return,f)}}function E1(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Os(i.type)||i.tag===4}function Fp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||E1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Os(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function qp(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(i),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Xt));else if(u!==4&&(u===27&&Os(i.type)&&(o=i.stateNode,s=null),i=i.child,i!==null))for(qp(i,s,o),i=i.sibling;i!==null;)qp(i,s,o),i=i.sibling}function Id(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?o.insertBefore(i,s):o.appendChild(i);else if(u!==4&&(u===27&&Os(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(Id(i,s,o),i=i.sibling;i!==null;)Id(i,s,o),i=i.sibling}function T1(i){var s=i.stateNode,o=i.memoizedProps;try{for(var u=i.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);fn(s,u,o),s[At]=i,s[un]=o}catch(p){tt(i,i.return,p)}}var Cr=!1,qt=!1,Gp=!1,w1=typeof WeakSet=="function"?WeakSet:Set,en=null;function oR(i,s){if(i=i.containerInfo,hg=Hd,i=P0(i),Lm(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else e:{o=(o=i.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var y=0,w=-1,D=-1,j=0,Y=0,J=i,F=null;t:for(;;){for(var q;J!==o||f!==0&&J.nodeType!==3||(w=y+f),J!==p||u!==0&&J.nodeType!==3||(D=y+u),J.nodeType===3&&(y+=J.nodeValue.length),(q=J.firstChild)!==null;)F=J,J=q;for(;;){if(J===i)break t;if(F===o&&++j===f&&(w=y),F===p&&++Y===u&&(D=y),(q=J.nextSibling)!==null)break;J=F,F=J.parentNode}J=q}o=w===-1||D===-1?null:{start:w,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(dg={focusedElem:i,selectionRange:o},Hd=!1,en=s;en!==null;)if(s=en,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,en=i;else for(;en!==null;){switch(s=en,p=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(o=0;o<i.length;o++)f=i[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&p!==null){i=void 0,o=s,f=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var de=La(o.type,f);i=u.getSnapshotBeforeUpdate(de,p),u.__reactInternalSnapshotBeforeUpdate=i}catch(we){tt(o,o.return,we)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,o=i.nodeType,o===9)pg(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":pg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,en=i;break}en=s.return}}function A1(i,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:xr(i,o),u&4&&qu(5,o);break;case 1:if(xr(i,o),u&4)if(i=o.stateNode,s===null)try{i.componentDidMount()}catch(y){tt(o,o.return,y)}else{var f=La(o.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(f,s,i.__reactInternalSnapshotBeforeUpdate)}catch(y){tt(o,o.return,y)}}u&64&&_1(o),u&512&&Gu(o,o.return);break;case 3:if(xr(i,o),u&64&&(i=o.updateQueue,i!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{ov(i,s)}catch(y){tt(o,o.return,y)}}break;case 27:s===null&&u&4&&T1(o);case 26:case 5:xr(i,o),s===null&&u&4&&v1(o),u&512&&Gu(o,o.return);break;case 12:xr(i,o);break;case 31:xr(i,o),u&4&&S1(i,o);break;case 13:xr(i,o),u&4&&R1(i,o),u&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=gR.bind(null,o),MR(i,o))));break;case 22:if(u=o.memoizedState!==null||Cr,!u){s=s!==null&&s.memoizedState!==null||qt,f=Cr;var p=qt;Cr=u,(qt=s)&&!p?Nr(i,o,(o.subtreeFlags&8772)!==0):xr(i,o),Cr=f,qt=p}break;case 30:break;default:xr(i,o)}}function I1(i){var s=i.alternate;s!==null&&(i.alternate=null,I1(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&pa(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var mt=null,jn=!1;function Dr(i,s,o){for(o=o.child;o!==null;)b1(i,s,o),o=o.sibling}function b1(i,s,o){if(vn&&typeof vn.onCommitFiberUnmount=="function")try{vn.onCommitFiberUnmount($r,o)}catch{}switch(o.tag){case 26:qt||Qi(o,s),Dr(i,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:qt||Qi(o,s);var u=mt,f=jn;Os(o.type)&&(mt=o.stateNode,jn=!1),Dr(i,s,o),Ju(o.stateNode),mt=u,jn=f;break;case 5:qt||Qi(o,s);case 6:if(u=mt,f=jn,mt=null,Dr(i,s,o),mt=u,jn=f,mt!==null)if(jn)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(o.stateNode)}catch(p){tt(o,s,p)}else try{mt.removeChild(o.stateNode)}catch(p){tt(o,s,p)}break;case 18:mt!==null&&(jn?(i=mt,_E(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),hl(i)):_E(mt,o.stateNode));break;case 4:u=mt,f=jn,mt=o.stateNode.containerInfo,jn=!0,Dr(i,s,o),mt=u,jn=f;break;case 0:case 11:case 14:case 15:bs(2,o,s),qt||bs(4,o,s),Dr(i,s,o);break;case 1:qt||(Qi(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&y1(o,s,u)),Dr(i,s,o);break;case 21:Dr(i,s,o);break;case 22:qt=(u=qt)||o.memoizedState!==null,Dr(i,s,o),qt=u;break;default:Dr(i,s,o)}}function S1(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{hl(i)}catch(o){tt(s,s.return,o)}}}function R1(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{hl(i)}catch(o){tt(s,s.return,o)}}function lR(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new w1),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new w1),s;default:throw Error(r(435,i.tag))}}function bd(i,s){var o=lR(i);s.forEach(function(u){if(!o.has(u)){o.add(u);var f=_R.bind(null,i,u);u.then(f,f)}})}function zn(i,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],p=i,y=s,w=y;e:for(;w!==null;){switch(w.tag){case 27:if(Os(w.type)){mt=w.stateNode,jn=!1;break e}break;case 5:mt=w.stateNode,jn=!1;break e;case 3:case 4:mt=w.stateNode.containerInfo,jn=!0;break e}w=w.return}if(mt===null)throw Error(r(160));b1(p,y,f),mt=null,jn=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)C1(s,i),s=s.sibling}var Ni=null;function C1(i,s){var o=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:zn(s,i),Fn(i),u&4&&(bs(3,i,i.return),qu(3,i),bs(5,i,i.return));break;case 1:zn(s,i),Fn(i),u&512&&(qt||o===null||Qi(o,o.return)),u&64&&Cr&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=Ni;if(zn(s,i),Fn(i),u&512&&(qt||o===null||Qi(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=i.memoizedState,o===null)if(u===null)if(i.stateNode===null){e:{u=i.type,o=i.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":p=f.getElementsByTagName("title")[0],(!p||p[dr]||p[At]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(u),f.head.insertBefore(p,f.querySelector("head > title"))),fn(p,u,o),p[At]=i,Ot(p),u=p;break e;case"link":var y=CE("link","href",f).get(u+(o.href||""));if(y){for(var w=0;w<y.length;w++)if(p=y[w],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){y.splice(w,1);break t}}p=f.createElement(u),fn(p,u,o),f.head.appendChild(p);break;case"meta":if(y=CE("meta","content",f).get(u+(o.content||""))){for(w=0;w<y.length;w++)if(p=y[w],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){y.splice(w,1);break t}}p=f.createElement(u),fn(p,u,o),f.head.appendChild(p);break;default:throw Error(r(468,u))}p[At]=i,Ot(p),u=p}i.stateNode=u}else DE(f,i.type,i.stateNode);else i.stateNode=RE(f,u,i.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?DE(f,i.type,i.stateNode):RE(f,u,i.memoizedProps)):u===null&&i.stateNode!==null&&zp(i,i.memoizedProps,o.memoizedProps)}break;case 27:zn(s,i),Fn(i),u&512&&(qt||o===null||Qi(o,o.return)),o!==null&&u&4&&zp(i,i.memoizedProps,o.memoizedProps);break;case 5:if(zn(s,i),Fn(i),u&512&&(qt||o===null||Qi(o,o.return)),i.flags&32){f=i.stateNode;try{di(f,"")}catch(de){tt(i,i.return,de)}}u&4&&i.stateNode!=null&&(f=i.memoizedProps,zp(i,f,o!==null?o.memoizedProps:f)),u&1024&&(Gp=!0);break;case 6:if(zn(s,i),Fn(i),u&4){if(i.stateNode===null)throw Error(r(162));u=i.memoizedProps,o=i.stateNode;try{o.nodeValue=u}catch(de){tt(i,i.return,de)}}break;case 3:if(zd=null,f=Ni,Ni=Bd(s.containerInfo),zn(s,i),Ni=f,Fn(i),u&4&&o!==null&&o.memoizedState.isDehydrated)try{hl(s.containerInfo)}catch(de){tt(i,i.return,de)}Gp&&(Gp=!1,D1(i));break;case 4:u=Ni,Ni=Bd(i.stateNode.containerInfo),zn(s,i),Fn(i),Ni=u;break;case 12:zn(s,i),Fn(i);break;case 31:zn(s,i),Fn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,bd(i,u)));break;case 13:zn(s,i),Fn(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Rd=on()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,bd(i,u)));break;case 22:f=i.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,j=Cr,Y=qt;if(Cr=j||f,qt=Y||D,zn(s,i),qt=Y,Cr=j,Fn(i),u&8192)e:for(s=i.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||D||Cr||qt||Ua(i)),o=null,s=i;;){if(s.tag===5||s.tag===26){if(o===null){D=o=s;try{if(p=D.stateNode,f)y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{w=D.stateNode;var J=D.memoizedProps.style,F=J!=null&&J.hasOwnProperty("display")?J.display:null;w.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(de){tt(D,D.return,de)}}}else if(s.tag===6){if(o===null){D=s;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(de){tt(D,D.return,de)}}}else if(s.tag===18){if(o===null){D=s;try{var q=D.stateNode;f?yE(q,!0):yE(D.stateNode,!1)}catch(de){tt(D,D.return,de)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,bd(i,o))));break;case 19:zn(s,i),Fn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,bd(i,u)));break;case 30:break;case 21:break;default:zn(s,i),Fn(i)}}function Fn(i){var s=i.flags;if(s&2){try{for(var o,u=i.return;u!==null;){if(E1(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,p=Fp(i);Id(i,p,f);break;case 5:var y=o.stateNode;o.flags&32&&(di(y,""),o.flags&=-33);var w=Fp(i);Id(i,w,y);break;case 3:case 4:var D=o.stateNode.containerInfo,j=Fp(i);qp(i,j,D);break;default:throw Error(r(161))}}catch(Y){tt(i,i.return,Y)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function D1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;D1(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function xr(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)A1(i,s.alternate,s),s=s.sibling}function Ua(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:bs(4,s,s.return),Ua(s);break;case 1:Qi(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&y1(s,s.return,o),Ua(s);break;case 27:Ju(s.stateNode);case 26:case 5:Qi(s,s.return),Ua(s);break;case 22:s.memoizedState===null&&Ua(s);break;case 30:Ua(s);break;default:Ua(s)}i=i.sibling}}function Nr(i,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=i,p=s,y=p.flags;switch(p.tag){case 0:case 11:case 15:Nr(f,p,o),qu(4,p);break;case 1:if(Nr(f,p,o),u=p,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(j){tt(u,u.return,j)}if(u=p,f=u.updateQueue,f!==null){var w=u.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)av(D[f],w)}catch(j){tt(u,u.return,j)}}o&&y&64&&_1(p),Gu(p,p.return);break;case 27:T1(p);case 26:case 5:Nr(f,p,o),o&&u===null&&y&4&&v1(p),Gu(p,p.return);break;case 12:Nr(f,p,o);break;case 31:Nr(f,p,o),o&&y&4&&S1(f,p);break;case 13:Nr(f,p,o),o&&y&4&&R1(f,p);break;case 22:p.memoizedState===null&&Nr(f,p,o),Gu(p,p.return);break;case 30:break;default:Nr(f,p,o)}s=s.sibling}}function Hp(i,s){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&xu(o))}function Kp(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&xu(i))}function Oi(i,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)x1(i,s,o,u),s=s.sibling}function x1(i,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Oi(i,s,o,u),f&2048&&qu(9,s);break;case 1:Oi(i,s,o,u);break;case 3:Oi(i,s,o,u),f&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&xu(i)));break;case 12:if(f&2048){Oi(i,s,o,u),i=s.stateNode;try{var p=s.memoizedProps,y=p.id,w=p.onPostCommit;typeof w=="function"&&w(y,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(D){tt(s,s.return,D)}}else Oi(i,s,o,u);break;case 31:Oi(i,s,o,u);break;case 13:Oi(i,s,o,u);break;case 23:break;case 22:p=s.stateNode,y=s.alternate,s.memoizedState!==null?p._visibility&2?Oi(i,s,o,u):Hu(i,s):p._visibility&2?Oi(i,s,o,u):(p._visibility|=2,el(i,s,o,u,(s.subtreeFlags&10256)!==0||!1)),f&2048&&Hp(y,s);break;case 24:Oi(i,s,o,u),f&2048&&Kp(s.alternate,s);break;default:Oi(i,s,o,u)}}function el(i,s,o,u,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var p=i,y=s,w=o,D=u,j=y.flags;switch(y.tag){case 0:case 11:case 15:el(p,y,w,D,f),qu(8,y);break;case 23:break;case 22:var Y=y.stateNode;y.memoizedState!==null?Y._visibility&2?el(p,y,w,D,f):Hu(p,y):(Y._visibility|=2,el(p,y,w,D,f)),f&&j&2048&&Hp(y.alternate,y);break;case 24:el(p,y,w,D,f),f&&j&2048&&Kp(y.alternate,y);break;default:el(p,y,w,D,f)}s=s.sibling}}function Hu(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=i,u=s,f=u.flags;switch(u.tag){case 22:Hu(o,u),f&2048&&Hp(u.alternate,u);break;case 24:Hu(o,u),f&2048&&Kp(u.alternate,u);break;default:Hu(o,u)}s=s.sibling}}var Ku=8192;function tl(i,s,o){if(i.subtreeFlags&Ku)for(i=i.child;i!==null;)N1(i,s,o),i=i.sibling}function N1(i,s,o){switch(i.tag){case 26:tl(i,s,o),i.flags&Ku&&i.memoizedState!==null&&YR(o,Ni,i.memoizedState,i.memoizedProps);break;case 5:tl(i,s,o);break;case 3:case 4:var u=Ni;Ni=Bd(i.stateNode.containerInfo),tl(i,s,o),Ni=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=Ku,Ku=16777216,tl(i,s,o),Ku=u):tl(i,s,o));break;default:tl(i,s,o)}}function O1(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Qu(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];en=u,P1(u,i)}O1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)k1(i),i=i.sibling}function k1(i){switch(i.tag){case 0:case 11:case 15:Qu(i),i.flags&2048&&bs(9,i,i.return);break;case 3:Qu(i);break;case 12:Qu(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,Sd(i)):Qu(i);break;default:Qu(i)}}function Sd(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];en=u,P1(u,i)}O1(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:bs(8,s,s.return),Sd(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Sd(s));break;default:Sd(s)}i=i.sibling}}function P1(i,s){for(;en!==null;){var o=en;switch(o.tag){case 0:case 11:case 15:bs(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:xu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,en=u;else e:for(o=i;en!==null;){u=en;var f=u.sibling,p=u.return;if(I1(u),u===o){en=null;break e}if(f!==null){f.return=p,en=f;break e}en=p}}}var uR={getCacheForType:function(i){var s=hn(jt),o=s.data.get(i);return o===void 0&&(o=i(),s.data.set(i,o)),o},cacheSignal:function(){return hn(jt).controller.signal}},cR=typeof WeakMap=="function"?WeakMap:Map,Xe=0,lt=null,Pe=null,Ue=0,et=0,ni=null,Ss=!1,nl=!1,Qp=!1,Or=0,St=0,Rs=0,Ba=0,Yp=0,ii=0,il=0,Yu=null,qn=null,Wp=!1,Rd=0,V1=0,Cd=1/0,Dd=null,Cs=null,Qt=0,Ds=null,rl=null,kr=0,$p=0,Xp=null,M1=null,Wu=0,Zp=null;function ri(){return(Xe&2)!==0&&Ue!==0?Ue&-Ue:K.T!==null?rg():hr()}function L1(){if(ii===0)if((Ue&536870912)===0||qe){var i=Li;Li<<=1,(Li&3932160)===0&&(Li=262144),ii=i}else ii=536870912;return i=ei.current,i!==null&&(i.flags|=32),ii}function Gn(i,s,o){(i===lt&&(et===2||et===9)||i.cancelPendingCommit!==null)&&(sl(i,0),xs(i,Ue,ii,!1)),Jr(i,o),((Xe&2)===0||i!==lt)&&(i===lt&&((Xe&2)===0&&(Ba|=o),St===4&&xs(i,Ue,ii,!1)),Yi(i))}function U1(i,s,o){if((Xe&6)!==0)throw Error(r(327));var u=!o&&(s&127)===0&&(s&i.expiredLanes)===0||Zr(i,s),f=u?fR(i,s):eg(i,s,!0),p=u;do{if(f===0){nl&&!u&&xs(i,s,0,!1);break}else{if(o=i.current.alternate,p&&!hR(o)){f=eg(i,s,!1),p=!1;continue}if(f===2){if(p=s,i.errorRecoveryDisabledLanes&p)var y=0;else y=i.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){s=y;e:{var w=i;f=Yu;var D=w.current.memoizedState.isDehydrated;if(D&&(sl(w,y).flags|=256),y=eg(w,y,!1),y!==2){if(Qp&&!D){w.errorRecoveryDisabledLanes|=p,Ba|=p,f=4;break e}p=qn,qn=f,p!==null&&(qn===null?qn=p:qn.push.apply(qn,p))}f=y}if(p=!1,f!==2)continue}}if(f===1){sl(i,0),xs(i,s,0,!0);break}e:{switch(u=i,p=f,p){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:xs(u,s,ii,!Ss);break e;case 2:qn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=Rd+300-on(),10<f)){if(xs(u,s,ii,!Ss),ci(u,0,!0)!==0)break e;kr=s,u.timeoutHandle=pE(B1.bind(null,u,o,qn,Dd,Wp,s,ii,Ba,il,Ss,p,"Throttled",-0,0),f);break e}B1(u,o,qn,Dd,Wp,s,ii,Ba,il,Ss,p,null,-0,0)}}break}while(!0);Yi(i)}function B1(i,s,o,u,f,p,y,w,D,j,Y,J,F,q){if(i.timeoutHandle=-1,J=s.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xt},N1(s,p,J);var de=(p&62914560)===p?Rd-on():(p&4194048)===p?V1-on():0;if(de=WR(J,de),de!==null){kr=p,i.cancelPendingCommit=de(Q1.bind(null,i,s,p,o,u,f,y,w,D,Y,J,null,F,q)),xs(i,p,y,!j);return}}Q1(i,s,p,o,u,f,y,w,D)}function hR(i){for(var s=i;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],p=f.getSnapshot;f=f.value;try{if(!Zn(p(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function xs(i,s,o,u){s&=~Yp,s&=~Ba,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var f=s;0<f;){var p=31-In(f),y=1<<p;u[p]=-1,f&=~y}o!==0&&uu(i,o,s)}function xd(){return(Xe&6)===0?($u(0),!1):!0}function Jp(){if(Pe!==null){if(et===0)var i=Pe.return;else i=Pe,wr=xa=null,pp(i),Wo=null,Ou=0,i=Pe;for(;i!==null;)g1(i.alternate,i),i=i.return;Pe=null}}function sl(i,s){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,NR(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),kr=0,Jp(),lt=i,Pe=o=Er(i.current,null),Ue=s,et=0,ni=null,Ss=!1,nl=Zr(i,s),Qp=!1,il=ii=Yp=Ba=Rs=St=0,qn=Yu=null,Wp=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var f=31-In(u),p=1<<f;s|=i[f],u&=~p}return Or=s,Xh(),o}function j1(i,s){Ce=null,K.H=ju,s===Yo||s===sd?(s=nv(),et=3):s===ip?(s=nv(),et=4):et=s===Np?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,ni=s,Pe===null&&(St=1,vd(i,mi(s,i.current)))}function z1(){var i=ei.current;return i===null?!0:(Ue&4194048)===Ue?yi===null:(Ue&62914560)===Ue||(Ue&536870912)!==0?i===yi:!1}function F1(){var i=K.H;return K.H=ju,i===null?ju:i}function q1(){var i=K.A;return K.A=uR,i}function Nd(){St=4,Ss||(Ue&4194048)!==Ue&&ei.current!==null||(nl=!0),(Rs&134217727)===0&&(Ba&134217727)===0||lt===null||xs(lt,Ue,ii,!1)}function eg(i,s,o){var u=Xe;Xe|=2;var f=F1(),p=q1();(lt!==i||Ue!==s)&&(Dd=null,sl(i,s)),s=!1;var y=St;e:do try{if(et!==0&&Pe!==null){var w=Pe,D=ni;switch(et){case 8:Jp(),y=6;break e;case 3:case 2:case 9:case 6:ei.current===null&&(s=!0);var j=et;if(et=0,ni=null,al(i,w,D,j),o&&nl){y=0;break e}break;default:j=et,et=0,ni=null,al(i,w,D,j)}}dR(),y=St;break}catch(Y){j1(i,Y)}while(!0);return s&&i.shellSuspendCounter++,wr=xa=null,Xe=u,K.H=f,K.A=p,Pe===null&&(lt=null,Ue=0,Xh()),y}function dR(){for(;Pe!==null;)G1(Pe)}function fR(i,s){var o=Xe;Xe|=2;var u=F1(),f=q1();lt!==i||Ue!==s?(Dd=null,Cd=on()+500,sl(i,s)):nl=Zr(i,s);e:do try{if(et!==0&&Pe!==null){s=Pe;var p=ni;t:switch(et){case 1:et=0,ni=null,al(i,s,p,1);break;case 2:case 9:if(ev(p)){et=0,ni=null,H1(s);break}s=function(){et!==2&&et!==9||lt!==i||(et=7),Yi(i)},p.then(s,s);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:ev(p)?(et=0,ni=null,H1(s)):(et=0,ni=null,al(i,s,p,7));break;case 5:var y=null;switch(Pe.tag){case 26:y=Pe.memoizedState;case 5:case 27:var w=Pe;if(y?xE(y):w.stateNode.complete){et=0,ni=null;var D=w.sibling;if(D!==null)Pe=D;else{var j=w.return;j!==null?(Pe=j,Od(j)):Pe=null}break t}}et=0,ni=null,al(i,s,p,5);break;case 6:et=0,ni=null,al(i,s,p,6);break;case 8:Jp(),St=6;break e;default:throw Error(r(462))}}mR();break}catch(Y){j1(i,Y)}while(!0);return wr=xa=null,K.H=u,K.A=f,Xe=o,Pe!==null?0:(lt=null,Ue=0,Xh(),St)}function mR(){for(;Pe!==null&&!Sm();)G1(Pe)}function G1(i){var s=m1(i.alternate,i,Or);i.memoizedProps=i.pendingProps,s===null?Od(i):Pe=s}function H1(i){var s=i,o=s.alternate;switch(s.tag){case 15:case 0:s=l1(o,s,s.pendingProps,s.type,void 0,Ue);break;case 11:s=l1(o,s,s.pendingProps,s.type.render,s.ref,Ue);break;case 5:pp(s);default:g1(o,s),s=Pe=q0(s,Or),s=m1(o,s,Or)}i.memoizedProps=i.pendingProps,s===null?Od(i):Pe=s}function al(i,s,o,u){wr=xa=null,pp(s),Wo=null,Ou=0;var f=s.return;try{if(nR(i,f,s,o,Ue)){St=1,vd(i,mi(o,i.current)),Pe=null;return}}catch(p){if(f!==null)throw Pe=f,p;St=1,vd(i,mi(o,i.current)),Pe=null;return}s.flags&32768?(qe||u===1?i=!0:nl||(Ue&536870912)!==0?i=!1:(Ss=i=!0,(u===2||u===9||u===3||u===6)&&(u=ei.current,u!==null&&u.tag===13&&(u.flags|=16384))),K1(s,i)):Od(s)}function Od(i){var s=i;do{if((s.flags&32768)!==0){K1(s,Ss);return}i=s.return;var o=sR(s.alternate,s,Or);if(o!==null){Pe=o;return}if(s=s.sibling,s!==null){Pe=s;return}Pe=s=i}while(s!==null);St===0&&(St=5)}function K1(i,s){do{var o=aR(i.alternate,i);if(o!==null){o.flags&=32767,Pe=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(i=i.sibling,i!==null)){Pe=i;return}Pe=i=o}while(i!==null);St=6,Pe=null}function Q1(i,s,o,u,f,p,y,w,D){i.cancelPendingCommit=null;do kd();while(Qt!==0);if((Xe&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(p=s.lanes|s.childLanes,p|=Fm,ln(i,o,p,y,w,D),i===lt&&(Pe=lt=null,Ue=0),rl=s,Ds=i,kr=o,$p=p,Xp=f,M1=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,yR(ur,function(){return Z1(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=K.T,K.T=null,f=oe.p,oe.p=2,y=Xe,Xe|=4;try{oR(i,s,o)}finally{Xe=y,oe.p=f,K.T=u}}Qt=1,Y1(),W1(),$1()}}function Y1(){if(Qt===1){Qt=0;var i=Ds,s=rl,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=K.T,K.T=null;var u=oe.p;oe.p=2;var f=Xe;Xe|=4;try{C1(s,i);var p=dg,y=P0(i.containerInfo),w=p.focusedElem,D=p.selectionRange;if(y!==w&&w&&w.ownerDocument&&k0(w.ownerDocument.documentElement,w)){if(D!==null&&Lm(w)){var j=D.start,Y=D.end;if(Y===void 0&&(Y=j),"selectionStart"in w)w.selectionStart=j,w.selectionEnd=Math.min(Y,w.value.length);else{var J=w.ownerDocument||document,F=J&&J.defaultView||window;if(F.getSelection){var q=F.getSelection(),de=w.textContent.length,we=Math.min(D.start,de),at=D.end===void 0?we:Math.min(D.end,de);!q.extend&&we>at&&(y=at,at=we,we=y);var M=O0(w,we),O=O0(w,at);if(M&&O&&(q.rangeCount!==1||q.anchorNode!==M.node||q.anchorOffset!==M.offset||q.focusNode!==O.node||q.focusOffset!==O.offset)){var B=J.createRange();B.setStart(M.node,M.offset),q.removeAllRanges(),we>at?(q.addRange(B),q.extend(O.node,O.offset)):(B.setEnd(O.node,O.offset),q.addRange(B))}}}}for(J=[],q=w;q=q.parentNode;)q.nodeType===1&&J.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<J.length;w++){var $=J[w];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}Hd=!!hg,dg=hg=null}finally{Xe=f,oe.p=u,K.T=o}}i.current=s,Qt=2}}function W1(){if(Qt===2){Qt=0;var i=Ds,s=rl,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=K.T,K.T=null;var u=oe.p;oe.p=2;var f=Xe;Xe|=4;try{A1(i,s.alternate,s)}finally{Xe=f,oe.p=u,K.T=o}}Qt=3}}function $1(){if(Qt===4||Qt===3){Qt=0,su();var i=Ds,s=rl,o=kr,u=M1;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Qt=5:(Qt=0,rl=Ds=null,X1(i,i.pendingLanes));var f=i.pendingLanes;if(f===0&&(Cs=null),hu(o),s=s.stateNode,vn&&typeof vn.onCommitFiberRoot=="function")try{vn.onCommitFiberRoot($r,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=K.T,f=oe.p,oe.p=2,K.T=null;try{for(var p=i.onRecoverableError,y=0;y<u.length;y++){var w=u[y];p(w.value,{componentStack:w.stack})}}finally{K.T=s,oe.p=f}}(kr&3)!==0&&kd(),Yi(i),f=i.pendingLanes,(o&261930)!==0&&(f&42)!==0?i===Zp?Wu++:(Wu=0,Zp=i):Wu=0,$u(0)}}function X1(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,xu(s)))}function kd(){return Y1(),W1(),$1(),Z1()}function Z1(){if(Qt!==5)return!1;var i=Ds,s=$p;$p=0;var o=hu(kr),u=K.T,f=oe.p;try{oe.p=32>o?32:o,K.T=null,o=Xp,Xp=null;var p=Ds,y=kr;if(Qt=0,rl=Ds=null,kr=0,(Xe&6)!==0)throw Error(r(331));var w=Xe;if(Xe|=4,k1(p.current),x1(p,p.current,y,o),Xe=w,$u(0,!1),vn&&typeof vn.onPostCommitFiberRoot=="function")try{vn.onPostCommitFiberRoot($r,p)}catch{}return!0}finally{oe.p=f,K.T=u,X1(i,s)}}function J1(i,s,o){s=mi(o,s),s=xp(i.stateNode,s,2),i=ws(i,s,2),i!==null&&(Jr(i,2),Yi(i))}function tt(i,s,o){if(i.tag===3)J1(i,i,o);else for(;s!==null;){if(s.tag===3){J1(s,i,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Cs===null||!Cs.has(u))){i=mi(o,i),o=e1(2),u=ws(s,o,2),u!==null&&(t1(o,u,s,i),Jr(u,2),Yi(u));break}}s=s.return}}function tg(i,s,o){var u=i.pingCache;if(u===null){u=i.pingCache=new cR;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(Qp=!0,f.add(o),i=pR.bind(null,i,s,o),s.then(i,i))}function pR(i,s,o){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,lt===i&&(Ue&o)===o&&(St===4||St===3&&(Ue&62914560)===Ue&&300>on()-Rd?(Xe&2)===0&&sl(i,0):Yp|=o,il===Ue&&(il=0)),Yi(i)}function eE(i,s){s===0&&(s=lu()),i=Ra(i,s),i!==null&&(Jr(i,s),Yi(i))}function gR(i){var s=i.memoizedState,o=0;s!==null&&(o=s.retryLane),eE(i,o)}function _R(i,s){var o=0;switch(i.tag){case 31:case 13:var u=i.stateNode,f=i.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),eE(i,o)}function yR(i,s){return da(i,s)}var Pd=null,ol=null,ng=!1,Vd=!1,ig=!1,Ns=0;function Yi(i){i!==ol&&i.next===null&&(ol===null?Pd=ol=i:ol=ol.next=i),Vd=!0,ng||(ng=!0,ER())}function $u(i,s){if(!ig&&Vd){ig=!0;do for(var o=!1,u=Pd;u!==null;){if(i!==0){var f=u.pendingLanes;if(f===0)var p=0;else{var y=u.suspendedLanes,w=u.pingedLanes;p=(1<<31-In(42|i)+1)-1,p&=f&~(y&~w),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,rE(u,p))}else p=Ue,p=ci(u,u===lt?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Zr(u,p)||(o=!0,rE(u,p));u=u.next}while(o);ig=!1}}function vR(){tE()}function tE(){Vd=ng=!1;var i=0;Ns!==0&&xR()&&(i=Ns);for(var s=on(),o=null,u=Pd;u!==null;){var f=u.next,p=nE(u,s);p===0?(u.next=null,o===null?Pd=f:o.next=f,f===null&&(ol=o)):(o=u,(i!==0||(p&3)!==0)&&(Vd=!0)),u=f}Qt!==0&&Qt!==5||$u(i),Ns!==0&&(Ns=0)}function nE(i,s){for(var o=i.suspendedLanes,u=i.pingedLanes,f=i.expirationTimes,p=i.pendingLanes&-62914561;0<p;){var y=31-In(p),w=1<<y,D=f[y];D===-1?((w&o)===0||(w&u)!==0)&&(f[y]=Ro(w,s)):D<=s&&(i.expiredLanes|=w),p&=~w}if(s=lt,o=Ue,o=ci(i,i===s?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,o===0||i===s&&(et===2||et===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&So(u),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||Zr(i,o)){if(s=o&-o,s===i.callbackPriority)return s;switch(u!==null&&So(u),hu(o)){case 2:case 8:o=$t;break;case 32:o=ur;break;case 268435456:o=au;break;default:o=ur}return u=iE.bind(null,i),o=da(o,u),i.callbackPriority=s,i.callbackNode=o,s}return u!==null&&u!==null&&So(u),i.callbackPriority=2,i.callbackNode=null,2}function iE(i,s){if(Qt!==0&&Qt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(kd()&&i.callbackNode!==o)return null;var u=Ue;return u=ci(i,i===lt?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(U1(i,u,s),nE(i,on()),i.callbackNode!=null&&i.callbackNode===o?iE.bind(null,i):null)}function rE(i,s){if(kd())return null;U1(i,s,!0)}function ER(){OR(function(){(Xe&6)!==0?da(Kt,vR):tE()})}function rg(){if(Ns===0){var i=Ko;i===0&&(i=ma,ma<<=1,(ma&261888)===0&&(ma=256)),Ns=i}return Ns}function sE(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Fi(""+i)}function aE(i,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,i.id&&o.setAttribute("form",i.id),s.parentNode.insertBefore(o,s),i=new FormData(i),o.parentNode.removeChild(o),i}function TR(i,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var p=sE((f[un]||null).action),y=u.submitter;y&&(s=(s=y[un]||null)?sE(s.formAction):y.getAttribute("formAction"),s!==null&&(p=s,y=null));var w=new Ea("action","action",null,u,f);i.push({event:w,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ns!==0){var D=y?aE(f,y):new FormData(f);Ip(o,{pending:!0,data:D,method:f.method,action:p},null,D)}}else typeof p=="function"&&(w.preventDefault(),D=y?aE(f,y):new FormData(f),Ip(o,{pending:!0,data:D,method:f.method,action:p},p,D))},currentTarget:f}]})}}for(var sg=0;sg<zm.length;sg++){var ag=zm[sg],wR=ag.toLowerCase(),AR=ag[0].toUpperCase()+ag.slice(1);xi(wR,"on"+AR)}xi(L0,"onAnimationEnd"),xi(U0,"onAnimationIteration"),xi(B0,"onAnimationStart"),xi("dblclick","onDoubleClick"),xi("focusin","onFocus"),xi("focusout","onBlur"),xi(BS,"onTransitionRun"),xi(jS,"onTransitionStart"),xi(zS,"onTransitionCancel"),xi(j0,"onTransitionEnd"),zi("onMouseEnter",["mouseout","mouseover"]),zi("onMouseLeave",["mouseout","mouseover"]),zi("onPointerEnter",["pointerout","pointerover"]),zi("onPointerLeave",["pointerout","pointerover"]),bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bn("onBeforeInput",["compositionend","keypress","textInput","paste"]),bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xu));function oE(i,s){s=(s&4)!==0;for(var o=0;o<i.length;o++){var u=i[o],f=u.event;u=u.listeners;e:{var p=void 0;if(s)for(var y=u.length-1;0<=y;y--){var w=u[y],D=w.instance,j=w.currentTarget;if(w=w.listener,D!==p&&f.isPropagationStopped())break e;p=w,f.currentTarget=j;try{p(f)}catch(Y){$h(Y)}f.currentTarget=null,p=D}else for(y=0;y<u.length;y++){if(w=u[y],D=w.instance,j=w.currentTarget,w=w.listener,D!==p&&f.isPropagationStopped())break e;p=w,f.currentTarget=j;try{p(f)}catch(Y){$h(Y)}f.currentTarget=null,p=D}}}}function Ve(i,s){var o=s[ns];o===void 0&&(o=s[ns]=new Set);var u=i+"__bubble";o.has(u)||(lE(s,i,2,!1),o.add(u))}function og(i,s,o){var u=0;s&&(u|=4),lE(o,i,u,s)}var Md="_reactListening"+Math.random().toString(36).slice(2);function lg(i){if(!i[Md]){i[Md]=!0,Co.forEach(function(o){o!=="selectionchange"&&(IR.has(o)||og(o,!1,i),og(o,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Md]||(s[Md]=!0,og("selectionchange",!1,s))}}function lE(i,s,o,u){switch(LE(s)){case 2:var f=ZR;break;case 8:f=JR;break;default:f=Ag}o=f.bind(null,s,o,i),f=void 0,!vu||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?i.addEventListener(s,o,{capture:!0,passive:f}):i.addEventListener(s,o,!0):f!==void 0?i.addEventListener(s,o,{passive:f}):i.addEventListener(s,o,!1)}function ug(i,s,o,u,f){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var y=u.tag;if(y===3||y===4){var w=u.stateNode.containerInfo;if(w===f)break;if(y===4)for(y=u.return;y!==null;){var D=y.tag;if((D===3||D===4)&&y.stateNode.containerInfo===f)return;y=y.return}for(;w!==null;){if(y=fr(w),y===null)return;if(D=y.tag,D===5||D===6||D===26||D===27){u=p=y;continue e}w=w.parentNode}}u=u.return}Ph(function(){var j=p,Y=ko(o),J=[];e:{var F=z0.get(i);if(F!==void 0){var q=Ea,de=i;switch(i){case"keypress":if(va(o)===0)break e;case"keydown":case"keyup":q=qh;break;case"focusin":de="focus",q=ds;break;case"focusout":de="blur",q=ds;break;case"beforeblur":case"afterblur":q=ds;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=Mh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=Lh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=Hh;break;case L0:case U0:case B0:q=Mo;break;case j0:q=Lo;break;case"scroll":case"scrollend":q=Vh;break;case"wheel":q=Qh;break;case"copy":case"cut":case"paste":q=Bh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=Iu;break;case"toggle":case"beforetoggle":q=ms}var we=(s&4)!==0,at=!we&&(i==="scroll"||i==="scrollend"),M=we?F!==null?F+"Capture":null:F;we=[];for(var O=j,B;O!==null;){var $=O;if(B=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||B===null||M===null||($=Un(O,M),$!=null&&we.push(Zu(O,$,B))),at)break;O=O.return}0<we.length&&(F=new q(F,de,null,o,Y),J.push({event:F,listeners:we}))}}if((s&7)===0){e:{if(F=i==="mouseover"||i==="pointerover",q=i==="mouseout"||i==="pointerout",F&&o!==Oo&&(de=o.relatedTarget||o.fromElement)&&(fr(de)||de[Bi]))break e;if((q||F)&&(F=Y.window===Y?Y:(F=Y.ownerDocument)?F.defaultView||F.parentWindow:window,q?(de=o.relatedTarget||o.toElement,q=j,de=de?fr(de):null,de!==null&&(at=l(de),we=de.tag,de!==at||we!==5&&we!==27&&we!==6)&&(de=null)):(q=null,de=j),q!==de)){if(we=Mh,$="onMouseLeave",M="onMouseEnter",O="mouse",(i==="pointerout"||i==="pointerover")&&(we=Iu,$="onPointerLeave",M="onPointerEnter",O="pointer"),at=q==null?F:ga(q),B=de==null?F:ga(de),F=new we($,O+"leave",q,o,Y),F.target=at,F.relatedTarget=B,$=null,fr(Y)===j&&(we=new we(M,O+"enter",de,o,Y),we.target=B,we.relatedTarget=at,$=we),at=$,q&&de)t:{for(we=bR,M=q,O=de,B=0,$=M;$;$=we($))B++;$=0;for(var Ee=O;Ee;Ee=we(Ee))$++;for(;0<B-$;)M=we(M),B--;for(;0<$-B;)O=we(O),$--;for(;B--;){if(M===O||O!==null&&M===O.alternate){we=M;break t}M=we(M),O=we(O)}we=null}else we=null;q!==null&&uE(J,F,q,we,!1),de!==null&&at!==null&&uE(J,at,de,we,!0)}}e:{if(F=j?ga(j):window,q=F.nodeName&&F.nodeName.toLowerCase(),q==="select"||q==="input"&&F.type==="file")var Ye=S0;else if(Bn(F))if(R0)Ye=MS;else{Ye=PS;var ge=kS}else q=F.nodeName,!q||q.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?j&&_u(j.elementType)&&(Ye=S0):Ye=VS;if(Ye&&(Ye=Ye(i,j))){Ia(J,Ye,o,Y);break e}ge&&ge(i,F,j),i==="focusout"&&j&&F.type==="number"&&j.memoizedProps.value!=null&&No(F,"number",F.value)}switch(ge=j?ga(j):window,i){case"focusin":(Bn(ge)||ge.contentEditable==="true")&&(Uo=ge,Um=j,Ru=null);break;case"focusout":Ru=Um=Uo=null;break;case"mousedown":Bm=!0;break;case"contextmenu":case"mouseup":case"dragend":Bm=!1,V0(J,o,Y);break;case"selectionchange":if(US)break;case"keydown":case"keyup":V0(J,o,Y)}var xe;if(_)e:{switch(i){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else ke?Je(i,o)&&(Be="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(Be="onCompositionStart");Be&&(U&&o.locale!=="ko"&&(ke||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&ke&&(xe=ls()):(Xn=Y,Po="value"in Xn?Xn.value:Xn.textContent,ke=!0)),ge=Ld(j,Be),0<ge.length&&(Be=new Tu(Be,i,null,o,Y),J.push({event:Be,listeners:ge}),xe?Be.data=xe:(xe=Bt(o),xe!==null&&(Be.data=xe)))),(xe=A?Zt(i,o):Jt(i,o))&&(Be=Ld(j,"onBeforeInput"),0<Be.length&&(ge=new Tu("onBeforeInput","beforeinput",null,o,Y),J.push({event:ge,listeners:Be}),ge.data=xe)),TR(J,i,j,o,Y)}oE(J,s)})}function Zu(i,s,o){return{instance:i,listener:s,currentTarget:o}}function Ld(i,s){for(var o=s+"Capture",u=[];i!==null;){var f=i,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Un(i,o),f!=null&&u.unshift(Zu(i,f,p)),f=Un(i,s),f!=null&&u.push(Zu(i,f,p))),i.tag===3)return u;i=i.return}return[]}function bR(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function uE(i,s,o,u,f){for(var p=s._reactName,y=[];o!==null&&o!==u;){var w=o,D=w.alternate,j=w.stateNode;if(w=w.tag,D!==null&&D===u)break;w!==5&&w!==26&&w!==27||j===null||(D=j,f?(j=Un(o,p),j!=null&&y.unshift(Zu(o,j,D))):f||(j=Un(o,p),j!=null&&y.push(Zu(o,j,D)))),o=o.return}y.length!==0&&i.push({event:s,listeners:y})}var SR=/\r\n?/g,RR=/\u0000|\uFFFD/g;function cE(i){return(typeof i=="string"?i:""+i).replace(SR,`
`).replace(RR,"")}function hE(i,s){return s=cE(s),cE(i)===s}function st(i,s,o,u,f,p){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||di(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&di(i,""+u);break;case"className":ss(i,"class",u);break;case"tabIndex":ss(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ss(i,o,u);break;case"style":Oh(i,u,p);break;case"data":if(s!=="object"){ss(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){i.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Fi(""+u),i.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&st(i,s,"name",f.name,f,null),st(i,s,"formEncType",f.formEncType,f,null),st(i,s,"formMethod",f.formMethod,f,null),st(i,s,"formTarget",f.formTarget,f,null)):(st(i,s,"encType",f.encType,f,null),st(i,s,"method",f.method,f,null),st(i,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Fi(""+u),i.setAttribute(o,u);break;case"onClick":u!=null&&(i.onclick=Xt);break;case"onScroll":u!=null&&Ve("scroll",i);break;case"onScrollEnd":u!=null&&Ve("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}o=Fi(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""+u):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":u===!0?i.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,u):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(o,u):i.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(o):i.setAttribute(o,u);break;case"popover":Ve("beforetoggle",i),Ve("toggle",i),rs(i,"popover",u);break;case"xlinkActuate":hi(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":hi(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":hi(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":hi(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":hi(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":hi(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":hi(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":hi(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":hi(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":rs(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Om.get(o)||o,rs(i,o,u))}}function cg(i,s,o,u,f,p){switch(o){case"style":Oh(i,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"children":typeof u=="string"?di(i,u):(typeof u=="number"||typeof u=="bigint")&&di(i,""+u);break;case"onScroll":u!=null&&Ve("scroll",i);break;case"onScrollEnd":u!=null&&Ve("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Xt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!is.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),p=i[un]||null,p=p!=null?p[o]:null,typeof p=="function"&&i.removeEventListener(s,p,f),typeof u=="function")){typeof p!="function"&&p!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(s,u,f);break e}o in i?i[o]=u:u===!0?i.setAttribute(o,""):rs(i,o,u)}}}function fn(i,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",i),Ve("load",i);var u=!1,f=!1,p;for(p in o)if(o.hasOwnProperty(p)){var y=o[p];if(y!=null)switch(p){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:st(i,s,p,y,o,null)}}f&&st(i,s,"srcSet",o.srcSet,o,null),u&&st(i,s,"src",o.src,o,null);return;case"input":Ve("invalid",i);var w=p=y=f=null,D=null,j=null;for(u in o)if(o.hasOwnProperty(u)){var Y=o[u];if(Y!=null)switch(u){case"name":f=Y;break;case"type":y=Y;break;case"checked":D=Y;break;case"defaultChecked":j=Y;break;case"value":p=Y;break;case"defaultValue":w=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,s));break;default:st(i,s,u,Y,o,null)}}_a(i,p,w,D,j,y,f,!1);return;case"select":Ve("invalid",i),u=y=p=null;for(f in o)if(o.hasOwnProperty(f)&&(w=o[f],w!=null))switch(f){case"value":p=w;break;case"defaultValue":y=w;break;case"multiple":u=w;default:st(i,s,f,w,o,null)}s=p,o=y,i.multiple=!!u,s!=null?Qe(i,!!u,s,!1):o!=null&&Qe(i,!!u,o,!0);return;case"textarea":Ve("invalid",i),p=f=u=null;for(y in o)if(o.hasOwnProperty(y)&&(w=o[y],w!=null))switch(y){case"value":u=w;break;case"defaultValue":f=w;break;case"children":p=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:st(i,s,y,w,o,null)}os(i,u,f,p);return;case"option":for(D in o)if(o.hasOwnProperty(D)&&(u=o[D],u!=null))switch(D){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:st(i,s,D,u,o,null)}return;case"dialog":Ve("beforetoggle",i),Ve("toggle",i),Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":Ve("load",i);break;case"video":case"audio":for(u=0;u<Xu.length;u++)Ve(Xu[u],i);break;case"image":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"embed":case"source":case"link":Ve("error",i),Ve("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in o)if(o.hasOwnProperty(j)&&(u=o[j],u!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:st(i,s,j,u,o,null)}return;default:if(_u(s)){for(Y in o)o.hasOwnProperty(Y)&&(u=o[Y],u!==void 0&&cg(i,s,Y,u,o,void 0));return}}for(w in o)o.hasOwnProperty(w)&&(u=o[w],u!=null&&st(i,s,w,u,o,null))}function CR(i,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,y=null,w=null,D=null,j=null,Y=null;for(q in o){var J=o[q];if(o.hasOwnProperty(q)&&J!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":D=J;default:u.hasOwnProperty(q)||st(i,s,q,null,u,J)}}for(var F in u){var q=u[F];if(J=o[F],u.hasOwnProperty(F)&&(q!=null||J!=null))switch(F){case"type":p=q;break;case"name":f=q;break;case"checked":j=q;break;case"defaultChecked":Y=q;break;case"value":y=q;break;case"defaultValue":w=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,s));break;default:q!==J&&st(i,s,F,q,u,J)}}as(i,y,w,D,j,Y,p,f);return;case"select":q=y=w=F=null;for(p in o)if(D=o[p],o.hasOwnProperty(p)&&D!=null)switch(p){case"value":break;case"multiple":q=D;default:u.hasOwnProperty(p)||st(i,s,p,null,u,D)}for(f in u)if(p=u[f],D=o[f],u.hasOwnProperty(f)&&(p!=null||D!=null))switch(f){case"value":F=p;break;case"defaultValue":w=p;break;case"multiple":y=p;default:p!==D&&st(i,s,f,p,u,D)}s=w,o=y,u=q,F!=null?Qe(i,!!o,F,!1):!!u!=!!o&&(s!=null?Qe(i,!!o,s,!0):Qe(i,!!o,o?[]:"",!1));return;case"textarea":q=F=null;for(w in o)if(f=o[w],o.hasOwnProperty(w)&&f!=null&&!u.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:st(i,s,w,null,u,f)}for(y in u)if(f=u[y],p=o[y],u.hasOwnProperty(y)&&(f!=null||p!=null))switch(y){case"value":F=f;break;case"defaultValue":q=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==p&&st(i,s,y,f,u,p)}ya(i,F,q);return;case"option":for(var de in o)if(F=o[de],o.hasOwnProperty(de)&&F!=null&&!u.hasOwnProperty(de))switch(de){case"selected":i.selected=!1;break;default:st(i,s,de,null,u,F)}for(D in u)if(F=u[D],q=o[D],u.hasOwnProperty(D)&&F!==q&&(F!=null||q!=null))switch(D){case"selected":i.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:st(i,s,D,F,u,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in o)F=o[we],o.hasOwnProperty(we)&&F!=null&&!u.hasOwnProperty(we)&&st(i,s,we,null,u,F);for(j in u)if(F=u[j],q=o[j],u.hasOwnProperty(j)&&F!==q&&(F!=null||q!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,s));break;default:st(i,s,j,F,u,q)}return;default:if(_u(s)){for(var at in o)F=o[at],o.hasOwnProperty(at)&&F!==void 0&&!u.hasOwnProperty(at)&&cg(i,s,at,void 0,u,F);for(Y in u)F=u[Y],q=o[Y],!u.hasOwnProperty(Y)||F===q||F===void 0&&q===void 0||cg(i,s,Y,F,u,q);return}}for(var M in o)F=o[M],o.hasOwnProperty(M)&&F!=null&&!u.hasOwnProperty(M)&&st(i,s,M,null,u,F);for(J in u)F=u[J],q=o[J],!u.hasOwnProperty(J)||F===q||F==null&&q==null||st(i,s,J,F,u,q)}function dE(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function DR(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],p=f.transferSize,y=f.initiatorType,w=f.duration;if(p&&w&&dE(y)){for(y=0,w=f.responseEnd,u+=1;u<o.length;u++){var D=o[u],j=D.startTime;if(j>w)break;var Y=D.transferSize,J=D.initiatorType;Y&&dE(J)&&(D=D.responseEnd,y+=Y*(D<w?1:(w-j)/(D-j)))}if(--u,s+=8*(p+y)/(f.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var hg=null,dg=null;function Ud(i){return i.nodeType===9?i:i.ownerDocument}function fE(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mE(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function fg(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var mg=null;function xR(){var i=window.event;return i&&i.type==="popstate"?i===mg?!1:(mg=i,!0):(mg=null,!1)}var pE=typeof setTimeout=="function"?setTimeout:void 0,NR=typeof clearTimeout=="function"?clearTimeout:void 0,gE=typeof Promise=="function"?Promise:void 0,OR=typeof queueMicrotask=="function"?queueMicrotask:typeof gE<"u"?function(i){return gE.resolve(null).then(i).catch(kR)}:pE;function kR(i){setTimeout(function(){throw i})}function Os(i){return i==="head"}function _E(i,s){var o=s,u=0;do{var f=o.nextSibling;if(i.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){i.removeChild(f),hl(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Ju(i.ownerDocument.documentElement);else if(o==="head"){o=i.ownerDocument.head,Ju(o);for(var p=o.firstChild;p;){var y=p.nextSibling,w=p.nodeName;p[dr]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=y}}else o==="body"&&Ju(i.ownerDocument.body);o=f}while(o);hl(s)}function yE(i,s){var o=i;i=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(i===0)break;i--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||i++;o=u}while(o)}function pg(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":pg(o),pa(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function PR(i,s,o,u){for(;i.nodeType===1;){var f=o;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[dr])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(p=i.getAttribute("rel"),p==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(p!==f.rel||i.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(p=i.getAttribute("src"),(p!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===p)return i}else return i;if(i=vi(i.nextSibling),i===null)break}return null}function VR(i,s,o){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=vi(i.nextSibling),i===null))return null;return i}function vE(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=vi(i.nextSibling),i===null))return null;return i}function gg(i){return i.data==="$?"||i.data==="$~"}function _g(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function MR(i,s){var o=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function vi(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var yg=null;function EE(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="/$"||o==="/&"){if(s===0)return vi(i.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}i=i.nextSibling}return null}function TE(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return i;s--}else o!=="/$"&&o!=="/&"||s++}i=i.previousSibling}return null}function wE(i,s,o){switch(s=Ud(o),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Ju(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);pa(i)}var Ei=new Map,AE=new Set;function Bd(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Pr=oe.d;oe.d={f:LR,r:UR,D:BR,C:jR,L:zR,m:FR,X:GR,S:qR,M:HR};function LR(){var i=Pr.f(),s=xd();return i||s}function UR(i){var s=mr(i);s!==null&&s.tag===5&&s.type==="form"?jv(s):Pr.r(i)}var ll=typeof document>"u"?null:document;function IE(i,s,o){var u=ll;if(u&&typeof s=="string"&&s){var f=It(s);f='link[rel="'+i+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),AE.has(f)||(AE.add(f),i={rel:i,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),fn(s,"link",i),Ot(s),u.head.appendChild(s)))}}function BR(i){Pr.D(i),IE("dns-prefetch",i,null)}function jR(i,s){Pr.C(i,s),IE("preconnect",i,s)}function zR(i,s,o){Pr.L(i,s,o);var u=ll;if(u&&i&&s){var f='link[rel="preload"][as="'+It(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+It(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+It(o.imageSizes)+'"]')):f+='[href="'+It(i)+'"]';var p=f;switch(s){case"style":p=ul(i);break;case"script":p=cl(i)}Ei.has(p)||(i=T({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:i,as:s},o),Ei.set(p,i),u.querySelector(f)!==null||s==="style"&&u.querySelector(ec(p))||s==="script"&&u.querySelector(tc(p))||(s=u.createElement("link"),fn(s,"link",i),Ot(s),u.head.appendChild(s)))}}function FR(i,s){Pr.m(i,s);var o=ll;if(o&&i){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+It(u)+'"][href="'+It(i)+'"]',p=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=cl(i)}if(!Ei.has(p)&&(i=T({rel:"modulepreload",href:i},s),Ei.set(p,i),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(tc(p)))return}u=o.createElement("link"),fn(u,"link",i),Ot(u),o.head.appendChild(u)}}}function qR(i,s,o){Pr.S(i,s,o);var u=ll;if(u&&i){var f=Ci(u).hoistableStyles,p=ul(i);s=s||"default";var y=f.get(p);if(!y){var w={loading:0,preload:null};if(y=u.querySelector(ec(p)))w.loading=5;else{i=T({rel:"stylesheet",href:i,"data-precedence":s},o),(o=Ei.get(p))&&vg(i,o);var D=y=u.createElement("link");Ot(D),fn(D,"link",i),D._p=new Promise(function(j,Y){D.onload=j,D.onerror=Y}),D.addEventListener("load",function(){w.loading|=1}),D.addEventListener("error",function(){w.loading|=2}),w.loading|=4,jd(y,s,u)}y={type:"stylesheet",instance:y,count:1,state:w},f.set(p,y)}}}function GR(i,s){Pr.X(i,s);var o=ll;if(o&&i){var u=Ci(o).hoistableScripts,f=cl(i),p=u.get(f);p||(p=o.querySelector(tc(f)),p||(i=T({src:i,async:!0},s),(s=Ei.get(f))&&Eg(i,s),p=o.createElement("script"),Ot(p),fn(p,"link",i),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function HR(i,s){Pr.M(i,s);var o=ll;if(o&&i){var u=Ci(o).hoistableScripts,f=cl(i),p=u.get(f);p||(p=o.querySelector(tc(f)),p||(i=T({src:i,async:!0,type:"module"},s),(s=Ei.get(f))&&Eg(i,s),p=o.createElement("script"),Ot(p),fn(p,"link",i),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function bE(i,s,o,u){var f=(f=Oe.current)?Bd(f):null;if(!f)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=ul(o.href),o=Ci(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=ul(o.href);var p=Ci(f).hoistableStyles,y=p.get(i);if(y||(f=f.ownerDocument||f,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(i,y),(p=f.querySelector(ec(i)))&&!p._p&&(y.instance=p,y.state.loading=5),Ei.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ei.set(i,o),p||KR(f,i,o,y.state))),s&&u===null)throw Error(r(528,""));return y}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=cl(o),o=Ci(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function ul(i){return'href="'+It(i)+'"'}function ec(i){return'link[rel="stylesheet"]['+i+"]"}function SE(i){return T({},i,{"data-precedence":i.precedence,precedence:null})}function KR(i,s,o,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),fn(s,"link",o),Ot(s),i.head.appendChild(s))}function cl(i){return'[src="'+It(i)+'"]'}function tc(i){return"script[async]"+i}function RE(i,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+It(o.href)+'"]');if(u)return s.instance=u,Ot(u),u;var f=T({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Ot(u),fn(u,"style",f),jd(u,o.precedence,i),s.instance=u;case"stylesheet":f=ul(o.href);var p=i.querySelector(ec(f));if(p)return s.state.loading|=4,s.instance=p,Ot(p),p;u=SE(o),(f=Ei.get(f))&&vg(u,f),p=(i.ownerDocument||i).createElement("link"),Ot(p);var y=p;return y._p=new Promise(function(w,D){y.onload=w,y.onerror=D}),fn(p,"link",u),s.state.loading|=4,jd(p,o.precedence,i),s.instance=p;case"script":return p=cl(o.src),(f=i.querySelector(tc(p)))?(s.instance=f,Ot(f),f):(u=o,(f=Ei.get(p))&&(u=T({},o),Eg(u,f)),i=i.ownerDocument||i,f=i.createElement("script"),Ot(f),fn(f,"link",u),i.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,jd(u,o.precedence,i));return s.instance}function jd(i,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,p=f,y=0;y<u.length;y++){var w=u[y];if(w.dataset.precedence===s)p=w;else if(p!==f)break}p?p.parentNode.insertBefore(i,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(i,s.firstChild))}function vg(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Eg(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var zd=null;function CE(i,s,o){if(zd===null){var u=new Map,f=zd=new Map;f.set(o,u)}else f=zd,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(i))return u;for(u.set(i,null),o=o.getElementsByTagName(i),f=0;f<o.length;f++){var p=o[f];if(!(p[dr]||p[At]||i==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var y=p.getAttribute(s)||"";y=i+y;var w=u.get(y);w?w.push(p):u.set(y,[p])}}return u}function DE(i,s,o){i=i.ownerDocument||i,i.head.insertBefore(o,s==="title"?i.querySelector("head > title"):null)}function QR(i,s,o){if(o===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function xE(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function YR(i,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=ul(u.href),p=s.querySelector(ec(f));if(p){s=p._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=Fd.bind(i),s.then(i,i)),o.state.loading|=4,o.instance=p,Ot(p);return}p=s.ownerDocument||s,u=SE(u),(f=Ei.get(f))&&vg(u,f),p=p.createElement("link"),Ot(p);var y=p;y._p=new Promise(function(w,D){y.onload=w,y.onerror=D}),fn(p,"link",u),o.instance=p}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(i.count++,o=Fd.bind(i),s.addEventListener("load",o),s.addEventListener("error",o))}}var Tg=0;function WR(i,s){return i.stylesheets&&i.count===0&&Gd(i,i.stylesheets),0<i.count||0<i.imgCount?function(o){var u=setTimeout(function(){if(i.stylesheets&&Gd(i,i.stylesheets),i.unsuspend){var p=i.unsuspend;i.unsuspend=null,p()}},6e4+s);0<i.imgBytes&&Tg===0&&(Tg=62500*DR());var f=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Gd(i,i.stylesheets),i.unsuspend)){var p=i.unsuspend;i.unsuspend=null,p()}},(i.imgBytes>Tg?50:800)+s);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function Fd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Gd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var qd=null;function Gd(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,qd=new Map,s.forEach($R,i),qd=null,Fd.call(i))}function $R(i,s){if(!(s.state.loading&4)){var o=qd.get(i);if(o)var u=o.get(null);else{o=new Map,qd.set(i,o);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var y=f[p];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(o.set(y.dataset.precedence,y),u=y)}u&&o.set(null,u)}f=s.instance,y=f.getAttribute("data-precedence"),p=o.get(y)||u,p===u&&o.set(null,f),o.set(y,f),this.count++,u=Fd.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),p?p.parentNode.insertBefore(f,p.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),s.state.loading|=4}}var nc={$$typeof:ce,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function XR(i,s,o,u,f,p,y,w,D){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=cr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cr(0),this.hiddenUpdates=cr(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function NE(i,s,o,u,f,p,y,w,D,j,Y,J){return i=new XR(i,s,o,y,D,j,Y,J,w),s=1,p===!0&&(s|=24),p=Jn(3,null,null,s),i.current=p,p.stateNode=i,s=ep(),s.refCount++,i.pooledCache=s,s.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:s},rp(p),i}function OE(i){return i?(i=zo,i):zo}function kE(i,s,o,u,f,p){f=OE(f),u.context===null?u.context=f:u.pendingContext=f,u=Ts(s),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=ws(i,u,s),o!==null&&(Gn(o,i,s),Pu(o,i,s))}function PE(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<s?o:s}}function wg(i,s){PE(i,s),(i=i.alternate)&&PE(i,s)}function VE(i){if(i.tag===13||i.tag===31){var s=Ra(i,67108864);s!==null&&Gn(s,i,67108864),wg(i,67108864)}}function ME(i){if(i.tag===13||i.tag===31){var s=ri();s=cu(s);var o=Ra(i,s);o!==null&&Gn(o,i,s),wg(i,s)}}var Hd=!0;function ZR(i,s,o,u){var f=K.T;K.T=null;var p=oe.p;try{oe.p=2,Ag(i,s,o,u)}finally{oe.p=p,K.T=f}}function JR(i,s,o,u){var f=K.T;K.T=null;var p=oe.p;try{oe.p=8,Ag(i,s,o,u)}finally{oe.p=p,K.T=f}}function Ag(i,s,o,u){if(Hd){var f=Ig(u);if(f===null)ug(i,s,u,Kd,o),UE(i,u);else if(t5(f,i,s,o,u))u.stopPropagation();else if(UE(i,u),s&4&&-1<e5.indexOf(i)){for(;f!==null;){var p=mr(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var y=Ri(p.pendingLanes);if(y!==0){var w=p;for(w.pendingLanes|=2,w.entangledLanes|=2;y;){var D=1<<31-In(y);w.entanglements[1]|=D,y&=~D}Yi(p),(Xe&6)===0&&(Cd=on()+500,$u(0))}}break;case 31:case 13:w=Ra(p,2),w!==null&&Gn(w,p,2),xd(),wg(p,2)}if(p=Ig(u),p===null&&ug(i,s,u,Kd,o),p===f)break;f=p}f!==null&&u.stopPropagation()}else ug(i,s,u,null,o)}}function Ig(i){return i=ko(i),bg(i)}var Kd=null;function bg(i){if(Kd=null,i=fr(i),i!==null){var s=l(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=c(s),i!==null)return i;i=null}else if(o===31){if(i=d(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Kd=i,null}function LE(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bh()){case Kt:return 2;case $t:return 8;case ur:case Sh:return 32;case au:return 268435456;default:return 32}default:return 32}}var Sg=!1,ks=null,Ps=null,Vs=null,ic=new Map,rc=new Map,Ms=[],e5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function UE(i,s){switch(i){case"focusin":case"focusout":ks=null;break;case"dragenter":case"dragleave":Ps=null;break;case"mouseover":case"mouseout":Vs=null;break;case"pointerover":case"pointerout":ic.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":rc.delete(s.pointerId)}}function sc(i,s,o,u,f,p){return i===null||i.nativeEvent!==p?(i={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},s!==null&&(s=mr(s),s!==null&&VE(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),i)}function t5(i,s,o,u,f){switch(s){case"focusin":return ks=sc(ks,i,s,o,u,f),!0;case"dragenter":return Ps=sc(Ps,i,s,o,u,f),!0;case"mouseover":return Vs=sc(Vs,i,s,o,u,f),!0;case"pointerover":var p=f.pointerId;return ic.set(p,sc(ic.get(p)||null,i,s,o,u,f)),!0;case"gotpointercapture":return p=f.pointerId,rc.set(p,sc(rc.get(p)||null,i,s,o,u,f)),!0}return!1}function BE(i){var s=fr(i.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){i.blockedOn=s,Ch(i.priority,function(){ME(o)});return}}else if(s===31){if(s=d(o),s!==null){i.blockedOn=s,Ch(i.priority,function(){ME(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Qd(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var o=Ig(i.nativeEvent);if(o===null){o=i.nativeEvent;var u=new o.constructor(o.type,o);Oo=u,o.target.dispatchEvent(u),Oo=null}else return s=mr(o),s!==null&&VE(s),i.blockedOn=o,!1;s.shift()}return!0}function jE(i,s,o){Qd(i)&&o.delete(s)}function n5(){Sg=!1,ks!==null&&Qd(ks)&&(ks=null),Ps!==null&&Qd(Ps)&&(Ps=null),Vs!==null&&Qd(Vs)&&(Vs=null),ic.forEach(jE),rc.forEach(jE)}function Yd(i,s){i.blockedOn===s&&(i.blockedOn=null,Sg||(Sg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,n5)))}var Wd=null;function zE(i){Wd!==i&&(Wd=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Wd===i&&(Wd=null);for(var s=0;s<i.length;s+=3){var o=i[s],u=i[s+1],f=i[s+2];if(typeof u!="function"){if(bg(u||o)===null)continue;break}var p=mr(o);p!==null&&(i.splice(s,3),s-=3,Ip(p,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function hl(i){function s(D){return Yd(D,i)}ks!==null&&Yd(ks,i),Ps!==null&&Yd(Ps,i),Vs!==null&&Yd(Vs,i),ic.forEach(s),rc.forEach(s);for(var o=0;o<Ms.length;o++){var u=Ms[o];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Ms.length&&(o=Ms[0],o.blockedOn===null);)BE(o),o.blockedOn===null&&Ms.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],p=o[u+1],y=f[un]||null;if(typeof p=="function")y||zE(o);else if(y){var w=null;if(p&&p.hasAttribute("formAction")){if(f=p,y=p[un]||null)w=y.formAction;else if(bg(f)!==null)continue}else w=y.action;typeof w=="function"?o[u+1]=w:(o.splice(u,3),u-=3),zE(o)}}}function FE(){function i(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(y){return f=y})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function Rg(i){this._internalRoot=i}$d.prototype.render=Rg.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,u=ri();kE(o,u,i,s,null,null)},$d.prototype.unmount=Rg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;kE(i.current,2,null,i,null,null),xd(),s[Bi]=null}};function $d(i){this._internalRoot=i}$d.prototype.unstable_scheduleHydration=function(i){if(i){var s=hr();i={blockedOn:null,target:i,priority:s};for(var o=0;o<Ms.length&&s!==0&&s<Ms[o].priority;o++);Ms.splice(o,0,i),o===0&&BE(i)}};var qE=e.version;if(qE!=="19.2.4")throw Error(r(527,qE,"19.2.4"));oe.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=g(s),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var i5={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xd.isDisabled&&Xd.supportsFiber)try{$r=Xd.inject(i5),vn=Xd}catch{}}return oc.createRoot=function(i,s){if(!a(i))throw Error(r(299));var o=!1,u="",f=$v,p=Xv,y=Zv;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(y=s.onRecoverableError)),s=NE(i,1,!1,null,null,o,u,null,f,p,y,FE),i[Bi]=s.current,lg(i),new Rg(s)},oc.hydrateRoot=function(i,s,o){if(!a(i))throw Error(r(299));var u=!1,f="",p=$v,y=Xv,w=Zv,D=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.formState!==void 0&&(D=o.formState)),s=NE(i,1,!0,s,o??null,u,f,D,p,y,w,FE),s.context=OE(null),o=s.current,u=ri(),u=cu(u),f=Ts(u),f.callback=null,ws(o,f,u),o=u,s.current.lanes=o,Jr(s,o),Yi(s),i[Bi]=s.current,lg(i),new $d(s)},oc.version="19.2.4",oc}var JE;function f5(){if(JE)return xg.exports;JE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),xg.exports=d5(),xg.exports}var m5=f5();const p5="modulepreload",g5=function(n){return"/"+n},eT={},He=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){let c=function(g){return Promise.all(g.map(v=>Promise.resolve(v).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),m=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));a=c(t.map(g=>{if(g=g5(g),g in eT)return;eT[g]=!0;const v=g.endsWith(".css"),T=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${T}`))return;const I=document.createElement("link");if(I.rel=v?"stylesheet":p5,v||(I.as="script"),I.crossOrigin="",I.href=g,m&&I.setAttribute("nonce",m),document.head.appendChild(I),v)return new Promise((N,Q)=>{I.addEventListener("load",N),I.addEventListener("error",()=>Q(new Error(`Unable to preload CSS for ${g}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return a.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})},nt={ADMIN:"ADMIN",DEVELOPER:"DEVELOPER",KEPALA_MADRASAH:"KEPALA_MADRASAH",WAKA_KURIKULUM:"WAKA_KURIKULUM",WAKA_KESISWAAN:"WAKA_KESISWAAN",WAKA_SARPRAS:"WAKA_SARPRAS",GURU:"GURU",WALI_KELAS:"WALI_KELAS",BK:"BK",STAF_TU:"STAF_TU",OPERATOR:"OPERATOR",PETUGAS_PIKET:"PETUGAS_PIKET",SISWA:"SISWA",KETUA_KELAS:"KETUA_KELAS",ORANG_TUA:"ORANG_TUA",TAMU:"TAMU"},_5={ADMIN:nt.ADMIN,admin:nt.ADMIN,DEVELOPER:nt.DEVELOPER,developer:nt.DEVELOPER,KEPALA_MADRASAH:nt.KEPALA_MADRASAH,kepala_madrasah:nt.KEPALA_MADRASAH,WAKA_KURIKULUM:nt.WAKA_KURIKULUM,WAKA_KESISWAAN:nt.WAKA_KESISWAAN,WAKA_SARPRAS:nt.WAKA_SARPRAS,GURU:nt.GURU,Guru:nt.GURU,WALI_KELAS:nt.WALI_KELAS,"Wali Kelas":nt.WALI_KELAS,BK:nt.BK,STAF_TU:nt.STAF_TU,STAF:nt.STAF_TU,Staf:nt.STAF_TU,OPERATOR:nt.OPERATOR,PETUGAS_PIKET:nt.PETUGAS_PIKET,SISWA:nt.SISWA,siswa:nt.SISWA,KETUA_KELAS:nt.KETUA_KELAS,"Ketua Kelas":nt.KETUA_KELAS,ORANG_TUA:nt.ORANG_TUA,orangtua:nt.ORANG_TUA,TAMU:nt.TAMU,Tamu:nt.TAMU},y5=(n,e=nt.TAMU)=>typeof n!="string"?e:_5[n]??e;/**
 * @license
 * IMAM System - Integrated Madrasah Academic Manager
 */var X=(n=>(n.LOGIN="LOGIN",n.REGISTER="REGISTER",n.DASHBOARD="DASHBOARD",n.PRESENSI="PRESENSI",n.CONTENT_GENERATION="CONTENT_GENERATION",n.REPORTS="REPORTS",n.PROFILE="PROFILE",n.CLASSES="CLASSES",n.PROMOTION="PROMOTION",n.SCHEDULE="SCHEDULE",n.SCANNER="SCANNER",n.ALL_FEATURES="ALL_FEATURES",n.ATTENDANCE_HISTORY="ATTENDANCE_HISTORY",n.ACADEMIC_YEAR="ACADEMIC_YEAR",n.JOURNAL="JOURNAL",n.ASSIGNMENTS="ASSIGNMENTS",n.GRADES="GRADES",n.REPORT_CARDS="REPORT_CARDS",n.STUDENTS="STUDENTS",n.TEACHERS="TEACHERS",n.ID_CARD="ID_CARD",n.LETTERS="LETTERS",n.CREATE_ACCOUNT="CREATE_ACCOUNT",n.DEVELOPER="DEVELOPER",n.LOGIN_HISTORY="LOGIN_HISTORY",n.ABOUT="ABOUT",n.HISTORY="HISTORY",n.PREMIUM="PREMIUM",n.NEWS="NEWS",n.MADRASAH_INFO="MADRASAH_INFO",n.ADVISOR="ADVISOR",n.SETTINGS="SETTINGS",n.PUSAKA="PUSAKA",n.GUIDE="GUIDE",n.POINTS="POINTS",n.KEMENAG_HUB="KEMENAG_HUB",n.CLAIM_MANAGEMENT="CLAIM_MANAGEMENT",n))(X||{});const Me=nt,z_=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})}),F_=({className:n})=>b.jsxs("div",{className:`relative flex items-center justify-center overflow-visible group ${n}`,children:[b.jsx("div",{className:"absolute inset-0 bg-yellow-400/20 rounded-full blur-xl scale-125 animate-pulse group-hover:bg-yellow-400/40 transition-all duration-700"}),b.jsx("img",{src:"https://lh3.googleusercontent.com/d/1qEacwHH2BlK-Z6VyY98NVI9fzv6VqE0r",alt:"IMAM Logo",className:"w-full h-full object-contain transition-all duration-700 hover:scale-110 drop-shadow-[0_0_15px_rgba(234,179,8,0.5)] relative z-10",referrerPolicy:"no-referrer",crossOrigin:"anonymous"})]}),a6=F_,o6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:n,children:b.jsx("path",{d:"M20 18h2v-8h-2v8zm-4 0h2v-5h-2v5zm-4 0h2V8h-2v10zm-4 0h2v-3H8v3zm-4 0h2v-1H4v1z"})}),v5=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})}),E5=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"})}),tT=({className:n})=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5h.75v.75h-.75v-.75ZM13.5 19.5h.75v.75h-.75v-.75ZM19.5 13.5h.75v.75h-.75v-.75ZM19.5 19.5h.75v.75h-.75v-.75ZM16.5 16.5h.75v.75h-.75v-.75Z"})]}),l6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5a2.25 2.25 0 0 0 2.25 2.25Zm.75-12h3.75c.621 0 1.125.504 1.125 1.125v3.75c0 .621-.504 1.125-1.125 1.125H5.25a1.125 1.125 0 0 1-1.125-1.125v-3.75c0-.621.504-1.125 1.125-1.125Z"})}),u6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12h1.5m12 0h1.5m-15 3.75h3m-3.75 3.75h15A2.25 2.25 0 0 0 21 17.25V8.25a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 8.25v9a2.25 2.25 0 0 0 2.25 2.25Z"})}),c2=({className:n})=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 10a8 8 0 0 0-12 0"})]}),h2=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})}),T5=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0V10.5m-1.5 0h12a2.25 2.25 0 0 1 2.25 2.25v7.5a2.25 2.25 0 0 1-2.25-2.25h-12a2.25 2.25 0 0 1-2.25-2.25v-7.5a2.25 2.25 0 0 1 2.25-2.25Z"})}),w5=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 5.472m0 0a5.995 5.995 0 0 0-4.293-5.774M6.228 6.228A4.044 4.044 0 0 1 9 4.875c1.11 0 2.155.45 2.923 1.187M12.75 7.875a4.125 4.125 0 1 1-8.25 0 4.125 4.125 0 0 1 8.25 0ZM16.5 7.5a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"})}),A5=w5,I5=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.906 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"})}),d2=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})}),c6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"})}),f2=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 9v7.5m-18 0h18"})}),b5=f2,nT=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0 0 12 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75Z"})}),h6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"})}),S5=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})}),R5=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09-3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0-1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})}),m2=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})}),d6=({className:n})=>b.jsx("img",{src:"https://lh3.googleusercontent.com/d/1bRX-yogRsfbDeAzpdDxP9Hj9OaEv88Nd",alt:"Pusaka Logo",className:`w-full h-full object-contain ${n}`,referrerPolicy:"no-referrer",crossOrigin:"anonymous"}),f6=({className:n})=>b.jsx("img",{src:"https://lh3.googleusercontent.com/d/1LaNh2QMfdsfdIARzRqO9z28kmHdwXVYK",alt:"RDM Logo",className:`w-full h-full object-contain ${n}`,referrerPolicy:"no-referrer",crossOrigin:"anonymous"}),m6=({className:n})=>b.jsx("img",{src:"https://lh3.googleusercontent.com/d/1h2S3ic5k_RFaJBOSK9EGpZm6xhHEXQtL",alt:"Emis Logo",className:`w-full h-full object-contain ${n}`,referrerPolicy:"no-referrer",crossOrigin:"anonymous"}),p6=({className:n})=>b.jsx("img",{src:"https://lh3.googleusercontent.com/d/1LC86T4WSlUzIwxQEFQDV2hoR--zpe0bi",alt:"Emis 4.0 Logo",className:`w-full h-full object-contain ${n}`,referrerPolicy:"no-referrer",crossOrigin:"anonymous"}),g6=({className:n})=>b.jsx("img",{src:"https://lh3.googleusercontent.com/d/16huzm5CuNdDF91_wIndGgnJTGHXUM2kU",alt:"Pintar Logo",className:`w-full h-full object-contain ${n}`,referrerPolicy:"no-referrer",crossOrigin:"anonymous"}),_6=({className:n})=>b.jsx("img",{src:"https://lh3.googleusercontent.com/d/10KEBDQ0zxpPo9tYKHBOXuLPt3wgXBvhM",alt:"ASN Digital Logo",className:`w-full h-full object-contain ${n}`,referrerPolicy:"no-referrer",crossOrigin:"anonymous"}),y6=({className:n})=>b.jsx("img",{src:"https://lh3.googleusercontent.com/d/10TbuMUaaspE8HBDYCI6VimGrdRNf614j",alt:"SIMSDM Logo",className:`w-full h-full object-contain ${n}`,referrerPolicy:"no-referrer",crossOrigin:"anonymous"}),v6=({className:n})=>b.jsx("img",{src:"https://lh3.googleusercontent.com/d/1gd2SoKrr0nDhCfSFwQr6rUdR6ZPyXUMt",alt:"Absensi Kemenag Logo",className:`w-full h-full object-contain ${n}`,referrerPolicy:"no-referrer",crossOrigin:"anonymous"}),iT=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`${n} animate-spin`,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})}),E6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),T6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),w6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),A6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),I6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})}),b6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),S6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),R6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"})}),C6=({className:n})=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})]}),D6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),C5=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 14.15v4.25c0 .414-.336.75-.75.75H4.5a.75.75 0 0 1-.75-.75v-4.25m16.5 0a2.25 2.25 0 0 0-2.25-2.25H18m2.25 2.25H18m0-2.25V4.5a2.25 2.25 0 0 0-2.25-2.25H8.25A2.25 2.25 0 0 0 6 4.5v7.4m12 0V12m-12 0v1.25m12-1.25c0 1.242-1.008 2.25-2.25 2.25H8.25A2.25 2.25 0 0 1 6 13.25V12"})}),D5=({className:n})=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"})]}),x6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"})}),N6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),x5=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})}),O6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M3 12h2.25m.386-6.364 1.591 1.591M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"})}),k6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"})}),p2=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .415.162.798.425 1.087.262.289.625.463 1.025.463s.763-.174 1.025-.463c.263-.289.425-.672.425-1.087 0-.231-.035-.454-.1-.664m-5.801 0A2.251 2.251 0 0 1 13.5 2.25c1.035 0 1.9.7 2.143 1.657m-5.801 0L12 2.25m4.143 1.657L12 2.25"})}),N5=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.835a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})}),O5=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 7.5 3 11.25m3.75 3.75L3 11.25m10.5 3.75h6.75V7.5"})}),rT=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18c-2.305 0-4.408.867-6 2.292m0-14.25v14.25"})}),P6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"})}),k5=({className:n})=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.59c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 0 1 0 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.59c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 0 1 0-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281Z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),V6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.563.563 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"})}),M6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})}),L6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})}),U6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})}),B6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125V3.375c0-.621.504-1.125 1.125-1.125h12.75c.621 0 1.125.504 1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125h1.5a1.125 1.125 0 0 1 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125V3.375c0-.621.504-1.125 1.125-1.125H9.75v1.5c0 .621.504 1.125 1.125 1.125h1.5a1.125 1.125 0 0 1 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125M9 15h.008v.008H9V15Zm0-3h.008v.008H9V12Zm0-3h.008v.008H9V9Zm3 6h.008v.008H12V15Zm0-3h.008v.008H12V12Zm0-3h.008v.008H12V9Zm3 6h.008v.008H15V15Zm0-3h.008v.008H15V12Zm0-3h.008v.008H15V9Z"})}),j6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 1 1 0-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.062.51.115.77.16L15 17.14V6.86l-3.89 1.14c-.26.045-.517.098-.77.16m0 9.18V7.02m0 9.18c1.157.283 2.353.43 3.584.43h.482c.801 0 1.555-.253 2.174-.682m0 0A5.991 5.991 0 0 0 21.43 12c0-1.314-.422-2.528-1.14-3.523m0 0A5.992 5.992 0 0 1 21.43 12c0 .338-.028.67-.082 1m-5.714 0v-4"})}),z6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})}),F6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.633 10.25c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75a.75.75 0 0 1 .75-.75 2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23H5.904m10.598-9.75H14.25M5.904 18.5c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 0 1-.521-3.507c0-1.553.295-3.036.831-4.398C3.387 9.953 4.167 9.5 5 9.5h1.053c.472 0 .745.551.446.912a9.043 9.043 0 0 1-1.125 1.115c-.288.24-.288.665 0 .905.282.235.592.443.927.621.284.15.284.584 0 .734a9.053 9.053 0 0 1-1.341.564c-.292.097-.292.531 0 .628.344.115.698.209 1.063.282.296.059.296.505 0 .564Z"})}),q6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 15h2.25m3.33-2.03c.166.361.333.722.5 1.083C14.242 15.34 14.5 16.63 14.5 18c0 1.242-1.008 2.25-2.25 2.25-.4 0-.777-.107-1.1-.295a.75.75 0 0 1-.745-1.3l.035-.02a.75.75 0 0 0-.25-1.385l-.213-.02a.75.75 0 0 1-.655-1.115c.045-.09.09-.18.135-.27a.75.75 0 0 0-.663-1.083h-.514c-1.157 0-2.098.941-2.098 2.098v.482c0 1.23.147 2.426.43 3.584.097.398-.204.774-.61.774H2.75c-.414 0-.75-.336-.75-.75a13.414 13.414 0 0 1 1.054-5.231c.384-.723.956-1.35 1.715-1.653a4.498 4.498 0 0 1 1.672-.322h3.128c.618 0 .991-.724.725-1.282a12.022 12.022 0 0 1-.723-3.218 2.25 2.25 0 0 1 2.25-2.25.75.75 0 0 1 .75.75v.39c0 .584.108 1.15.322 1.672.303.759.93 1.331 1.653 1.715a9.04 9.04 0 0 1 2.86 2.4c.499.634 1.226 1.08 2.032 1.08h.384"})}),P5=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"})}),G6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),H6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6.878V6a2.25 2.25 0 0 1 2.25-2.25h7.5A2.25 2.25 0 0 1 18 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 0 0 4.5 9v.878m13.5-3A2.25 2.25 0 0 1 19.5 9v.878m-15 0A2.25 2.25 0 0 0 3 12.122V18a2.25 2.25 0 0 0 2.25 2.25h13.5A2.25 2.25 0 0 0 21 18v-5.878a2.25 2.25 0 0 0-1.5-2.122m-15 0A2.25 2.25 0 0 1 6 9.878m13.5 0A2.25 2.25 0 0 1 18 12.122"})}),K6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"})}),Q6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231a1.125 1.125 0 0 1-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.375m10.5 0H6.75"})}),Y6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75m0 1.5V9m0 1.5V12m0 1.5v.75m0 0h.75m0 0h13.5m0 0h.75m-20.25 0h.75m0 0h13.5m0 0h.75M6.75 20.25v.75m0-1.5v-1.5m0-1.5v-1.5m0-1.5v-.75m0 0h.75m0 0h13.5m0 0h.75m-20.25 0h.75m0 0h13.5m0 0h.75m-16.5-15h16.5a2.25 2.25 0 0 1 2.25 2.25v10.5a2.25 2.25 0 0 1-2.25 2.25H3.75a2.25 2.25 0 0 1-2.25-2.25V6.75a2.25 2.25 0 0 1 2.25-2.25Z"})}),W6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15a4.5 4.5 0 0 0 4.5 4.5H18a3.75 3.75 0 0 0 0-7.5h-.75a6 6 0 1 0-11.75 0h-.75a4.5 4.5 0 0 0-4.5 4.5Z"})}),$6=({className:n})=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),X6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .415.162.798.425 1.087.262.289.625.463 1.025.463s.763-.174 1.025-.463c.263-.289.425-.672.425-1.087 0-.231-.035-.454-.1-.664m-5.801 0A2.251 2.251 0 0 1 13.5 2.25c1.035 0 1.9.7 2.143 1.657m-5.801 0L12 2.25m4.143 1.657L12 2.25M9 13.5l3 3 6-6"})}),Z6=({className:n})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m0-10.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.248-8.25-3.286Zm0 13.036h.008v.008H12v-.008Z"})}),V5=({currentView:n,onNavigate:e,userRole:t})=>{const r=t===Me.SISWA,a=[{id:"home",view:X.DASHBOARD,label:"Beranda",icon:z_},{id:"assignments",view:X.ASSIGNMENTS,label:"Tugas",icon:p2},{id:"menu",view:X.ALL_FEATURES,label:"Menu",icon:E5},{id:"reports",view:X.REPORTS,label:"Laporan",icon:d2},{id:"profile",view:X.PROFILE,label:"Akun",icon:h2}];return b.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 flex justify-center pointer-events-none pb-[env(safe-area-inset-bottom)] md:hidden",children:b.jsxs("div",{className:"pointer-events-auto relative w-full max-w-md px-4 pb-2",children:[b.jsxs("div",{className:"absolute bottom-24 right-6 z-50 flex flex-col items-center gap-4",children:[b.jsxs("div",{className:"flex flex-col items-center gap-1 animate-in fade-in slide-in-from-bottom-8 duration-1000 delay-150",children:[b.jsx("div",{className:"px-2 py-0.5 bg-violet-600 dark:bg-violet-500 rounded-full shadow-lg border border-white/20",children:b.jsx("span",{className:"text-[6px] font-black text-white uppercase tracking-[0.2em]",children:"Live Chat"})}),b.jsxs("button",{onClick:()=>e(X.ADVISOR),className:"w-11 h-11 rounded-2xl bg-gradient-to-br from-violet-600 via-indigo-600 to-purple-700 text-white shadow-xl flex items-center justify-center border-2 border-white/20 active:scale-90 transition-all duration-300 hover:-translate-y-1 group relative overflow-hidden",children:[b.jsx("div",{className:"absolute inset-0 bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity"}),b.jsx(c2,{className:"w-5 h-5 relative z-10 drop-shadow-md animate-pulse"})]})]}),!r&&b.jsxs("div",{className:"flex flex-col items-center gap-1 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[b.jsx("div",{className:"px-2.5 py-0.5 bg-indigo-600 dark:bg-indigo-500 rounded-full shadow-lg shadow-indigo-500/30 border border-white/20 animate-bounce",children:b.jsx("span",{className:"text-[7px] font-black text-white uppercase tracking-[0.2em]",children:"Scan QR"})}),b.jsxs("button",{onClick:()=>e(X.SCANNER),className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-indigo-600 via-blue-600 to-indigo-700 text-white shadow-[0_10px_20px_rgba(79,70,229,0.4)] flex items-center justify-center border-2 border-white/20 active:scale-90 transition-all duration-300 hover:-translate-y-1 group overflow-hidden",children:[b.jsx("div",{className:"absolute inset-0 bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity"}),b.jsx(D5,{className:"w-5 h-5 relative z-10 drop-shadow-md"})]})]})]}),b.jsx("nav",{className:"bg-white/95 dark:bg-[#0F172A]/95 backdrop-blur-2xl border border-white/40 dark:border-slate-800/60 rounded-[2rem] shadow-[0_15px_40px_rgba(0,0,0,0.15)] dark:shadow-[0_20px_50px_rgba(0,0,0,0.4)] flex justify-between items-center px-2 py-2 ring-1 ring-black/5",children:a.map(l=>{const c=n===l.view,d=l.icon;return b.jsxs("button",{onClick:()=>l.view&&e(l.view),className:`relative flex-1 flex flex-col items-center justify-center gap-0.5 transition-all duration-500 group active:scale-90 ${c?"text-indigo-600 dark:text-indigo-400":"text-slate-400 dark:text-slate-500"}`,children:[b.jsxs("div",{className:`relative p-2 rounded-xl transition-all duration-500 ${c?"bg-indigo-50 dark:bg-indigo-500/10 -translate-y-1 shadow-inner":"group-hover:bg-slate-50 dark:group-hover:bg-slate-800/50"}`,children:[b.jsx(d,{className:`w-5 h-5 transition-all duration-500 ${c?"stroke-[2.5px] scale-110":"stroke-[1.5px]"}`}),c&&b.jsxs("span",{className:"absolute -top-0.5 -right-0.5 flex h-1.5 w-1.5",children:[b.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-indigo-400 opacity-75"}),b.jsx("span",{className:"relative inline-flex rounded-full h-1.5 w-1.5 bg-indigo-600 dark:bg-indigo-400"})]})]}),b.jsx("span",{className:`text-[7px] font-black uppercase tracking-widest transition-all duration-500 ${c?"opacity-100 scale-100":"opacity-60 scale-95 group-hover:opacity-100"}`,children:l.label}),c&&b.jsx("div",{className:"absolute -bottom-0.5 w-4 h-0.5 bg-indigo-600 dark:bg-indigo-400 rounded-full blur-[1px]"})]},l.id)})})]})})},M5=({currentView:n,onNavigate:e,userRole:t=Me.GURU,onLogout:r,onClose:a})=>{const l=[{label:"Beranda",icon:z_,view:X.DASHBOARD},{label:"Profil madrasah",icon:nT,view:X.MADRASAH_INFO},{label:"Data siswa",icon:A5,view:X.STUDENTS},{label:"Data guru",icon:C5,view:X.TEACHERS},{label:"Data kelas",icon:rT,view:X.CLASSES},{label:"Jadwal pelajaran",icon:f2,view:X.SCHEDULE},{label:"Jurnal mengajar",icon:rT,view:X.JOURNAL},{label:"Tugas & PR",icon:p2,view:X.ASSIGNMENTS},{label:"Rapor digital",icon:I5,view:X.REPORT_CARDS},{label:"Scan QR presensi",icon:tT,view:X.SCANNER,roles:[Me.ADMIN,Me.DEVELOPER,Me.GURU,Me.STAF_TU,Me.WALI_KELAS,Me.KEPALA_MADRASAH]},{label:"Input presensi",icon:tT,view:X.PRESENSI,roles:[Me.ADMIN,Me.DEVELOPER,Me.GURU,Me.STAF_TU]},{label:"Riwayat absen",icon:b5,view:X.ATTENDANCE_HISTORY},{label:"Layanan kemenag",icon:nT,view:X.KEMENAG_HUB},{label:"Live chat bantuan",icon:c2,view:X.ADVISOR},{label:"Alat bantu guru AI",icon:R5,view:X.CONTENT_GENERATION,roles:[Me.ADMIN,Me.DEVELOPER,Me.GURU,Me.WALI_KELAS]},{label:"Layanan surat",icon:S5,view:X.LETTERS},{label:"Laporan cetak",icon:d2,view:X.REPORTS,roles:[Me.ADMIN,Me.DEVELOPER,Me.KEPALA_MADRASAH]},{label:"Profil saya",icon:h2,view:X.PROFILE},{label:"Manajemen klaim",icon:m2,view:X.CLAIM_MANAGEMENT,roles:[Me.ADMIN,Me.DEVELOPER]},{label:"Manajemen user",icon:P5,view:X.CREATE_ACCOUNT,roles:[Me.ADMIN,Me.DEVELOPER]},{label:"Developer console",icon:O5,view:X.DEVELOPER,roles:[Me.DEVELOPER]},{label:"Pengaturan sistem",icon:k5,view:X.SETTINGS},{label:"Tentang aplikasi",icon:N5,view:X.ABOUT}],c=Pi.useMemo(()=>l.filter(d=>d.roles?d.roles.includes(t):!0),[t]);return b.jsxs("div",{className:"h-full w-full bg-white dark:bg-[#0B1121] flex flex-col relative overflow-hidden",children:[b.jsxs("div",{className:"p-4 pt-6 pb-4 flex items-center justify-between shrink-0",children:[b.jsxs("div",{className:"flex items-center gap-2.5",children:[b.jsx(F_,{className:"w-9 h-9"}),b.jsxs("div",{children:[b.jsx("h1",{className:"font-black text-slate-900 dark:text-white text-lg leading-none",children:"IMAM"}),b.jsx("p",{className:"text-[7px] font-bold text-slate-400 mt-1",children:"MAN 1 Hulu Sungai Tengah"})]})]}),a&&b.jsx("button",{onClick:a,className:"p-1.5 rounded-lg bg-slate-50 dark:bg-slate-800 text-slate-400 border border-slate-100 dark:border-slate-700",children:b.jsx(v5,{className:"w-4 h-4"})})]}),b.jsx("div",{className:"flex-1 overflow-y-auto px-3 py-2 space-y-0.5 scrollbar-hide",children:c.map((d,m)=>b.jsxs("button",{onClick:()=>{d.url?window.open(d.url,"_blank"):d.view&&e(d.view),a&&a()},className:`w-full flex items-center gap-2.5 px-3 py-1.5 rounded-xl transition-all ${!d.url&&n===d.view?"bg-indigo-600 text-white shadow-md":"text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800/50"}`,children:[b.jsx(d.icon,{className:`w-3.5 h-3.5 ${!d.url&&n===d.view?"text-white":"text-slate-400 dark:text-slate-500"}`}),b.jsx("span",{className:"text-[10.5px] font-bold text-left tracking-tight flex-1",children:d.label})]},m))}),b.jsx("div",{className:"p-2 border-t border-slate-100 dark:border-slate-800 mt-auto bg-slate-50/50 dark:bg-slate-900/50",children:b.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 rounded-xl bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-700 shadow-sm cursor-pointer",onClick:()=>e(X.PROFILE),children:[b.jsx("div",{className:"w-7 h-7 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center font-black text-[10px] text-indigo-600",children:(t||"G").charAt(0).toUpperCase()}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsx("p",{className:"text-[10px] font-bold text-slate-800 dark:text-white truncate",children:"Profil akun"}),b.jsx("p",{className:"text-[8px] text-slate-400 font-medium truncate",children:t||"-"})]}),r&&b.jsx("button",{onClick:d=>{d.stopPropagation(),r()},className:"p-1 text-slate-300 hover:text-red-500 transition-colors",children:b.jsx(x5,{className:"w-3.5 h-3.5"})})]})})]})},ki=({children:n,userRole:e,allowedRoles:t,onBack:r})=>t.includes(e)?b.jsx(b.Fragment,{children:n}):b.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] dark:bg-slate-900 transition-colors",children:[b.jsx("div",{className:"bg-white dark:bg-slate-800 shadow-sm p-4 pt-8 flex items-center justify-center z-10 border-b border-slate-100 dark:border-slate-700",children:b.jsxs("h2",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:["IMAM Security",b.jsx(m2,{className:"w-5 h-5 text-indigo-500"})]})}),b.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center animate-in fade-in zoom-in duration-300",children:[b.jsx("div",{className:"w-24 h-24 bg-red-50 dark:bg-red-900/20 rounded-full flex items-center justify-center mb-6 ring-8 ring-red-50/50 dark:ring-red-900/10",children:b.jsx(T5,{className:"w-10 h-10 text-red-500"})}),b.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"Akses Ditolak"}),b.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm max-w-xs leading-relaxed mb-8",children:["Maaf, peran Anda ",b.jsxs("strong",{children:["(",e,")"]})," tidak memiliki izin untuk mengakses halaman ini."]}),b.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 text-white rounded-2xl font-bold text-sm hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-200 dark:shadow-none active:scale-95",children:[b.jsx(z_,{className:"w-4 h-4"}),"Kembali ke Dashboard"]})]})]});u2();function L5(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}Array(12).fill(0);let e_=1;class U5{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:r,...a}=e,l=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:e_++,c=this.toasts.find(m=>m.id===l),d=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(l)&&this.dismissedToasts.delete(l),c?this.toasts=this.toasts.map(m=>m.id===l?(this.publish({...m,...e,id:l,title:r}),{...m,...e,id:l,dismissible:d,title:r}):m):this.addToast({title:r,...a,dismissible:d,id:l}),l},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const a=Promise.resolve(e instanceof Function?e():e);let l=r!==void 0,c;const d=a.then(async g=>{if(c=["resolve",g],Ne.isValidElement(g))l=!1,this.create({id:r,type:"default",message:g});else if(j5(g)&&!g.ok){l=!1;const T=typeof t.error=="function"?await t.error(`HTTP error! status: ${g.status}`):t.error,I=typeof t.description=="function"?await t.description(`HTTP error! status: ${g.status}`):t.description,Q=typeof T=="object"&&!Ne.isValidElement(T)?T:{message:T};this.create({id:r,type:"error",description:I,...Q})}else if(g instanceof Error){l=!1;const T=typeof t.error=="function"?await t.error(g):t.error,I=typeof t.description=="function"?await t.description(g):t.description,Q=typeof T=="object"&&!Ne.isValidElement(T)?T:{message:T};this.create({id:r,type:"error",description:I,...Q})}else if(t.success!==void 0){l=!1;const T=typeof t.success=="function"?await t.success(g):t.success,I=typeof t.description=="function"?await t.description(g):t.description,Q=typeof T=="object"&&!Ne.isValidElement(T)?T:{message:T};this.create({id:r,type:"success",description:I,...Q})}}).catch(async g=>{if(c=["reject",g],t.error!==void 0){l=!1;const v=typeof t.error=="function"?await t.error(g):t.error,T=typeof t.description=="function"?await t.description(g):t.description,N=typeof v=="object"&&!Ne.isValidElement(v)?v:{message:v};this.create({id:r,type:"error",description:T,...N})}}).finally(()=>{l&&(this.dismiss(r),r=void 0),t.finally==null||t.finally.call(t)}),m=()=>new Promise((g,v)=>d.then(()=>c[0]==="reject"?v(c[1]):g(c[1])).catch(v));return typeof r!="string"&&typeof r!="number"?{unwrap:m}:Object.assign(r,{unwrap:m})},this.custom=(e,t)=>{const r=(t==null?void 0:t.id)||e_++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Ti=new U5,B5=(n,e)=>{const t=(e==null?void 0:e.id)||e_++;return Ti.addToast({title:n,...e,id:t}),t},j5=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",z5=B5,F5=()=>Ti.toasts,q5=()=>Ti.getActiveToasts(),sT=Object.assign(z5,{success:Ti.success,info:Ti.info,warning:Ti.warning,error:Ti.error,custom:Ti.custom,message:Ti.message,promise:Ti.promise,dismiss:Ti.dismiss,loading:Ti.loading},{getHistory:F5,getToasts:q5});L5("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");var aT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},G5=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const a=n[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],d=n[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},_2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,d=c?n[a+1]:0,m=a+2<n.length,g=m?n[a+2]:0,v=l>>2,T=(l&3)<<4|d>>4;let I=(d&15)<<2|g>>6,N=g&63;m||(N=64,c||(I=64)),r.push(t[v],t[T],t[I],t[N])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(g2(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):G5(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],d=a<n.length?t[n.charAt(a)]:0;++a;const g=a<n.length?t[n.charAt(a)]:64;++a;const T=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||d==null||g==null||T==null)throw new H5;const I=l<<2|d>>4;if(r.push(I),g!==64){const N=d<<4&240|g>>2;if(r.push(N),T!==64){const Q=g<<6&192|T;r.push(Q)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class H5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const K5=function(n){const e=g2(n);return _2.encodeByteArray(e,!0)},vf=function(n){return K5(n).replace(/\./g,"")},y2=function(n){try{return _2.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Ef(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Q5(t)||(n[t]=Ef(n[t],e[t]));return n}function Q5(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y5=()=>v2().__FIREBASE_DEFAULTS__,W5=()=>{if(typeof process>"u"||typeof aT>"u")return;const n=aT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},$5=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&y2(n[1]);return e&&JSON.parse(e)},q_=()=>{try{return Y5()||W5()||$5()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},E2=()=>{var n;return(n=q_())===null||n===void 0?void 0:n.config},X5=n=>{var e;return(e=q_())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J5(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[vf(JSON.stringify(t)),vf(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function G_(){var n;const e=(n=q_())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tC(){return typeof window<"u"||T2()}function T2(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function nC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zf(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function H_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function w2(){const n=Tt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function A2(){return!G_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function to(){try{return typeof indexedDB=="object"}catch{return!1}}function K_(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}function I2(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="FirebaseError";class gn extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=iC,Object.setPrototypeOf(this,gn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gr.prototype.create)}}class Gr{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?rC(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new gn(a,d,r)}}function rC(n,e){return n.replace(sC,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const sC=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function aC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function kc(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=n[a],c=e[a];if(lT(l)&&lT(c)){if(!kc(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function lT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function wl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function gc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function b2(n,e){const t=new oC(n,e);return t.subscribe.bind(t)}class oC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");lC(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Pg),a.error===void 0&&(a.error=Pg),a.complete===void 0&&(a.complete=Pg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lC(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Pg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=1e3,cC=2,hC=14400*1e3,dC=.5;function uT(n,e=uC,t=cC){const r=e*Math.pow(t,n),a=Math.round(dC*r*(Math.random()-.5)*2);return Math.min(hC,r+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(n){return n&&n._delegate?n._delegate:n}class Mn{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Z5;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pC(e))try{this.getOrInitializeService({instanceIdentifier:za})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=za){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=za){return this.instances.has(e)}getOptions(e=za){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(e,t){var r;const a=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mC(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=za){return this.component?this.component.multipleInstances?e:za:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mC(n){return n===za?void 0:n}function pC(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new fC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_=[];var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const R2={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},gC=Le.INFO,_C={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},yC=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),a=_C[e];if(a)console[a](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class nh{constructor(e){this.name=e,this._logLevel=gC,this._logHandler=yC,this._userLogHandler=null,Q_.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?R2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}function vC(n){Q_.forEach(e=>{e.setLogLevel(n)})}function EC(n,e){for(const t of Q_){let r=null;e&&e.level&&(r=R2[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(a,l,...c)=>{const d=c.map(m=>{if(m==null)return null;if(typeof m=="string")return m;if(typeof m=="number"||typeof m=="boolean")return m.toString();if(m instanceof Error)return m.message;try{return JSON.stringify(m)}catch{return null}}).filter(m=>m).join(" ");l>=(r??a.logLevel)&&n({level:Le[l].toLowerCase(),message:d,args:c,type:a.name})}}}const TC=(n,e)=>e.some(t=>n instanceof t);let cT,hT;function wC(){return cT||(cT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AC(){return hT||(hT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const C2=new WeakMap,t_=new WeakMap,D2=new WeakMap,Vg=new WeakMap,Y_=new WeakMap;function IC(n){const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Ks(n.result)),a()},c=()=>{r(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&C2.set(t,n)}).catch(()=>{}),Y_.set(e,n),e}function bC(n){if(t_.has(n))return;const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});t_.set(n,e)}let n_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return t_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||D2.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ks(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function SC(n){n_=n(n_)}function RC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Mg(this),e,...t);return D2.set(r,e.sort?e.sort():[e]),Ks(r)}:AC().includes(n)?function(...e){return n.apply(Mg(this),e),Ks(C2.get(this))}:function(...e){return Ks(n.apply(Mg(this),e))}}function CC(n){return typeof n=="function"?RC(n):(n instanceof IDBTransaction&&bC(n),TC(n,wC())?new Proxy(n,n_):n)}function Ks(n){if(n instanceof IDBRequest)return IC(n);if(Vg.has(n))return Vg.get(n);const e=CC(n);return e!==n&&(Vg.set(n,e),Y_.set(e,n)),e}const Mg=n=>Y_.get(n);function x2(n,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),d=Ks(c);return r&&c.addEventListener("upgradeneeded",m=>{r(Ks(c.result),m.oldVersion,m.newVersion,Ks(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const DC=["get","getKey","getAll","getAllKeys","count"],xC=["put","add","delete","clear"],Lg=new Map;function dT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Lg.get(e))return Lg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=xC.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||DC.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,a?"readwrite":"readonly");let g=m.store;return r&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&m.done]))[0]};return Lg.set(e,l),l}SC(n=>({...n,get:(e,t,r)=>dT(e,t)||n.get(e,t,r),has:(e,t)=>!!dT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(OC(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function OC(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Tf="@firebase/app",i_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr=new nh("@firebase/app"),kC="@firebase/app-compat",PC="@firebase/analytics-compat",VC="@firebase/analytics",MC="@firebase/app-check-compat",LC="@firebase/app-check",UC="@firebase/auth",BC="@firebase/auth-compat",jC="@firebase/database",zC="@firebase/data-connect",FC="@firebase/database-compat",qC="@firebase/functions",GC="@firebase/functions-compat",HC="@firebase/installations",KC="@firebase/installations-compat",QC="@firebase/messaging",YC="@firebase/messaging-compat",WC="@firebase/performance",$C="@firebase/performance-compat",XC="@firebase/remote-config",ZC="@firebase/remote-config-compat",JC="@firebase/storage",eD="@firebase/storage-compat",tD="@firebase/firestore",nD="@firebase/vertexai-preview",iD="@firebase/firestore-compat",rD="firebase",sD="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="[DEFAULT]",aD={[Tf]:"fire-core",[kC]:"fire-core-compat",[VC]:"fire-analytics",[PC]:"fire-analytics-compat",[LC]:"fire-app-check",[MC]:"fire-app-check-compat",[UC]:"fire-auth",[BC]:"fire-auth-compat",[jC]:"fire-rtdb",[zC]:"fire-data-connect",[FC]:"fire-rtdb-compat",[qC]:"fire-fn",[GC]:"fire-fn-compat",[HC]:"fire-iid",[KC]:"fire-iid-compat",[QC]:"fire-fcm",[YC]:"fire-fcm-compat",[WC]:"fire-perf",[$C]:"fire-perf-compat",[XC]:"fire-rc",[ZC]:"fire-rc-compat",[JC]:"fire-gcs",[eD]:"fire-gcs-compat",[tD]:"fire-fst",[iD]:"fire-fst-compat",[nD]:"fire-vertex","fire-js":"fire-js",[rD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=new Map,xl=new Map,Nl=new Map;function Pc(n,e){try{n.container.addComponent(e)}catch(t){jr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function N2(n,e){n.container.addOrOverwriteComponent(e)}function Ii(n){const e=n.name;if(Nl.has(e))return jr.debug(`There were multiple attempts to register component ${e}.`),!1;Nl.set(e,n);for(const t of Ws.values())Pc(t,n);for(const t of xl.values())Pc(t,n);return!0}function Ff(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function oD(n,e,t=Ys){Ff(n,e).clearInstance(t)}function O2(n){return n.options!==void 0}function Rt(n){return n.settings!==void 0}function lD(){Nl.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ai=new Gr("app","Firebase",uD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k2=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ai.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD extends k2{constructor(e,t,r,a){const l=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,c={name:r,automaticDataCollectionEnabled:l};if(e.apiKey!==void 0)super(e,c,a);else{const d=e;super(d.options,c,a)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:l},t),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,kn(Tf,i_,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){$_(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ai.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=sD;function W_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ys,automaticDataCollectionEnabled:!1},e),a=r.name;if(typeof a!="string"||!a)throw Ai.create("bad-app-name",{appName:String(a)});if(t||(t=E2()),!t)throw Ai.create("no-options");const l=Ws.get(a);if(l){if(kc(t,l.options)&&kc(r,l.config))return l;throw Ai.create("duplicate-app",{appName:a})}const c=new S2(a);for(const m of Nl.values())c.addComponent(m);const d=new k2(t,r,c);return Ws.set(a,d),d}function hD(n,e){if(tC()&&!T2())throw Ai.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;O2(n)?t=n.options:t=n;const r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const a=g=>[...g].reduce((v,T)=>Math.imul(31,v)+T.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Ai.create("finalization-registry-not-supported",{});const l=""+a(JSON.stringify(r)),c=xl.get(l);if(c)return c.incRefCount(e.releaseOnDeref),c;const d=new S2(l);for(const g of Nl.values())d.addComponent(g);const m=new cD(t,e,l,d);return xl.set(l,m),m}function dD(n=Ys){const e=Ws.get(n);if(!e&&n===Ys&&E2())return W_();if(!e)throw Ai.create("no-app",{appName:n});return e}function fD(){return Array.from(Ws.values())}async function $_(n){let e=!1;const t=n.name;Ws.has(t)?(e=!0,Ws.delete(t)):xl.has(t)&&n.decRefCount()<=0&&(xl.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function kn(n,e,t){var r;let a=(r=aD[n])!==null&&r!==void 0?r:n;t&&(a+=`-${t}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jr.warn(d.join(" "));return}Ii(new Mn(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}function P2(n,e){if(n!==null&&typeof n!="function")throw Ai.create("invalid-log-argument");EC(n,e)}function V2(n){vC(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD="firebase-heartbeat-database",pD=1,Vc="firebase-heartbeat-store";let Ug=null;function M2(){return Ug||(Ug=x2(mD,pD,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Vc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ai.create("idb-open",{originalErrorMessage:n.message})})),Ug}async function gD(n){try{const t=(await M2()).transaction(Vc),r=await t.objectStore(Vc).get(L2(n));return await t.done,r}catch(e){if(e instanceof gn)jr.warn(e.message);else{const t=Ai.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});jr.warn(t.message)}}}async function fT(n,e){try{const r=(await M2()).transaction(Vc,"readwrite");await r.objectStore(Vc).put(e,L2(n)),await r.done}catch(t){if(t instanceof gn)jr.warn(t.message);else{const r=Ai.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});jr.warn(r.message)}}}function L2(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=1024,yD=720*60*60*1e3;class vD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new TD(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=mT();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const d=new Date(c.date).valueOf();return Date.now()-d<=yD}),this._storage.overwrite(this._heartbeatsCache))}catch(r){jr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=mT(),{heartbeatsToSend:r,unsentEntries:a}=ED(this._heartbeatsCache.heartbeats),l=vf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return jr.warn(t),""}}}function mT(){return new Date().toISOString().substring(0,10)}function ED(n,e=_D){const t=[];let r=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),pT(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),pT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class TD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return to()?K_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await gD(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return fT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return fT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function pT(n){return vf(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(n){Ii(new Mn("platform-logger",e=>new NC(e),"PRIVATE")),Ii(new Mn("heartbeat",e=>new vD(e),"PRIVATE")),kn(Tf,i_,n),kn(Tf,i_,"esm2017"),kn("fire-js","")}wD("");const AD=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:gn,SDK_VERSION:ra,_DEFAULT_ENTRY_NAME:Ys,_addComponent:Pc,_addOrOverwriteComponent:N2,_apps:Ws,_clearComponents:lD,_components:Nl,_getProvider:Ff,_isFirebaseApp:O2,_isFirebaseServerApp:Rt,_registerComponent:Ii,_removeServiceInstance:oD,_serverApps:xl,deleteApp:$_,getApp:dD,getApps:fD,initializeApp:W_,initializeServerApp:hD,onLog:P2,registerVersion:kn,setLogLevel:V2},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,t){this._delegate=e,this.firebase=t,Pc(e,new Mn("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),$_(this._delegate)))}_getService(e,t=Ys){var r;this._delegate.checkDestroyed();const a=this._delegate.container.getProvider(e);return!a.isInitialized()&&((r=a.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&a.initialize(),a.getImmediate({identifier:t})}_removeServiceInstance(e,t=Ys){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Pc(this._delegate,e)}_addOrOverwriteComponent(e){N2(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},gT=new Gr("app-compat","Firebase",bD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(n){const e={},t={__esModule:!0,initializeApp:l,app:a,registerVersion:kn,setLogLevel:V2,onLog:P2,apps:null,SDK_VERSION:ra,INTERNAL:{registerComponent:d,removeApp:r,useAsService:m,modularAPIs:AD}};t.default=t,Object.defineProperty(t,"apps",{get:c});function r(g){delete e[g]}function a(g){if(g=g||Ys,!oT(e,g))throw gT.create("no-app",{appName:g});return e[g]}a.App=n;function l(g,v={}){const T=W_(g,v);if(oT(e,T.name))return e[T.name];const I=new n(T,t);return e[T.name]=I,I}function c(){return Object.keys(e).map(g=>e[g])}function d(g){const v=g.name,T=v.replace("-compat","");if(Ii(g)&&g.type==="PUBLIC"){const I=(N=a())=>{if(typeof N[T]!="function")throw gT.create("invalid-app-argument",{appName:v});return N[T]()};g.serviceProps!==void 0&&Ef(I,g.serviceProps),t[T]=I,n.prototype[T]=function(...N){return this._getService.bind(this,v).apply(this,g.multipleInstances?N:[])}}return g.type==="PUBLIC"?t[T]:null}function m(g,v){return v==="serverAuth"?null:v}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(){const n=SD(ID);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:U2,extendNamespace:e,createSubscribe:b2,ErrorFactory:Gr,deepExtend:Ef});function e(t){Ef(n,t)}return n}const RD=U2();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T=new nh("@firebase/app-compat"),CD="@firebase/app-compat",DD="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(n){kn(CD,DD,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=v2();if(n.firebase!==void 0){_T.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&_T.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Nn=RD;xD();var ND="firebase",OD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn.registerVersion(ND,OD,"app-compat");function X_(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(n);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(n,r[a])&&(t[r[a]]=n[r[a]]);return t}const lc={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},dl={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function B2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const PD=kD,VD=B2,j2=new Gr("auth","Firebase",B2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf=new nh("@firebase/auth");function MD(n,...e){wf.logLevel<=Le.WARN&&wf.warn(`Auth (${ra}): ${n}`,...e)}function af(n,...e){wf.logLevel<=Le.ERROR&&wf.error(`Auth (${ra}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(n,...e){throw J_(n,...e)}function Yt(n,...e){return J_(n,...e)}function Z_(n,e,t){const r=Object.assign(Object.assign({},VD()),{[e]:t});return new Gr("auth","Firebase",r).create(e,{appName:n.name})}function rn(n){return Z_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Yl(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&yn(n,"argument-error"),Z_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function J_(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return j2.create(n,...e)}function re(n,e,...t){if(!n)throw J_(e,...t)}function Ji(n){const e="INTERNAL ASSERTION FAILED: "+n;throw af(e),new Error(e)}function Vi(n,e){n||Ji(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function ey(){return yT()==="http:"||yT()==="https:"}function yT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ey()||zf()||"connection"in navigator)?navigator.onLine:!0}function UD(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vi(t>e,"Short delay should be less than long delay!"),this.isMobile=eC()||H_()}get(){return LD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(n,e){Vi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ji("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ji("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ji("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD=new ih(3e4,6e4);function xt(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Nt(n,e,t,r,a={}){return F2(n,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const d=Ql(Object.assign({key:n.config.apiKey},c)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g=Object.assign({method:e,headers:m},l);return nC()||(g.referrerPolicy="no-referrer"),z2.fetch()(q2(n,n.config.apiHost,t,d),g)})}async function F2(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},BD),e);try{const a=new FD(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw _c(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[m,g]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw _c(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw _c(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw _c(n,"user-disabled",c);const v=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Z_(n,v,g);yn(n,v)}}catch(a){if(a instanceof gn)throw a;yn(n,"network-request-failed",{message:String(a)})}}async function Hr(n,e,t,r,a={}){const l=await Nt(n,e,t,r,a);return"mfaPendingCredential"in l&&yn(n,"multi-factor-auth-required",{_serverResponse:l}),l}function q2(n,e,t,r){const a=`${e}${t}?${r}`;return n.config.emulator?ty(n.config,a):`${n.config.apiScheme}://${a}`}function zD(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class FD{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Yt(this.auth,"network-request-failed")),jD.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _c(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=Yt(n,e,r);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(n){return n!==void 0&&n.getResponse!==void 0}function ET(n){return n!==void 0&&n.enterprise!==void 0}class qD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return zD(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GD(n){return(await Nt(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function HD(n,e){return Nt(n,"GET","/v2/recaptchaConfig",xt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KD(n,e){return Nt(n,"POST","/v1/accounts:delete",e)}async function QD(n,e){return Nt(n,"POST","/v1/accounts:update",e)}async function G2(n,e){return Nt(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function YD(n,e=!1){const t=ve(n),r=await t.getIdToken(e),a=qf(r);re(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:r,authTime:Ac(Bg(a.auth_time)),issuedAtTime:Ac(Bg(a.iat)),expirationTime:Ac(Bg(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Bg(n){return Number(n)*1e3}function qf(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return af("JWT malformed, contained fewer than 3 sections"),null;try{const a=y2(t);return a?JSON.parse(a):(af("Failed to decode base64 JWT payload"),null)}catch(a){return af("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function TT(n){const e=qf(n);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zr(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof gn&&WD(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function WD({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ac(this.lastLoginAt),this.creationTime=Ac(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lc(n){var e;const t=n.auth,r=await n.getIdToken(),a=await zr(n,G2(t,{idToken:r}));re(a==null?void 0:a.users.length,t,"internal-error");const l=a.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?H2(l.providerUserInfo):[],d=ZD(n.providerData,c),m=n.isAnonymous,g=!(n.email&&l.passwordHash)&&!(d!=null&&d.length),v=m?g:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new r_(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(n,T)}async function XD(n){const e=ve(n);await Lc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ZD(n,e){return[...n.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function H2(n){return n.map(e=>{var{providerId:t}=e,r=X_(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JD(n,e){const t=await F2(n,{},async()=>{const r=Ql({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=q2(n,a,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",z2.fetch()(c,{method:"POST",headers:d,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ex(n,e){return Nt(n,"POST","/v2/accounts:revokeToken",xt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):TT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){re(e.length!==0,"internal-error");const t=TT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await JD(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,c=new Il;return r&&(re(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(re(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(re(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Il,this.toJSON())}_performRefresh(){return Ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(n,e){re(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Vr{constructor(e){var{uid:t,auth:r,stsTokenManager:a}=e,l=X_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $D(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new r_(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await zr(this,this.stsTokenManager.getToken(this.auth,e));return re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return YD(this,e)}reload(){return XD(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Vr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Lc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rt(this.auth.app))return Promise.reject(rn(this.auth));const e=await this.getIdToken();return await zr(this,KD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,a,l,c,d,m,g,v;const T=(r=t.displayName)!==null&&r!==void 0?r:void 0,I=(a=t.email)!==null&&a!==void 0?a:void 0,N=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,Q=(c=t.photoURL)!==null&&c!==void 0?c:void 0,ee=(d=t.tenantId)!==null&&d!==void 0?d:void 0,Z=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,te=(g=t.createdAt)!==null&&g!==void 0?g:void 0,me=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:ce,emailVerified:Ae,isAnonymous:Re,providerData:Te,stsTokenManager:R}=t;re(ce&&R,e,"internal-error");const S=Il.fromJSON(this.name,R);re(typeof ce=="string",e,"internal-error"),Us(T,e.name),Us(I,e.name),re(typeof Ae=="boolean",e,"internal-error"),re(typeof Re=="boolean",e,"internal-error"),Us(N,e.name),Us(Q,e.name),Us(ee,e.name),Us(Z,e.name),Us(te,e.name),Us(me,e.name);const C=new Vr({uid:ce,auth:e,email:I,emailVerified:Ae,displayName:T,isAnonymous:Re,photoURL:Q,phoneNumber:N,tenantId:ee,stsTokenManager:S,createdAt:te,lastLoginAt:me});return Te&&Array.isArray(Te)&&(C.providerData=Te.map(P=>Object.assign({},P))),Z&&(C._redirectEventId=Z),C}static async _fromIdTokenResponse(e,t,r=!1){const a=new Il;a.updateFromServerResponse(t);const l=new Vr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await Lc(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];re(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?H2(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),d=new Il;d.updateFromIdToken(r);const m=new Vr({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new r_(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT=new Map;function ai(n){Vi(n instanceof Function,"Expected a class definition");let e=wT.get(n);return e?(Vi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,wT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}K2.type="NONE";const Ol=K2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(n,e,t){return`firebase:${n}:${e}:${t}`}class bl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=Za(this.userKey,a.apiKey,l),this.fullPersistenceKey=Za("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Vr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new bl(ai(Ol),e,r);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||ai(Ol);const c=Za(r,e.config.apiKey,e.name);let d=null;for(const g of t)try{const v=await g._get(c);if(v){const T=Vr._fromJSON(e,v);g!==l&&(d=T),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new bl(l,e,r):(l=m[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new bl(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Q2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(X2(e))return"Blackberry";if(Z2(e))return"Webos";if(Y2(e))return"Safari";if((e.includes("chrome/")||W2(e))&&!e.includes("edge/"))return"Chrome";if(rh(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Q2(n=Tt()){return/firefox\//i.test(n)}function Y2(n=Tt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function W2(n=Tt()){return/crios\//i.test(n)}function $2(n=Tt()){return/iemobile/i.test(n)}function rh(n=Tt()){return/android/i.test(n)}function X2(n=Tt()){return/blackberry/i.test(n)}function Z2(n=Tt()){return/webos/i.test(n)}function sh(n=Tt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function tx(n=Tt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function nx(n=Tt()){var e;return sh(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ix(){return w2()&&document.documentMode===10}function J2(n=Tt()){return sh(n)||rh(n)||Z2(n)||X2(n)||/windows phone/i.test(n)||$2(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(n,e=[]){let t;switch(n){case"Browser":t=AT(Tt());break;case"Worker":t=`${AT(Tt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ra}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,d)=>{try{const m=e(l);c(m)}catch(m){d(m)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sx(n,e={}){return Nt(n,"GET","/v2/passwordPolicy",xt(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=6;class ox{constructor(e){var t,r,a,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:ax,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,a,l,c,d;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(r=m.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),m.isValid&&(m.isValid=(a=m.containsLowercaseLetter)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(c=m.containsNumericCharacter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(d=m.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),m}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new IT(this),this.idTokenSubscription=new IT(this),this.beforeStateQueue=new rx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=j2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ai(t)),this._initializationPromise=this.queue(async()=>{var r,a;if(!this._deleted&&(this.persistenceManager=await bl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await G2(this,{idToken:e}),r=await Vr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Rt(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=a==null?void 0:a._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===d)&&(m!=null&&m.user)&&(a=m.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Lc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=UD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rt(this.app))return Promise.reject(rn(this));const t=e?ve(e):null;return t&&re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rt(this.app)?Promise.reject(rn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rt(this.app)?Promise.reject(rn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ai(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sx(this),t=new ox(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Gr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await ex(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ai(e)||this._popupRedirectResolver;re(t,this,"argument-error"),this.redirectPersistenceManager=await bl.create(this,[ai(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&MD(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ct(n){return ve(n)}class IT{constructor(e){this.auth=e,this.observer=null,this.addObserver=b2(t=>this.observer=t)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ah={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ux(n){ah=n}function ny(n){return ah.loadJS(n)}function cx(){return ah.recaptchaV2Script}function hx(){return ah.recaptchaEnterpriseScript}function dx(){return ah.gapiScript}function tA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const fx="recaptcha-enterprise",mx="NO_RECAPTCHA";class px{constructor(e){this.type=fx,this.auth=Ct(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{HD(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new qD(m);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(m=>{d(m)})})}function a(l,c,d){const m=window.grecaptcha;ET(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(mx)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((l,c)=>{r(this.auth).then(d=>{if(!t&&ET(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=hx();m.length!==0&&(m+=d),ny(m).then(()=>{a(d,l,c)}).catch(g=>{c(g)})}}).catch(d=>{c(d)})})}}async function bT(n,e,t,r=!1){const a=new px(n);let l;try{l=await a.verify(t)}catch{l=await a.verify(t,!0)}const c=Object.assign({},e);return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Uc(n,e,t,r){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await bT(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await bT(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(l)})}function gx(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ai);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function _x(n,e,t){const r=Ct(n);re(r._canInitEmulator,r,"emulator-config-failed"),re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!!(t!=null&&t.disableWarnings),l=nA(e),{host:c,port:d}=yx(e),m=d===null?"":`:${d}`;r.config.emulator={url:`${l}//${c}${m}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})}),a||vx()}function nA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function yx(n){const e=nA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:ST(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:ST(c)}}}function ST(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function vx(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ji("not implemented")}_getIdTokenResponse(e){return Ji("not implemented")}_linkToIdToken(e,t){return Ji("not implemented")}_getReauthenticationResolver(e){return Ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iA(n,e){return Nt(n,"POST","/v1/accounts:resetPassword",xt(n,e))}async function Ex(n,e){return Nt(n,"POST","/v1/accounts:update",e)}async function Tx(n,e){return Nt(n,"POST","/v1/accounts:signUp",e)}async function wx(n,e){return Nt(n,"POST","/v1/accounts:update",xt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ax(n,e){return Hr(n,"POST","/v1/accounts:signInWithPassword",xt(n,e))}async function Gf(n,e){return Nt(n,"POST","/v1/accounts:sendOobCode",xt(n,e))}async function Ix(n,e){return Gf(n,e)}async function bx(n,e){return Gf(n,e)}async function Sx(n,e){return Gf(n,e)}async function Rx(n,e){return Gf(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cx(n,e){return Hr(n,"POST","/v1/accounts:signInWithEmailLink",xt(n,e))}async function Dx(n,e){return Hr(n,"POST","/v1/accounts:signInWithEmailLink",xt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc extends Wl{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Bc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Bc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uc(e,t,"signInWithPassword",Ax);case"emailLink":return Cx(e,{email:this._email,oobCode:this._password});default:yn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uc(e,r,"signUpPassword",Tx);case"emailLink":return Dx(e,{idToken:t,email:this._email,oobCode:this._password});default:yn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ur(n,e){return Hr(n,"POST","/v1/accounts:signInWithIdp",xt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx="http://localhost";class rr extends Wl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new rr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):yn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a}=t,l=X_(t,["providerId","signInMethod"]);if(!r||!a)return null;const c=new rr(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Ur(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ur(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ur(e,t)}buildRequest(){const e={requestUri:xx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ql(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nx(n,e){return Nt(n,"POST","/v1/accounts:sendVerificationCode",xt(n,e))}async function Ox(n,e){return Hr(n,"POST","/v1/accounts:signInWithPhoneNumber",xt(n,e))}async function kx(n,e){const t=await Hr(n,"POST","/v1/accounts:signInWithPhoneNumber",xt(n,e));if(t.temporaryProof)throw _c(n,"account-exists-with-different-credential",t);return t}const Px={USER_NOT_FOUND:"user-not-found"};async function Vx(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Hr(n,"POST","/v1/accounts:signInWithPhoneNumber",xt(n,t),Px)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja extends Wl{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ja({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ja({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return Ox(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return kx(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return Vx(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:a}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:a}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:a,temporaryProof:l}=e;return!r&&!t&&!a&&!l?null:new Ja({verificationId:t,verificationCode:r,phoneNumber:a,temporaryProof:l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Lx(n){const e=wl(gc(n)).link,t=e?wl(gc(e)).deep_link_id:null,r=wl(gc(n)).deep_link_id;return(r?wl(gc(r)).link:null)||r||t||e||n}class Hf{constructor(e){var t,r,a,l,c,d;const m=wl(gc(e)),g=(t=m.apiKey)!==null&&t!==void 0?t:null,v=(r=m.oobCode)!==null&&r!==void 0?r:null,T=Mx((a=m.mode)!==null&&a!==void 0?a:null);re(g&&v&&T,"argument-error"),this.apiKey=g,this.operation=T,this.code=v,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=m.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(d=m.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=Lx(e);try{return new Hf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(){this.providerId=sa.PROVIDER_ID}static credential(e,t){return Bc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Hf.parseLink(t);return re(r,"argument-error"),Bc._fromEmailAndCode(e,r.code,r.tenantId)}}sa.PROVIDER_ID="password";sa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";sa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l extends Kr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Sl extends $l{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return re("providerId"in t&&"signInMethod"in t,"argument-error"),rr._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return re(e.idToken||e.accessToken,"argument-error"),rr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Sl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Sl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:a,pendingToken:l,nonce:c,providerId:d}=e;if(!r&&!a&&!t&&!l||!d)return null;try{return new Sl(d)._credential({idToken:t,accessToken:r,nonce:c,pendingToken:l})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends $l{constructor(){super("facebook.com")}static credential(e){return rr._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wi.credential(e.oauthAccessToken)}catch{return null}}}Wi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends $l{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return rr._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return $i.credential(t,r)}catch{return null}}}$i.GOOGLE_SIGN_IN_METHOD="google.com";$i.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends $l{constructor(){super("github.com")}static credential(e){return rr._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xi.credential(e.oauthAccessToken)}catch{return null}}}Xi.GITHUB_SIGN_IN_METHOD="github.com";Xi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="http://localhost";class kl extends Wl{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return Ur(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ur(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ur(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,pendingToken:l}=t;return!r||!a||!l||r!==a?null:new kl(r,l)}static _create(e,t){return new kl(e,t)}buildRequest(){return{requestUri:Ux,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx="saml.";class Af extends Kr{constructor(e){re(e.startsWith(Bx),"argument-error"),super(e)}static credentialFromResult(e){return Af.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Af.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=kl.fromJSON(e);return re(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return kl._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends $l{constructor(){super("twitter.com")}static credential(e,t){return rr._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Zi.credential(t,r)}catch{return null}}}Zi.TWITTER_SIGN_IN_METHOD="twitter.com";Zi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rA(n,e){return Hr(n,"POST","/v1/accounts:signUp",xt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await Vr._fromIdTokenResponse(e,r,a),c=RT(r);return new bi({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=RT(r);return new bi({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function RT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jx(n){var e;if(Rt(n.app))return Promise.reject(rn(n));const t=Ct(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new bi({user:t.currentUser,providerId:null,operationType:"signIn"});const r=await rA(t,{returnSecureToken:!0}),a=await bi._fromIdTokenResponse(t,"signIn",r,!0);return await t._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If extends gn{constructor(e,t,r,a){var l;super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,If.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new If(e,t,r,a)}}function sA(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?If._fromErrorAndOperation(n,l,e,r):l})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zx(n,e){const t=ve(n);await Kf(!0,t,e);const{providerUserInfo:r}=await QD(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),a=aA(r||[]);return t.providerData=t.providerData.filter(l=>a.has(l.providerId)),a.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function iy(n,e,t=!1){const r=await zr(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return bi._forOperation(n,"link",r)}async function Kf(n,e,t){await Lc(e);const r=aA(e.providerData),a=n===!1?"provider-already-linked":"no-such-provider";re(r.has(t)===n,e.auth,a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oA(n,e,t=!1){const{auth:r}=n;if(Rt(r.app))return Promise.reject(rn(r));const a="reauthenticate";try{const l=await zr(n,sA(r,a,e,n),t);re(l.idToken,r,"internal-error");const c=qf(l.idToken);re(c,r,"internal-error");const{sub:d}=c;return re(n.uid===d,r,"user-mismatch"),bi._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&yn(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lA(n,e,t=!1){if(Rt(n.app))return Promise.reject(rn(n));const r="signIn",a=await sA(n,r,e),l=await bi._fromIdTokenResponse(n,r,a);return t||await n._updateCurrentUser(l.user),l}async function Qf(n,e){return lA(Ct(n),e)}async function uA(n,e){const t=ve(n);return await Kf(!1,t,e.providerId),iy(t,e)}async function cA(n,e){return oA(ve(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fx(n,e){return Hr(n,"POST","/v1/accounts:signInWithCustomToken",xt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qx(n,e){if(Rt(n.app))return Promise.reject(rn(n));const t=Ct(n),r=await Fx(t,{token:e,returnSecureToken:!0}),a=await bi._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?ry._fromServerResponse(e,t):"totpInfo"in t?sy._fromServerResponse(e,t):yn(e,"internal-error")}}class ry extends oh{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new ry(t)}}class sy extends oh{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new sy(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(n,e,t){var r;re(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),re(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(re(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(re(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ay(n){const e=Ct(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Gx(n,e,t){const r=Ct(n),a={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Yf(r,a,t),await Uc(r,a,"getOobCode",bx)}async function Hx(n,e,t){await iA(ve(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ay(n),r})}async function Kx(n,e){await wx(ve(n),{oobCode:e})}async function hA(n,e){const t=ve(n),r=await iA(t,{oobCode:e}),a=r.requestType;switch(re(a,t,"internal-error"),a){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":re(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":re(r.mfaInfo,t,"internal-error");default:re(r.email,t,"internal-error")}let l=null;return r.mfaInfo&&(l=oh._fromServerResponse(Ct(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:l},operation:a}}async function Qx(n,e){const{data:t}=await hA(ve(n),e);return t.email}async function Yx(n,e,t){if(Rt(n.app))return Promise.reject(rn(n));const r=Ct(n),c=await Uc(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rA).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&ay(n),m}),d=await bi._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function Wx(n,e,t){return Rt(n.app)?Promise.reject(rn(n)):Qf(ve(n),sa.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ay(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $x(n,e,t){const r=Ct(n),a={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function l(c,d){re(d.handleCodeInApp,r,"argument-error"),d&&Yf(r,c,d)}l(a,t),await Uc(r,a,"getOobCode",Sx)}function Xx(n,e){const t=Hf.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function Zx(n,e,t){if(Rt(n.app))return Promise.reject(rn(n));const r=ve(n),a=sa.credentialWithLink(e,t||Mc());return re(a._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Qf(r,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jx(n,e){return Nt(n,"POST","/v1/accounts:createAuthUri",xt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eN(n,e){const t=ey()?Mc():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:a}=await Jx(ve(n),r);return a||[]}async function tN(n,e){const t=ve(n),a={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&Yf(t.auth,a,e);const{email:l}=await Ix(t.auth,a);l!==n.email&&await n.reload()}async function nN(n,e,t){const r=ve(n),l={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&Yf(r.auth,l,t);const{email:c}=await Rx(r.auth,l);c!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iN(n,e){return Nt(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rN(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=ve(n),l={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await zr(r,iN(r.auth,l));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const d=r.providerData.find(({providerId:m})=>m==="password");d&&(d.displayName=r.displayName,d.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function sN(n,e){const t=ve(n);return Rt(t.auth.app)?Promise.reject(rn(t.auth)):dA(t,e,null)}function aN(n,e){return dA(ve(n),null,e)}async function dA(n,e,t){const{auth:r}=n,l={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(l.email=e),t&&(l.password=t);const c=await zr(n,Ex(r,l));await n._updateTokensIfNecessary(c,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(n){var e,t;if(!n)return null;const{providerId:r}=n,a=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},l=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(n!=null&&n.idToken)){const c=(t=(e=qf(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(c){const d=c!=="anonymous"&&c!=="custom"?c:null;return new Rl(l,d)}}if(!r)return null;switch(r){case"facebook.com":return new lN(l,a);case"github.com":return new uN(l,a);case"google.com":return new cN(l,a);case"twitter.com":return new hN(l,a,n.screenName||null);case"custom":case"anonymous":return new Rl(l,null);default:return new Rl(l,r,a)}}class Rl{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class fA extends Rl{constructor(e,t,r,a){super(e,t,r),this.username=a}}class lN extends Rl{constructor(e,t){super(e,"facebook.com",t)}}class uN extends fA{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class cN extends Rl{constructor(e,t){super(e,"google.com",t)}}class hN extends fA{constructor(e,t,r){super(e,"twitter.com",t,r)}}function dN(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:oN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new Ya("enroll",e,t)}static _fromMfaPendingCredential(e){return new Ya("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e!=null&&e.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return Ya._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Ya._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=Ct(e),a=t.customData._serverResponse,l=(a.mfaInfo||[]).map(d=>oh._fromServerResponse(r,d));re(a.mfaPendingCredential,r,"internal-error");const c=Ya._fromMfaPendingCredential(a.mfaPendingCredential);return new oy(c,l,async d=>{const m=await d._process(r,c);delete a.mfaInfo,delete a.mfaPendingCredential;const g=Object.assign(Object.assign({},a),{idToken:m.idToken,refreshToken:m.refreshToken});switch(t.operationType){case"signIn":const v=await bi._fromIdTokenResponse(r,t.operationType,g);return await r._updateCurrentUser(v.user),v;case"reauthenticate":return re(t.user,r,"internal-error"),bi._forOperation(t.user,t.operationType,g);default:yn(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function fN(n,e){var t;const r=ve(n),a=e;return re(e.customData.operationType,r,"argument-error"),re((t=a.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,r,"argument-error"),oy._fromError(r,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(n,e){return Nt(n,"POST","/v2/accounts/mfaEnrollment:start",xt(n,e))}function pN(n,e){return Nt(n,"POST","/v2/accounts/mfaEnrollment:finalize",xt(n,e))}function gN(n,e){return Nt(n,"POST","/v2/accounts/mfaEnrollment:withdraw",xt(n,e))}class ly{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>oh._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new ly(e)}async getSession(){return Ya._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,a=await this.getSession(),l=await zr(this.user,r._process(this.user.auth,a,t));return await this.user._updateTokensIfNecessary(l),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const a=await zr(this.user,gN(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:l})=>l!==t),await this.user._updateTokensIfNecessary(a),await this.user.reload()}catch(a){throw a}}}const jg=new WeakMap;function _N(n){const e=ve(n);return jg.has(e)||jg.set(e,ly._fromUser(e)),jg.get(e)}const bf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(bf,"1"),this.storage.removeItem(bf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=1e3,vN=10;class pA extends mA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=J2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);ix()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,vN):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},yN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}pA.type="LOCAL";const uy=pA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA extends mA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}gA.type="SESSION";const no=gA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new Wf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),m=await EN(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,m)=>{const g=lh("",20);a.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(T){const I=T;if(I.data.eventId===g)switch(I.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(I.data.response);break;default:clearTimeout(v),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return window}function wN(n){Ht().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(){return typeof Ht().WorkerGlobalScope<"u"&&typeof Ht().importScripts=="function"}async function AN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function IN(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function bN(){return cy()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="firebaseLocalStorageDb",SN=1,Sf="firebaseLocalStorage",yA="fbase_key";class uh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function $f(n,e){return n.transaction([Sf],e?"readwrite":"readonly").objectStore(Sf)}function RN(){const n=indexedDB.deleteDatabase(_A);return new uh(n).toPromise()}function s_(){const n=indexedDB.open(_A,SN);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Sf,{keyPath:yA})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Sf)?e(r):(r.close(),await RN(),e(await s_()))})})}async function CT(n,e,t){const r=$f(n,!0).put({[yA]:e,value:t});return new uh(r).toPromise()}async function CN(n,e){const t=$f(n,!1).get(e),r=await new uh(t).toPromise();return r===void 0?null:r.value}function DT(n,e){const t=$f(n,!0).delete(e);return new uh(t).toPromise()}const DN=800,xN=3;class vA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await s_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>xN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wf._getInstance(bN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await AN(),!this.activeServiceWorker)return;this.sender=new TN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||IN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await s_();return await CT(e,bf,"1"),await DT(e,bf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>CT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>CN(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>DT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=$f(a,!1).getAll();return new uh(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vA.type="LOCAL";const jc=vA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(n,e){return Nt(n,"POST","/v2/accounts/mfaSignIn:start",xt(n,e))}function ON(n,e){return Nt(n,"POST","/v2/accounts/mfaSignIn:finalize",xt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=500,PN=6e4,Zd=1e12;class VN{constructor(e){this.auth=e,this.counter=Zd,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new MN(e,this.auth.name,t||{})),this.counter++,r}reset(e){var t;const r=e||Zd;(t=this._widgets.get(r))===null||t===void 0||t.delete(),this._widgets.delete(r)}getResponse(e){var t;const r=e||Zd;return((t=this._widgets.get(r))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const r=e||Zd;return(t=this._widgets.get(r))===null||t===void 0||t.execute(),""}}class MN{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const a=typeof e=="string"?document.getElementById(e):e;re(a,"argument-error",{appName:t}),this.container=a,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=LN(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},PN)},kN))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function LN(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg=tA("rcb"),UN=new ih(3e4,6e4);class BN{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Ht().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return re(jN(t),e,"argument-error"),this.shouldResolveImmediately(t)&&vT(Ht().grecaptcha)?Promise.resolve(Ht().grecaptcha):new Promise((r,a)=>{const l=Ht().setTimeout(()=>{a(Yt(e,"network-request-failed"))},UN.get());Ht()[zg]=()=>{Ht().clearTimeout(l),delete Ht()[zg];const d=Ht().grecaptcha;if(!d||!vT(d)){a(Yt(e,"internal-error"));return}const m=d.render;d.render=(g,v)=>{const T=m(g,v);return this.counter++,T},this.hostLanguage=t,r(d)};const c=`${cx()}?${Ql({onload:zg,render:"explicit",hl:t})}`;ny(c).catch(()=>{clearTimeout(l),a(Yt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=Ht().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function jN(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class zN{async load(e){return new VN(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="recaptcha",FN={theme:"light",type:"image"};let qN=class{constructor(e,t,r=Object.assign({},FN)){this.parameters=r,this.type=EA,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ct(e),this.isInvisible=this.parameters.size==="invisible",re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const a=typeof t=="string"?document.getElementById(t):t;re(a,this.auth,"argument-error"),this.container=a,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new zN:new BN,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(a=>{const l=c=>{c&&(this.tokenChangeListeners.delete(l),a(c))};this.tokenChangeListeners.add(l),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){re(!this.parameters.sitekey,this.auth,"argument-error"),re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=Ht()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){re(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){re(ey()&&!cy(),this.auth,"internal-error"),await GN(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await GD(this.auth);re(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function GN(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Ja._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function HN(n,e,t){if(Rt(n.app))return Promise.reject(rn(n));const r=Ct(n),a=await Xf(r,e,ve(t));return new hy(a,l=>Qf(r,l))}async function KN(n,e,t){const r=ve(n);await Kf(!1,r,"phone");const a=await Xf(r.auth,e,ve(t));return new hy(a,l=>uA(r,l))}async function QN(n,e,t){const r=ve(n);if(Rt(r.auth.app))return Promise.reject(rn(r.auth));const a=await Xf(r.auth,e,ve(t));return new hy(a,l=>cA(r,l))}async function Xf(n,e,t){var r;const a=await t.verify();try{re(typeof a=="string",n,"argument-error"),re(t.type===EA,n,"argument-error");let l;if(typeof e=="string"?l={phoneNumber:e}:l=e,"session"in l){const c=l.session;if("phoneNumber"in l)return re(c.type==="enroll",n,"internal-error"),(await mN(n,{idToken:c.credential,phoneEnrollmentInfo:{phoneNumber:l.phoneNumber,recaptchaToken:a}})).phoneSessionInfo.sessionInfo;{re(c.type==="signin",n,"internal-error");const d=((r=l.multiFactorHint)===null||r===void 0?void 0:r.uid)||l.multiFactorUid;return re(d,n,"missing-multi-factor-info"),(await NN(n,{mfaPendingCredential:c.credential,mfaEnrollmentId:d,phoneSignInInfo:{recaptchaToken:a}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:c}=await Nx(n,{phoneNumber:l.phoneNumber,recaptchaToken:a});return c}}finally{t._reset()}}async function YN(n,e){const t=ve(n);if(Rt(t.auth.app))return Promise.reject(rn(t.auth));await iy(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let io=class of{constructor(e){this.providerId=of.PROVIDER_ID,this.auth=Ct(e)}verifyPhoneNumber(e,t){return Xf(this.auth,e,ve(t))}static credential(e,t){return Ja._fromVerification(e,t)}static credentialFromResult(e){const t=e;return of.credentialFromTaggedObject(t)}static credentialFromError(e){return of.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?Ja._fromTokenResponse(t,r):null}};io.PROVIDER_ID="phone";io.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _o(n,e){return e?ai(e):(re(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy extends Wl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ur(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ur(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ur(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function WN(n){return lA(n.auth,new dy(n),n.bypassAuthState)}function $N(n){const{auth:e,user:t}=n;return re(t,e,"internal-error"),oA(t,new dy(n),n.bypassAuthState)}async function XN(n){const{auth:e,user:t}=n;return re(t,e,"internal-error"),iy(t,new dy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WN;case"linkViaPopup":case"linkViaRedirect":return XN;case"reauthViaPopup":case"reauthViaRedirect":return $N;default:yn(this.auth,"internal-error")}}resolve(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=new ih(2e3,1e4);async function JN(n,e,t){if(Rt(n.app))return Promise.reject(Yt(n,"operation-not-supported-in-this-environment"));const r=Ct(n);Yl(n,e,Kr);const a=_o(r,t);return new Mr(r,"signInViaPopup",e,a).executeNotNull()}async function eO(n,e,t){const r=ve(n);if(Rt(r.auth.app))return Promise.reject(Yt(r.auth,"operation-not-supported-in-this-environment"));Yl(r.auth,e,Kr);const a=_o(r.auth,t);return new Mr(r.auth,"reauthViaPopup",e,a,r).executeNotNull()}async function tO(n,e,t){const r=ve(n);Yl(r.auth,e,Kr);const a=_o(r.auth,t);return new Mr(r.auth,"linkViaPopup",e,a,r).executeNotNull()}class Mr extends TA{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,Mr.currentPopupAction&&Mr.currentPopupAction.cancel(),Mr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return re(e,this.auth,"internal-error"),e}async onExecution(){Vi(this.filter.length===1,"Popup operations only handle one event");const e=lh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Yt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Yt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Mr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ZN.get())};e()}}Mr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO="pendingRedirect",Ic=new Map;class iO extends TA{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Ic.get(this.auth._key());if(!e){try{const r=await rO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ic.set(this.auth._key(),e)}return this.bypassAuthState||Ic.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rO(n,e){const t=AA(e),r=wA(n);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}async function fy(n,e){return wA(n)._set(AA(e),"true")}function sO(){Ic.clear()}function my(n,e){Ic.set(n._key(),e)}function wA(n){return ai(n._redirectPersistence)}function AA(n){return Za(nO,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(n,e,t){return oO(n,e,t)}async function oO(n,e,t){if(Rt(n.app))return Promise.reject(rn(n));const r=Ct(n);Yl(n,e,Kr),await r._initializationPromise;const a=_o(r,t);return await fy(a,r),a._openRedirect(r,e,"signInViaRedirect")}function lO(n,e,t){return uO(n,e,t)}async function uO(n,e,t){const r=ve(n);if(Yl(r.auth,e,Kr),Rt(r.auth.app))return Promise.reject(rn(r.auth));await r.auth._initializationPromise;const a=_o(r.auth,t);await fy(a,r.auth);const l=await IA(r);return a._openRedirect(r.auth,e,"reauthViaRedirect",l)}function cO(n,e,t){return hO(n,e,t)}async function hO(n,e,t){const r=ve(n);Yl(r.auth,e,Kr),await r.auth._initializationPromise;const a=_o(r.auth,t);await Kf(!1,r,e.providerId),await fy(a,r.auth);const l=await IA(r);return a._openRedirect(r.auth,e,"linkViaRedirect",l)}async function dO(n,e){return await Ct(n)._initializationPromise,Zf(n,e,!1)}async function Zf(n,e,t=!1){if(Rt(n.app))return Promise.reject(rn(n));const r=Ct(n),a=_o(r,e),c=await new iO(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}async function IA(n){const e=lh(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=600*1e3;class bA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!SA(e)){const a=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Yt(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fO&&this.cachedEventUids.clear(),this.cachedEventUids.has(xT(e))}saveEventToCache(e){this.cachedEventUids.add(xT(e)),this.lastProcessedEventTime=Date.now()}}function xT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function SA({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function mO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RA(n,e={}){return Nt(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gO=/^https?/;async function _O(n){if(n.config.emulator)return;const{authorizedDomains:e}=await RA(n);for(const t of e)try{if(yO(t))return}catch{}yn(n,"unauthorized-domain")}function yO(n){const e=Mc(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!gO.test(t))return!1;if(pO.test(n))return r===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO=new ih(3e4,6e4);function NT(){const n=Ht().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function EO(n){return new Promise((e,t)=>{var r,a,l;function c(){NT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{NT(),t(Yt(n,"network-request-failed"))},timeout:vO.get()})}if(!((a=(r=Ht().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=Ht().gapi)===null||l===void 0)&&l.load)c();else{const d=tA("iframefcb");return Ht()[d]=()=>{gapi.load?c():t(Yt(n,"network-request-failed"))},ny(`${dx()}?onload=${d}`).catch(m=>t(m))}}).catch(e=>{throw lf=null,e})}let lf=null;function TO(n){return lf=lf||EO(n),lf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO=new ih(5e3,15e3),AO="__/auth/iframe",IO="emulator/auth/iframe",bO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RO(n){const e=n.config;re(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ty(e,IO):`https://${n.config.authDomain}/${AO}`,r={apiKey:e.apiKey,appName:n.name,v:ra},a=SO.get(n.config.apiHost);a&&(r.eid=a);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${Ql(r).slice(1)}`}async function CO(n){const e=await TO(n),t=Ht().gapi;return re(t,n,"internal-error"),e.open({where:document.body,url:RO(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bO,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=Yt(n,"network-request-failed"),d=Ht().setTimeout(()=>{l(c)},wO.get());function m(){Ht().clearTimeout(d),a(r)}r.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xO=500,NO=600,OO="_blank",kO="http://localhost";class OT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PO(n,e,t,r=xO,a=NO){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const m=Object.assign(Object.assign({},DO),{width:r.toString(),height:a.toString(),top:l,left:c}),g=Tt().toLowerCase();t&&(d=W2(g)?OO:t),Q2(g)&&(e=e||kO,m.scrollbars="yes");const v=Object.entries(m).reduce((I,[N,Q])=>`${I}${N}=${Q},`,"");if(nx(g)&&d!=="_self")return VO(e||"",d),new OT(null);const T=window.open(e||"",d,v);re(T,n,"popup-blocked");try{T.focus()}catch{}return new OT(T)}function VO(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO="__/auth/handler",LO="emulator/auth/handler",UO=encodeURIComponent("fac");async function a_(n,e,t,r,a,l){re(n.config.authDomain,n,"auth-domain-config-required"),re(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ra,eventId:a};if(e instanceof Kr){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",aC(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries(l||{}))c[v]=T}if(e instanceof $l){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const m=await n._getAppCheckToken(),g=m?`#${UO}=${encodeURIComponent(m)}`:"";return`${BO(n)}?${Ql(d).slice(1)}${g}`}function BO({config:n}){return n.emulator?ty(n,LO):`https://${n.authDomain}/${MO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg="webStorageSupport";class jO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=no,this._completeRedirectFn=Zf,this._overrideRedirectResult=my}async _openPopup(e,t,r,a){var l;Vi((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await a_(e,t,r,Mc(),a);return PO(e,c,lh())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await a_(e,t,r,Mc(),a);return wN(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Vi(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await CO(e),r=new bA(e);return t.register("authEvent",a=>(re(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fg,{type:Fg},a=>{var l;const c=(l=a==null?void 0:a[0])===null||l===void 0?void 0:l[Fg];c!==void 0&&t(!!c),yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=_O(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return J2()||Y2()||sh()}}const zO=jO;class FO{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return Ji("unexpected MultiFactorSessionType")}}}class py extends FO{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new py(e)}_finalizeEnroll(e,t,r){return pN(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return ON(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class CA{constructor(){}static assertion(e){return py._fromCredential(e)}}CA.FACTOR_ID="phone";var kT="@firebase/auth",PT="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HO(n){Ii(new Mn("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;re(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eA(n)},g=new lx(r,a,l,m);return gx(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ii(new Mn("auth-internal",e=>{const t=Ct(e.getProvider("auth").getImmediate());return(r=>new qO(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),kn(kT,PT,GO(n)),kn(kT,PT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO=300;X5("authIdTokenMaxAge");function QO(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}ux({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=a=>{const l=Yt("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",QO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HO("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=2e3;async function WO(n,e,t){var r;const{BuildInfo:a}=ro();Vi(e.sessionId,"AuthEvent did not contain a session ID");const l=await e4(e.sessionId),c={};return sh()?c.ibi=a.packageName:rh()?c.apn=a.packageName:yn(n,"operation-not-supported-in-this-environment"),a.displayName&&(c.appDisplayName=a.displayName),c.sessionId=l,a_(n,t,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,c)}async function $O(n){const{BuildInfo:e}=ro(),t={};sh()?t.iosBundleId=e.packageName:rh()?t.androidPackageName=e.packageName:yn(n,"operation-not-supported-in-this-environment"),await RA(n,t)}function XO(n){const{cordova:e}=ro();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let a=null;r?e.plugins.browsertab.openUrl(n):a=e.InAppBrowser.open(n,tx()?"_blank":"_system","location=yes"),t(a)})})}async function ZO(n,e,t){const{cordova:r}=ro();let a=()=>{};try{await new Promise((l,c)=>{let d=null;function m(){var T;l();const I=(T=r.plugins.browsertab)===null||T===void 0?void 0:T.close;typeof I=="function"&&I(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function g(){d||(d=window.setTimeout(()=>{c(Yt(n,"redirect-cancelled-by-user"))},YO))}function v(){(document==null?void 0:document.visibilityState)==="visible"&&g()}e.addPassiveListener(m),document.addEventListener("resume",g,!1),rh()&&document.addEventListener("visibilitychange",v,!1),a=()=>{e.removePassiveListener(m),document.removeEventListener("resume",g,!1),document.removeEventListener("visibilitychange",v,!1),d&&window.clearTimeout(d)}})}finally{a()}}function JO(n){var e,t,r,a,l,c,d,m,g,v;const T=ro();re(typeof((e=T==null?void 0:T.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),re(typeof((t=T==null?void 0:T.BuildInfo)===null||t===void 0?void 0:t.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),re(typeof((l=(a=(r=T==null?void 0:T.cordova)===null||r===void 0?void 0:r.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re(typeof((m=(d=(c=T==null?void 0:T.cordova)===null||c===void 0?void 0:c.plugins)===null||d===void 0?void 0:d.browsertab)===null||m===void 0?void 0:m.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re(typeof((v=(g=T==null?void 0:T.cordova)===null||g===void 0?void 0:g.InAppBrowser)===null||v===void 0?void 0:v.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function e4(n){const e=t4(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(a=>a.toString(16).padStart(2,"0")).join("")}function t4(n){if(Vi(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=20;class i4 extends bA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function r4(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:o4(),postBody:null,tenantId:n.tenantId,error:Yt(n,"no-auth-event")}}function s4(n,e){return o_()._set(l_(n),e)}async function VT(n){const e=await o_()._get(l_(n));return e&&await o_()._remove(l_(n)),e}function a4(n,e){var t,r;const a=u4(e);if(a.includes("/__/auth/callback")){const l=uf(a),c=l.firebaseError?l4(decodeURIComponent(l.firebaseError)):null,d=(r=(t=c==null?void 0:c.code)===null||t===void 0?void 0:t.split("auth/"))===null||r===void 0?void 0:r[1],m=d?Yt(d):null;return m?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:m,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:a,postBody:null}}return null}function o4(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<n4;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function o_(){return ai(uy)}function l_(n){return Za("authEvent",n.config.apiKey,n.name)}function l4(n){try{return JSON.parse(n)}catch{return null}}function u4(n){const e=uf(n),t=e.link?decodeURIComponent(e.link):void 0,r=uf(t).link,a=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return uf(a).link||a||r||t||n}function uf(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return wl(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4=500;class h4{constructor(){this._redirectPersistence=no,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Zf,this._overrideRedirectResult=my}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new i4(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){yn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,a){JO(e);const l=await this._initialize(e);await l.initialized(),l.resetRedirect(),sO(),await this._originValidation(e);const c=r4(e,r,a);await s4(e,c);const d=await WO(e,c,t),m=await XO(d);return ZO(e,l,m)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=$O(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:a,BuildInfo:l}=ro(),c=setTimeout(async()=>{await VT(e),t.onEvent(MT())},c4),d=async v=>{clearTimeout(c);const T=await VT(e);let I=null;T&&(v!=null&&v.url)&&(I=a4(T,v.url)),t.onEvent(I||MT())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,d);const m=a,g=`${l.packageName.toLowerCase()}://`;ro().handleOpenURL=async v=>{if(v.toLowerCase().startsWith(g)&&d({url:v}),typeof m=="function")try{m(v)}catch(T){console.error(T)}}}}const d4=h4;function MT(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Yt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(n,e){Ct(n)._logFramework(e)}var m4="@firebase/auth-compat",p4="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4=1e3;function bc(){var n;return((n=self==null?void 0:self.location)===null||n===void 0?void 0:n.protocol)||null}function _4(){return bc()==="http:"||bc()==="https:"}function DA(n=Tt()){return!!((bc()==="file:"||bc()==="ionic:"||bc()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function y4(){return H_()||G_()}function v4(){return w2()&&(document==null?void 0:document.documentMode)===11}function E4(n=Tt()){return/Edge\/\d+/.test(n)}function T4(n=Tt()){return v4()||E4(n)}function xA(){try{const n=self.localStorage,e=lh();if(n)return n.setItem(e,"1"),n.removeItem(e),T4()?to():!0}catch{return gy()&&to()}return!1}function gy(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function qg(){return(_4()||zf()||DA())&&!y4()&&xA()&&!gy()}function NA(){return DA()&&typeof document<"u"}async function w4(){return NA()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},g4);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function A4(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si={LOCAL:"local",NONE:"none",SESSION:"session"},uc=re,OA="persistence";function I4(n,e){if(uc(Object.values(si).includes(e),n,"invalid-persistence-type"),H_()){uc(e!==si.SESSION,n,"unsupported-persistence-type");return}if(G_()){uc(e===si.NONE,n,"unsupported-persistence-type");return}if(gy()){uc(e===si.NONE||e===si.LOCAL&&to(),n,"unsupported-persistence-type");return}uc(e===si.NONE||xA(),n,"unsupported-persistence-type")}async function u_(n){await n._initializationPromise;const e=kA(),t=Za(OA,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistence())}function b4(n,e){const t=kA();if(!t)return[];const r=Za(OA,n,e);switch(t.getItem(r)){case si.NONE:return[Ol];case si.LOCAL:return[jc,no];case si.SESSION:return[no];default:return[]}}function kA(){var n;try{return((n=A4())===null||n===void 0?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4=re;class Gs{constructor(){this.browserResolver=ai(zO),this.cordovaResolver=ai(d4),this.underlyingResolver=null,this._redirectPersistence=no,this._completeRedirectFn=Zf,this._overrideRedirectResult=my}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,a){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,a)}async _openRedirect(e,t,r,a){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,a)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return NA()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return S4(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await w4();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(n){return n.unwrap()}function R4(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C4(n){return VA(n)}function D4(n,e){var t;const r=(t=e.customData)===null||t===void 0?void 0:t._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const a=e;a.resolver=new x4(n,fN(n,e))}else if(r){const a=VA(e),l=e;a&&(l.credential=a,l.tenantId=r.tenantId||void 0,l.email=r.email||void 0,l.phoneNumber=r.phoneNumber||void 0)}}function VA(n){const{_tokenResponse:e}=n instanceof gn?n.customData:n;if(!e)return null;if(!(n instanceof gn)&&"temporaryProof"in e&&"phoneNumber"in e)return io.credentialFromResult(n);const t=e.providerId;if(!t||t===lc.PASSWORD)return null;let r;switch(t){case lc.GOOGLE:r=$i;break;case lc.FACEBOOK:r=Wi;break;case lc.GITHUB:r=Xi;break;case lc.TWITTER:r=Zi;break;default:const{oauthIdToken:a,oauthAccessToken:l,oauthTokenSecret:c,pendingToken:d,nonce:m}=e;return!l&&!c&&!a&&!d?null:d?t.startsWith("saml.")?kl._create(t,d):rr._fromParams({providerId:t,signInMethod:t,pendingToken:d,idToken:a,accessToken:l}):new Sl(t).credential({idToken:a,accessToken:l,rawNonce:m})}return n instanceof gn?r.credentialFromError(n):r.credentialFromResult(n)}function Hn(n,e){return e.catch(t=>{throw t instanceof gn&&D4(n,t),t}).then(t=>{const r=t.operationType,a=t.user;return{operationType:r,credential:C4(t),additionalUserInfo:dN(t),user:Jf.getOrCreate(a)}})}async function c_(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>Hn(n,t.confirm(r))}}class x4{constructor(e,t){this.resolver=t,this.auth=R4(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Hn(PA(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jf=class yc{constructor(e){this._delegate=e,this.multiFactor=_N(e)}static getOrCreate(e){return yc.USER_MAP.has(e)||yc.USER_MAP.set(e,new yc(e)),yc.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Hn(this.auth,uA(this._delegate,e))}async linkWithPhoneNumber(e,t){return c_(this.auth,KN(this._delegate,e,t))}async linkWithPopup(e){return Hn(this.auth,tO(this._delegate,e,Gs))}async linkWithRedirect(e){return await u_(Ct(this.auth)),cO(this._delegate,e,Gs)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Hn(this.auth,cA(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return c_(this.auth,QN(this._delegate,e,t))}reauthenticateWithPopup(e){return Hn(this.auth,eO(this._delegate,e,Gs))}async reauthenticateWithRedirect(e){return await u_(Ct(this.auth)),lO(this._delegate,e,Gs)}sendEmailVerification(e){return tN(this._delegate,e)}async unlink(e){return await zx(this._delegate,e),this}updateEmail(e){return sN(this._delegate,e)}updatePassword(e){return aN(this._delegate,e)}updatePhoneNumber(e){return YN(this._delegate,e)}updateProfile(e){return rN(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return nN(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};Jf.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=re;class h_{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;cc(r,"invalid-api-key",{appName:e.name}),cc(r,"invalid-api-key",{appName:e.name});const a=typeof window<"u"?Gs:void 0;this._delegate=t.initialize({options:{persistence:N4(r,e.name),popupRedirectResolver:a}}),this._delegate._updateErrorMap(PD),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Jf.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){_x(this._delegate,e,t)}applyActionCode(e){return Kx(this._delegate,e)}checkActionCode(e){return hA(this._delegate,e)}confirmPasswordReset(e,t){return Hx(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Hn(this._delegate,Yx(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return eN(this._delegate,e)}isSignInWithEmailLink(e){return Xx(this._delegate,e)}async getRedirectResult(){cc(qg(),this._delegate,"operation-not-supported-in-this-environment");const e=await dO(this._delegate,Gs);return e?Hn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){f4(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:a,error:l,complete:c}=LT(e,t,r);return this._delegate.onAuthStateChanged(a,l,c)}onIdTokenChanged(e,t,r){const{next:a,error:l,complete:c}=LT(e,t,r);return this._delegate.onIdTokenChanged(a,l,c)}sendSignInLinkToEmail(e,t){return $x(this._delegate,e,t)}sendPasswordResetEmail(e,t){return Gx(this._delegate,e,t||void 0)}async setPersistence(e){I4(this._delegate,e);let t;switch(e){case si.SESSION:t=no;break;case si.LOCAL:t=await ai(jc)._isAvailable()?jc:uy;break;case si.NONE:t=Ol;break;default:return yn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Hn(this._delegate,jx(this._delegate))}signInWithCredential(e){return Hn(this._delegate,Qf(this._delegate,e))}signInWithCustomToken(e){return Hn(this._delegate,qx(this._delegate,e))}signInWithEmailAndPassword(e,t){return Hn(this._delegate,Wx(this._delegate,e,t))}signInWithEmailLink(e,t){return Hn(this._delegate,Zx(this._delegate,e,t))}signInWithPhoneNumber(e,t){return c_(this._delegate,HN(this._delegate,e,t))}async signInWithPopup(e){return cc(qg(),this._delegate,"operation-not-supported-in-this-environment"),Hn(this._delegate,JN(this._delegate,e,Gs))}async signInWithRedirect(e){return cc(qg(),this._delegate,"operation-not-supported-in-this-environment"),await u_(this._delegate),aO(this._delegate,e,Gs)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return Qx(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}h_.Persistence=si;function LT(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const a=r;return{next:c=>a(c&&Jf.getOrCreate(c)),error:e,complete:t}}function N4(n,e){const t=b4(n,e);if(typeof self<"u"&&!t.includes(jc)&&t.push(jc),typeof window<"u")for(const r of[uy,no])t.includes(r)||t.push(r);return t.includes(Ol)||t.push(Ol),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(){this.providerId="phone",this._delegate=new io(PA(Nn.auth()))}static credential(e,t){return io.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}_y.PHONE_SIGN_IN_METHOD=io.PHONE_SIGN_IN_METHOD;_y.PROVIDER_ID=io.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4=re;class k4{constructor(e,t,r=Nn.app()){var a;O4((a=r.options)===null||a===void 0?void 0:a.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new qN(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4="auth-compat";function V4(n){n.INTERNAL.registerComponent(new Mn(P4,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new h_(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:dl.EMAIL_SIGNIN,PASSWORD_RESET:dl.PASSWORD_RESET,RECOVER_EMAIL:dl.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:dl.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:dl.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:dl.VERIFY_EMAIL}},EmailAuthProvider:sa,FacebookAuthProvider:Wi,GithubAuthProvider:Xi,GoogleAuthProvider:$i,OAuthProvider:Sl,SAMLAuthProvider:Af,PhoneAuthProvider:_y,PhoneMultiFactorGenerator:CA,RecaptchaVerifier:k4,TwitterAuthProvider:Zi,Auth:h_,AuthCredential:Wl,Error:gn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(m4,p4)}V4(Nn);var UT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eo,MA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,S){function C(){}C.prototype=S.prototype,R.D=S.prototype,R.prototype=new C,R.prototype.constructor=R,R.C=function(P,V,L){for(var x=Array(arguments.length-2),wt=2;wt<arguments.length;wt++)x[wt-2]=arguments[wt];return S.prototype[V].apply(P,x)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(R,S,C){C||(C=0);var P=Array(16);if(typeof S=="string")for(var V=0;16>V;++V)P[V]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(V=0;16>V;++V)P[V]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=R.g[0],C=R.g[1],V=R.g[2];var L=R.g[3],x=S+(L^C&(V^L))+P[0]+3614090360&4294967295;S=C+(x<<7&4294967295|x>>>25),x=L+(V^S&(C^V))+P[1]+3905402710&4294967295,L=S+(x<<12&4294967295|x>>>20),x=V+(C^L&(S^C))+P[2]+606105819&4294967295,V=L+(x<<17&4294967295|x>>>15),x=C+(S^V&(L^S))+P[3]+3250441966&4294967295,C=V+(x<<22&4294967295|x>>>10),x=S+(L^C&(V^L))+P[4]+4118548399&4294967295,S=C+(x<<7&4294967295|x>>>25),x=L+(V^S&(C^V))+P[5]+1200080426&4294967295,L=S+(x<<12&4294967295|x>>>20),x=V+(C^L&(S^C))+P[6]+2821735955&4294967295,V=L+(x<<17&4294967295|x>>>15),x=C+(S^V&(L^S))+P[7]+4249261313&4294967295,C=V+(x<<22&4294967295|x>>>10),x=S+(L^C&(V^L))+P[8]+1770035416&4294967295,S=C+(x<<7&4294967295|x>>>25),x=L+(V^S&(C^V))+P[9]+2336552879&4294967295,L=S+(x<<12&4294967295|x>>>20),x=V+(C^L&(S^C))+P[10]+4294925233&4294967295,V=L+(x<<17&4294967295|x>>>15),x=C+(S^V&(L^S))+P[11]+2304563134&4294967295,C=V+(x<<22&4294967295|x>>>10),x=S+(L^C&(V^L))+P[12]+1804603682&4294967295,S=C+(x<<7&4294967295|x>>>25),x=L+(V^S&(C^V))+P[13]+4254626195&4294967295,L=S+(x<<12&4294967295|x>>>20),x=V+(C^L&(S^C))+P[14]+2792965006&4294967295,V=L+(x<<17&4294967295|x>>>15),x=C+(S^V&(L^S))+P[15]+1236535329&4294967295,C=V+(x<<22&4294967295|x>>>10),x=S+(V^L&(C^V))+P[1]+4129170786&4294967295,S=C+(x<<5&4294967295|x>>>27),x=L+(C^V&(S^C))+P[6]+3225465664&4294967295,L=S+(x<<9&4294967295|x>>>23),x=V+(S^C&(L^S))+P[11]+643717713&4294967295,V=L+(x<<14&4294967295|x>>>18),x=C+(L^S&(V^L))+P[0]+3921069994&4294967295,C=V+(x<<20&4294967295|x>>>12),x=S+(V^L&(C^V))+P[5]+3593408605&4294967295,S=C+(x<<5&4294967295|x>>>27),x=L+(C^V&(S^C))+P[10]+38016083&4294967295,L=S+(x<<9&4294967295|x>>>23),x=V+(S^C&(L^S))+P[15]+3634488961&4294967295,V=L+(x<<14&4294967295|x>>>18),x=C+(L^S&(V^L))+P[4]+3889429448&4294967295,C=V+(x<<20&4294967295|x>>>12),x=S+(V^L&(C^V))+P[9]+568446438&4294967295,S=C+(x<<5&4294967295|x>>>27),x=L+(C^V&(S^C))+P[14]+3275163606&4294967295,L=S+(x<<9&4294967295|x>>>23),x=V+(S^C&(L^S))+P[3]+4107603335&4294967295,V=L+(x<<14&4294967295|x>>>18),x=C+(L^S&(V^L))+P[8]+1163531501&4294967295,C=V+(x<<20&4294967295|x>>>12),x=S+(V^L&(C^V))+P[13]+2850285829&4294967295,S=C+(x<<5&4294967295|x>>>27),x=L+(C^V&(S^C))+P[2]+4243563512&4294967295,L=S+(x<<9&4294967295|x>>>23),x=V+(S^C&(L^S))+P[7]+1735328473&4294967295,V=L+(x<<14&4294967295|x>>>18),x=C+(L^S&(V^L))+P[12]+2368359562&4294967295,C=V+(x<<20&4294967295|x>>>12),x=S+(C^V^L)+P[5]+4294588738&4294967295,S=C+(x<<4&4294967295|x>>>28),x=L+(S^C^V)+P[8]+2272392833&4294967295,L=S+(x<<11&4294967295|x>>>21),x=V+(L^S^C)+P[11]+1839030562&4294967295,V=L+(x<<16&4294967295|x>>>16),x=C+(V^L^S)+P[14]+4259657740&4294967295,C=V+(x<<23&4294967295|x>>>9),x=S+(C^V^L)+P[1]+2763975236&4294967295,S=C+(x<<4&4294967295|x>>>28),x=L+(S^C^V)+P[4]+1272893353&4294967295,L=S+(x<<11&4294967295|x>>>21),x=V+(L^S^C)+P[7]+4139469664&4294967295,V=L+(x<<16&4294967295|x>>>16),x=C+(V^L^S)+P[10]+3200236656&4294967295,C=V+(x<<23&4294967295|x>>>9),x=S+(C^V^L)+P[13]+681279174&4294967295,S=C+(x<<4&4294967295|x>>>28),x=L+(S^C^V)+P[0]+3936430074&4294967295,L=S+(x<<11&4294967295|x>>>21),x=V+(L^S^C)+P[3]+3572445317&4294967295,V=L+(x<<16&4294967295|x>>>16),x=C+(V^L^S)+P[6]+76029189&4294967295,C=V+(x<<23&4294967295|x>>>9),x=S+(C^V^L)+P[9]+3654602809&4294967295,S=C+(x<<4&4294967295|x>>>28),x=L+(S^C^V)+P[12]+3873151461&4294967295,L=S+(x<<11&4294967295|x>>>21),x=V+(L^S^C)+P[15]+530742520&4294967295,V=L+(x<<16&4294967295|x>>>16),x=C+(V^L^S)+P[2]+3299628645&4294967295,C=V+(x<<23&4294967295|x>>>9),x=S+(V^(C|~L))+P[0]+4096336452&4294967295,S=C+(x<<6&4294967295|x>>>26),x=L+(C^(S|~V))+P[7]+1126891415&4294967295,L=S+(x<<10&4294967295|x>>>22),x=V+(S^(L|~C))+P[14]+2878612391&4294967295,V=L+(x<<15&4294967295|x>>>17),x=C+(L^(V|~S))+P[5]+4237533241&4294967295,C=V+(x<<21&4294967295|x>>>11),x=S+(V^(C|~L))+P[12]+1700485571&4294967295,S=C+(x<<6&4294967295|x>>>26),x=L+(C^(S|~V))+P[3]+2399980690&4294967295,L=S+(x<<10&4294967295|x>>>22),x=V+(S^(L|~C))+P[10]+4293915773&4294967295,V=L+(x<<15&4294967295|x>>>17),x=C+(L^(V|~S))+P[1]+2240044497&4294967295,C=V+(x<<21&4294967295|x>>>11),x=S+(V^(C|~L))+P[8]+1873313359&4294967295,S=C+(x<<6&4294967295|x>>>26),x=L+(C^(S|~V))+P[15]+4264355552&4294967295,L=S+(x<<10&4294967295|x>>>22),x=V+(S^(L|~C))+P[6]+2734768916&4294967295,V=L+(x<<15&4294967295|x>>>17),x=C+(L^(V|~S))+P[13]+1309151649&4294967295,C=V+(x<<21&4294967295|x>>>11),x=S+(V^(C|~L))+P[4]+4149444226&4294967295,S=C+(x<<6&4294967295|x>>>26),x=L+(C^(S|~V))+P[11]+3174756917&4294967295,L=S+(x<<10&4294967295|x>>>22),x=V+(S^(L|~C))+P[2]+718787259&4294967295,V=L+(x<<15&4294967295|x>>>17),x=C+(L^(V|~S))+P[9]+3951481745&4294967295,R.g[0]=R.g[0]+S&4294967295,R.g[1]=R.g[1]+(V+(x<<21&4294967295|x>>>11))&4294967295,R.g[2]=R.g[2]+V&4294967295,R.g[3]=R.g[3]+L&4294967295}r.prototype.u=function(R,S){S===void 0&&(S=R.length);for(var C=S-this.blockSize,P=this.B,V=this.h,L=0;L<S;){if(V==0)for(;L<=C;)a(this,R,L),L+=this.blockSize;if(typeof R=="string"){for(;L<S;)if(P[V++]=R.charCodeAt(L++),V==this.blockSize){a(this,P),V=0;break}}else for(;L<S;)if(P[V++]=R[L++],V==this.blockSize){a(this,P),V=0;break}}this.h=V,this.o+=S},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var S=1;S<R.length-8;++S)R[S]=0;var C=8*this.o;for(S=R.length-8;S<R.length;++S)R[S]=C&255,C/=256;for(this.u(R),R=Array(16),S=C=0;4>S;++S)for(var P=0;32>P;P+=8)R[C++]=this.g[S]>>>P&255;return R};function l(R,S){var C=d;return Object.prototype.hasOwnProperty.call(C,R)?C[R]:C[R]=S(R)}function c(R,S){this.h=S;for(var C=[],P=!0,V=R.length-1;0<=V;V--){var L=R[V]|0;P&&L==S||(C[V]=L,P=!1)}this.g=C}var d={};function m(R){return-128<=R&&128>R?l(R,function(S){return new c([S|0],0>S?-1:0)}):new c([R|0],0>R?-1:0)}function g(R){if(isNaN(R)||!isFinite(R))return T;if(0>R)return Z(g(-R));for(var S=[],C=1,P=0;R>=C;P++)S[P]=R/C|0,C*=4294967296;return new c(S,0)}function v(R,S){if(R.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(R.charAt(0)=="-")return Z(v(R.substring(1),S));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=g(Math.pow(S,8)),P=T,V=0;V<R.length;V+=8){var L=Math.min(8,R.length-V),x=parseInt(R.substring(V,V+L),S);8>L?(L=g(Math.pow(S,L)),P=P.j(L).add(g(x))):(P=P.j(C),P=P.add(g(x)))}return P}var T=m(0),I=m(1),N=m(16777216);n=c.prototype,n.m=function(){if(ee(this))return-Z(this).m();for(var R=0,S=1,C=0;C<this.g.length;C++){var P=this.i(C);R+=(0<=P?P:4294967296+P)*S,S*=4294967296}return R},n.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(Q(this))return"0";if(ee(this))return"-"+Z(this).toString(R);for(var S=g(Math.pow(R,6)),C=this,P="";;){var V=Ae(C,S).g;C=te(C,V.j(S));var L=((0<C.g.length?C.g[0]:C.h)>>>0).toString(R);if(C=V,Q(C))return L+P;for(;6>L.length;)L="0"+L;P=L+P}},n.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function Q(R){if(R.h!=0)return!1;for(var S=0;S<R.g.length;S++)if(R.g[S]!=0)return!1;return!0}function ee(R){return R.h==-1}n.l=function(R){return R=te(this,R),ee(R)?-1:Q(R)?0:1};function Z(R){for(var S=R.g.length,C=[],P=0;P<S;P++)C[P]=~R.g[P];return new c(C,~R.h).add(I)}n.abs=function(){return ee(this)?Z(this):this},n.add=function(R){for(var S=Math.max(this.g.length,R.g.length),C=[],P=0,V=0;V<=S;V++){var L=P+(this.i(V)&65535)+(R.i(V)&65535),x=(L>>>16)+(this.i(V)>>>16)+(R.i(V)>>>16);P=x>>>16,L&=65535,x&=65535,C[V]=x<<16|L}return new c(C,C[C.length-1]&-2147483648?-1:0)};function te(R,S){return R.add(Z(S))}n.j=function(R){if(Q(this)||Q(R))return T;if(ee(this))return ee(R)?Z(this).j(Z(R)):Z(Z(this).j(R));if(ee(R))return Z(this.j(Z(R)));if(0>this.l(N)&&0>R.l(N))return g(this.m()*R.m());for(var S=this.g.length+R.g.length,C=[],P=0;P<2*S;P++)C[P]=0;for(P=0;P<this.g.length;P++)for(var V=0;V<R.g.length;V++){var L=this.i(P)>>>16,x=this.i(P)&65535,wt=R.i(V)>>>16,Ut=R.i(V)&65535;C[2*P+2*V]+=x*Ut,me(C,2*P+2*V),C[2*P+2*V+1]+=L*Ut,me(C,2*P+2*V+1),C[2*P+2*V+1]+=x*wt,me(C,2*P+2*V+1),C[2*P+2*V+2]+=L*wt,me(C,2*P+2*V+2)}for(P=0;P<S;P++)C[P]=C[2*P+1]<<16|C[2*P];for(P=S;P<2*S;P++)C[P]=0;return new c(C,0)};function me(R,S){for(;(R[S]&65535)!=R[S];)R[S+1]+=R[S]>>>16,R[S]&=65535,S++}function ce(R,S){this.g=R,this.h=S}function Ae(R,S){if(Q(S))throw Error("division by zero");if(Q(R))return new ce(T,T);if(ee(R))return S=Ae(Z(R),S),new ce(Z(S.g),Z(S.h));if(ee(S))return S=Ae(R,Z(S)),new ce(Z(S.g),S.h);if(30<R.g.length){if(ee(R)||ee(S))throw Error("slowDivide_ only works with positive integers.");for(var C=I,P=S;0>=P.l(R);)C=Re(C),P=Re(P);var V=Te(C,1),L=Te(P,1);for(P=Te(P,2),C=Te(C,2);!Q(P);){var x=L.add(P);0>=x.l(R)&&(V=V.add(C),L=x),P=Te(P,1),C=Te(C,1)}return S=te(R,V.j(S)),new ce(V,S)}for(V=T;0<=R.l(S);){for(C=Math.max(1,Math.floor(R.m()/S.m())),P=Math.ceil(Math.log(C)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),L=g(C),x=L.j(S);ee(x)||0<x.l(R);)C-=P,L=g(C),x=L.j(S);Q(L)&&(L=I),V=V.add(L),R=te(R,x)}return new ce(V,R)}n.A=function(R){return Ae(this,R).h},n.and=function(R){for(var S=Math.max(this.g.length,R.g.length),C=[],P=0;P<S;P++)C[P]=this.i(P)&R.i(P);return new c(C,this.h&R.h)},n.or=function(R){for(var S=Math.max(this.g.length,R.g.length),C=[],P=0;P<S;P++)C[P]=this.i(P)|R.i(P);return new c(C,this.h|R.h)},n.xor=function(R){for(var S=Math.max(this.g.length,R.g.length),C=[],P=0;P<S;P++)C[P]=this.i(P)^R.i(P);return new c(C,this.h^R.h)};function Re(R){for(var S=R.g.length+1,C=[],P=0;P<S;P++)C[P]=R.i(P)<<1|R.i(P-1)>>>31;return new c(C,R.h)}function Te(R,S){var C=S>>5;S%=32;for(var P=R.g.length-C,V=[],L=0;L<P;L++)V[L]=0<S?R.i(L+C)>>>S|R.i(L+C+1)<<32-S:R.i(L+C);return new c(V,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,MA=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,eo=c}).apply(typeof UT<"u"?UT:typeof self<"u"?self:typeof window<"u"?window:{});var Jd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var LA,vc,UA,cf,d_,BA,jA,zA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jd=="object"&&Jd];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function a(h,_){if(_)e:{var E=r;h=h.split(".");for(var A=0;A<h.length-1;A++){var U=h[A];if(!(U in E))break e;E=E[U]}h=h[h.length-1],A=E[h],_=_(A),_!=A&&_!=null&&e(E,h,{configurable:!0,writable:!0,value:_})}}function l(h,_){h instanceof String&&(h+="");var E=0,A=!1,U={next:function(){if(!A&&E<h.length){var H=E++;return{value:_(H,h[H]),done:!1}}return A=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}a("Array.prototype.values",function(h){return h||function(){return l(this,function(_,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function m(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function g(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function v(h,_,E){return h.call.apply(h.bind,arguments)}function T(h,_,E){if(!h)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,A),h.apply(_,U)}}return function(){return h.apply(_,arguments)}}function I(h,_,E){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:T,I.apply(null,arguments)}function N(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function Q(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(A,U,H){for(var ae=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)ae[Je-2]=arguments[Je];return _.prototype[U].apply(A,ae)}}function ee(h){const _=h.length;if(0<_){const E=Array(_);for(let A=0;A<_;A++)E[A]=h[A];return E}return[]}function Z(h,_){for(let E=1;E<arguments.length;E++){const A=arguments[E];if(m(A)){const U=h.length||0,H=A.length||0;h.length=U+H;for(let ae=0;ae<H;ae++)h[U+ae]=A[ae]}else h.push(A)}}class te{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function me(h){return/^[\s\xa0]*$/.test(h)}function ce(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function Ae(h){return Ae[" "](h),h}Ae[" "]=function(){};var Re=ce().indexOf("Gecko")!=-1&&!(ce().toLowerCase().indexOf("webkit")!=-1&&ce().indexOf("Edge")==-1)&&!(ce().indexOf("Trident")!=-1||ce().indexOf("MSIE")!=-1)&&ce().indexOf("Edge")==-1;function Te(h,_,E){for(const A in h)_.call(E,h[A],A,h)}function R(h,_){for(const E in h)_.call(void 0,h[E],E,h)}function S(h){const _={};for(const E in h)_[E]=h[E];return _}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(h,_){let E,A;for(let U=1;U<arguments.length;U++){A=arguments[U];for(E in A)h[E]=A[E];for(let H=0;H<C.length;H++)E=C[H],Object.prototype.hasOwnProperty.call(A,E)&&(h[E]=A[E])}}function V(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function L(h){d.setTimeout(()=>{throw h},0)}function x(){var h=Ke;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class wt{constructor(){this.h=this.g=null}add(_,E){const A=Ut.get();A.set(_,E),this.h?this.h.next=A:this.g=A,this.h=A}}var Ut=new te(()=>new K,h=>h.reset());class K{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,_e=!1,Ke=new wt,Ze=()=>{const h=d.Promise.resolve(void 0);oe=()=>{h.then(k)}};var k=()=>{for(var h;h=x();){try{h.h.call(h.g)}catch(E){L(E)}var _=Ut;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}_e=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var fe=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};d.addEventListener("test",E,_),d.removeEventListener("test",E,_)}catch{}return h})();function Ie(h,_){if(se.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(Re){e:{try{Ae(_.nodeName);var U=!0;break e}catch{}U=!1}U||(_=null)}}else E=="mouseover"?_=h.fromElement:E=="mouseout"&&(_=h.toElement);this.relatedTarget=_,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Oe[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ie.aa.h.call(this)}}Q(Ie,se);var Oe={2:"touch",3:"pen",4:"mouse"};Ie.prototype.h=function(){Ie.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Fe="closure_listenable_"+(1e6*Math.random()|0),an=0;function vt(h,_,E,A,U){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!A,this.ha=U,this.key=++an,this.da=this.fa=!1}function Mi(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function lr(h){this.src=h,this.g={},this.h=0}lr.prototype.add=function(h,_,E,A,U){var H=h.toString();h=this.g[H],h||(h=this.g[H]=[],this.h++);var ae=Ao(h,_,A,U);return-1<ae?(_=h[ae],E||(_.fa=!1)):(_=new vt(_,this.src,H,!!A,U),_.fa=E,h.push(_)),_};function ca(h,_){var E=_.type;if(E in h.g){var A=h.g[E],U=Array.prototype.indexOf.call(A,_,void 0),H;(H=0<=U)&&Array.prototype.splice.call(A,U,1),H&&(Mi(_),h.g[E].length==0&&(delete h.g[E],h.h--))}}function Ao(h,_,E,A){for(var U=0;U<h.length;++U){var H=h[U];if(!H.da&&H.listener==_&&H.capture==!!E&&H.ha==A)return U}return-1}var Si="closure_lm_"+(1e6*Math.random()|0),ha={};function Io(h,_,E,A,U){if(Array.isArray(_)){for(var H=0;H<_.length;H++)Io(h,_[H],E,A,U);return null}return E=bh(E),h&&h[Fe]?h.K(_,E,g(A)?!!A.capture:!1,U):bm(h,_,E,!1,A,U)}function bm(h,_,E,A,U,H){if(!_)throw Error("Invalid event type");var ae=g(U)?!!U.capture:!!U,Je=su(h);if(Je||(h[Si]=Je=new lr(h)),E=Je.add(_,E,A,ae,H),E.proxy)return E;if(A=Ih(),E.proxy=A,A.src=h,A.listener=E,h.addEventListener)fe||(U=ae),U===void 0&&(U=!1),h.addEventListener(_.toString(),A,U);else if(h.attachEvent)h.attachEvent(So(_.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Ih(){function h(E){return _.call(h.src,h.listener,E)}const _=Sm;return h}function bo(h,_,E,A,U){if(Array.isArray(_))for(var H=0;H<_.length;H++)bo(h,_[H],E,A,U);else A=g(A)?!!A.capture:!!A,E=bh(E),h&&h[Fe]?(h=h.i,_=String(_).toString(),_ in h.g&&(H=h.g[_],E=Ao(H,E,A,U),-1<E&&(Mi(H[E]),Array.prototype.splice.call(H,E,1),H.length==0&&(delete h.g[_],h.h--)))):h&&(h=su(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Ao(_,E,A,U)),(E=-1<h?_[h]:null)&&da(E))}function da(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Fe])ca(_.i,h);else{var E=h.type,A=h.proxy;_.removeEventListener?_.removeEventListener(E,A,h.capture):_.detachEvent?_.detachEvent(So(E),A):_.addListener&&_.removeListener&&_.removeListener(A),(E=su(_))?(ca(E,h),E.h==0&&(E.src=null,_[Si]=null)):Mi(h)}}}function So(h){return h in ha?ha[h]:ha[h]="on"+h}function Sm(h,_){if(h.da)h=!0;else{_=new Ie(_,this);var E=h.listener,A=h.ha||h.src;h.fa&&da(h),h=E.call(A,_)}return h}function su(h){return h=h[Si],h instanceof lr?h:null}var on="__closure_events_fn_"+(1e9*Math.random()>>>0);function bh(h){return typeof h=="function"?h:(h[on]||(h[on]=function(_){return h.handleEvent(_)}),h[on])}function Kt(){W.call(this),this.i=new lr(this),this.M=this,this.F=null}Q(Kt,W),Kt.prototype[Fe]=!0,Kt.prototype.removeEventListener=function(h,_,E,A){bo(this,h,_,E,A)};function $t(h,_){var E,A=h.F;if(A)for(E=[];A;A=A.F)E.push(A);if(h=h.M,A=_.type||_,typeof _=="string")_=new se(_,h);else if(_ instanceof se)_.target=_.target||h;else{var U=_;_=new se(A,h),P(_,U)}if(U=!0,E)for(var H=E.length-1;0<=H;H--){var ae=_.g=E[H];U=ur(ae,A,!0,_)&&U}if(ae=_.g=h,U=ur(ae,A,!0,_)&&U,U=ur(ae,A,!1,_)&&U,E)for(H=0;H<E.length;H++)ae=_.g=E[H],U=ur(ae,A,!1,_)&&U}Kt.prototype.N=function(){if(Kt.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var E=h.g[_],A=0;A<E.length;A++)Mi(E[A]);delete h.g[_],h.h--}}this.F=null},Kt.prototype.K=function(h,_,E,A){return this.i.add(String(h),_,!1,E,A)},Kt.prototype.L=function(h,_,E,A){return this.i.add(String(h),_,!0,E,A)};function ur(h,_,E,A){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var U=!0,H=0;H<_.length;++H){var ae=_[H];if(ae&&!ae.da&&ae.capture==E){var Je=ae.listener,Bt=ae.ha||ae.src;ae.fa&&ca(h.i,ae),U=Je.call(Bt,A)!==!1&&U}}return U&&!A.defaultPrevented}function Sh(h,_,E){if(typeof h=="function")E&&(h=I(h,E));else if(h&&typeof h.handleEvent=="function")h=I(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(h,_||0)}function au(h){h.g=Sh(()=>{h.g=null,h.i&&(h.i=!1,au(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Rm extends W{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:au(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fa(h){W.call(this),this.h=h,this.g={}}Q(fa,W);var $r=[];function vn(h){Te(h.g,function(_,E){this.g.hasOwnProperty(E)&&da(_)},h),h.g={}}fa.prototype.N=function(){fa.aa.N.call(this),vn(this)},fa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ui=d.JSON.stringify,In=d.JSON.parse,Cm=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function ou(){}ou.prototype.h=null;function Rh(h){return h.h||(h.h=h.i())}function ma(){}var Li={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xr(){se.call(this,"d")}Q(Xr,se);function Ri(){se.call(this,"c")}Q(Ri,se);var ci={},Zr=null;function Ro(){return Zr=Zr||new Kt}ci.La="serverreachability";function lu(h){se.call(this,ci.La,h)}Q(lu,se);function cr(h){const _=Ro();$t(_,new lu(_))}ci.STAT_EVENT="statevent";function Jr(h,_){se.call(this,ci.STAT_EVENT,h),this.stat=_}Q(Jr,se);function ln(h){const _=Ro();$t(_,new Jr(_,h))}ci.Ma="timingevent";function uu(h,_){se.call(this,ci.Ma,h),this.size=_}Q(uu,se);function es(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},_)}function ts(){this.g=!0}ts.prototype.xa=function(){this.g=!1};function cu(h,_,E,A,U,H){h.info(function(){if(h.g)if(H)for(var ae="",Je=H.split("&"),Bt=0;Bt<Je.length;Bt++){var ke=Je[Bt].split("=");if(1<ke.length){var Zt=ke[0];ke=ke[1];var Jt=Zt.split("_");ae=2<=Jt.length&&Jt[1]=="type"?ae+(Zt+"="+ke+"&"):ae+(Zt+"=redacted&")}}else ae=null;else ae=H;return"XMLHTTP REQ ("+A+") [attempt "+U+"]: "+_+`
`+E+`
`+ae})}function hu(h,_,E,A,U,H,ae){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+U+"]: "+_+`
`+E+`
`+H+" "+ae})}function hr(h,_,E,A){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ui(h,E)+(A?" "+A:"")})}function Ch(h,_){h.info(function(){return"TIMEOUT: "+_})}ts.prototype.info=function(){};function Ui(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var A=E[h];if(!(2>A.length)){var U=A[1];if(Array.isArray(U)&&!(1>U.length)){var H=U[0];if(H!="noop"&&H!="stop"&&H!="close")for(var ae=1;ae<U.length;ae++)U[ae]=""}}}}return ui(E)}catch{return _}}var At={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},un={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bi;function ns(){}Q(ns,ou),ns.prototype.g=function(){return new XMLHttpRequest},ns.prototype.i=function(){return{}},Bi=new ns;function ji(h,_,E,A){this.j=h,this.i=_,this.l=E,this.R=A||1,this.U=new fa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Dh}function Dh(){this.i=null,this.g="",this.h=!1}var du={},dr={};function pa(h,_,E){h.L=1,h.v=ya(It(_)),h.m=E,h.P=!0,fr(h,null)}function fr(h,_){h.F=Date.now(),Ci(h),h.A=It(h.v);var E=h.A,A=h.R;Array.isArray(A)||(A=[String(A)]),gr(E.i,"t",A),h.C=0,E=h.j.J,h.h=new Dh,h.g=Hh(h.j,E?_:null,!h.m),0<h.O&&(h.M=new Rm(I(h.Y,h,h.g),h.O)),_=h.U,E=h.g,A=h.ca;var U="readystatechange";Array.isArray(U)||(U&&($r[0]=U.toString()),U=$r);for(var H=0;H<U.length;H++){var ae=Io(E,U[H],A||_.handleEvent,!1,_.h||_);if(!ae)break;_.g[ae.key]=ae}_=h.H?S(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),cr(),cu(h.i,h.u,h.A,h.l,h.R,h.m)}ji.prototype.ca=function(h){h=h.target;const _=this.M;_&&Rn(h)==3?_.j():this.Y(h)},ji.prototype.Y=function(h){try{if(h==this.g)e:{const Jt=Rn(this.g);var _=this.g.Ba();const ps=this.g.Z();if(!(3>Jt)&&(Jt!=3||this.g&&(this.h.h||this.g.oa()||Ta(this.g)))){this.J||Jt!=4||_==7||(_==8||0>=ps?cr(3):cr(2)),Co(this);var E=this.g.Z();this.X=E;t:if(mr(this)){var A=Ta(this.g);h="";var U=A.length,H=Rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bn(this),is(this);var ae="";break t}this.h.i=new d.TextDecoder}for(_=0;_<U;_++)this.h.h=!0,h+=this.h.i.decode(A[_],{stream:!(H&&_==U-1)});A.length=0,this.h.g+=h,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=E==200,hu(this.i,this.u,this.A,this.l,this.R,Jt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,Bt=this.g;if((Je=Bt.g?Bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!me(Je)){var ke=Je;break t}}ke=null}if(E=ke)hr(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zi(this,E);else{this.o=!1,this.s=3,ln(12),bn(this),is(this);break e}}if(this.P){E=!0;let Bn;for(;!this.J&&this.C<ae.length;)if(Bn=ga(this,ae),Bn==dr){Jt==4&&(this.s=4,ln(14),E=!1),hr(this.i,this.l,null,"[Incomplete Response]");break}else if(Bn==du){this.s=4,ln(15),hr(this.i,this.l,ae,"[Invalid Chunk]"),E=!1;break}else hr(this.i,this.l,Bn,null),zi(this,Bn);if(mr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jt!=4||ae.length!=0||this.h.h||(this.s=1,ln(16),E=!1),this.o=this.o&&E,!E)hr(this.i,this.l,ae,"[Invalid Chunked Response]"),bn(this),is(this);else if(0<ae.length&&!this.W){this.W=!0;var Zt=this.j;Zt.g==this&&Zt.ba&&!Zt.M&&(Zt.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),Au(Zt),Zt.M=!0,ln(11))}}else hr(this.i,this.l,ae,null),zi(this,ae);Jt==4&&bn(this),this.o&&!this.J&&(Jt==4?Fh(this.j,this):(this.o=!1,Ci(this)))}else Mh(this.g),E==400&&0<ae.indexOf("Unknown SID")?(this.s=3,ln(12)):(this.s=0,ln(13)),bn(this),is(this)}}}catch{}finally{}};function mr(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function ga(h,_){var E=h.C,A=_.indexOf(`
`,E);return A==-1?dr:(E=Number(_.substring(E,A)),isNaN(E)?du:(A+=1,A+E>_.length?dr:(_=_.slice(A,A+E),h.C=A+E,_)))}ji.prototype.cancel=function(){this.J=!0,bn(this)};function Ci(h){h.S=Date.now()+h.I,Ot(h,h.I)}function Ot(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=es(I(h.ba,h),_)}function Co(h){h.B&&(d.clearTimeout(h.B),h.B=null)}ji.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Ch(this.i,this.A),this.L!=2&&(cr(),ln(17)),bn(this),this.s=2,is(this)):Ot(this,this.S-h)};function is(h){h.j.G==0||h.J||Fh(h.j,h)}function bn(h){Co(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,vn(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function zi(h,_){try{var E=h.j;if(E.G!=0&&(E.g==h||rs(E.h,h))){if(!h.K&&rs(E.h,h)&&E.G==3){try{var A=E.Da.g.parse(_)}catch{A=null}if(Array.isArray(A)&&A.length==3){var U=A;if(U[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<h.F)fs(E),ds(E);else break e;wu(E),ln(18)}}else E.za=U[1],0<E.za-E.T&&37500>U[2]&&E.F&&E.v==0&&!E.C&&(E.C=es(I(E.Za,E),6e3));if(1>=xh(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else yr(E,11)}else if((h.K||E.g==h)&&fs(E),!me(_))for(U=E.Da.g.parse(_),_=0;_<U.length;_++){let ke=U[_];if(E.T=ke[0],ke=ke[1],E.G==2)if(ke[0]=="c"){E.K=ke[1],E.ia=ke[2];const Zt=ke[3];Zt!=null&&(E.la=Zt,E.j.info("VER="+E.la));const Jt=ke[4];Jt!=null&&(E.Aa=Jt,E.j.info("SVER="+E.Aa));const ps=ke[5];ps!=null&&typeof ps=="number"&&0<ps&&(A=1.5*ps,E.L=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const Bn=h.g;if(Bn){const Ia=Bn.g?Bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ia){var H=A.h;H.g||Ia.indexOf("spdy")==-1&&Ia.indexOf("quic")==-1&&Ia.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(ss(H,H.h),H.h=null))}if(A.D){const vr=Bn.g?Bn.g.getResponseHeader("X-HTTP-Session-Id"):null;vr&&(A.ya=vr,Qe(A.I,A.D,vr))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms")),A=E;var ae=h;if(A.qa=Gh(A,A.J?A.ia:null,A.W),ae.K){hi(A.h,ae);var Je=ae,Bt=A.L;Bt&&(Je.I=Bt),Je.B&&(Co(Je),Ci(Je)),A.g=ae}else jh(A);0<E.i.length&&Mo(E)}else ke[0]!="stop"&&ke[0]!="close"||yr(E,7);else E.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?yr(E,7):Eu(E):ke[0]!="noop"&&E.l&&E.l.ta(ke),E.v=0)}}cr(4)}catch{}}var Dm=class{constructor(h,_){this.g=h,this.map=_}};function fu(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mu(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function xh(h){return h.h?1:h.g?h.g.size:0}function rs(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function ss(h,_){h.g?h.g.add(_):h.h=_}function hi(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}fu.prototype.cancel=function(){if(this.i=Sn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Sn(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return ee(h.i)}function Nh(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var _=[],E=h.length,A=0;A<E;A++)_.push(h[A]);return _}_=[],E=0;for(A in h)_[E++]=h[A];return _}function xm(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const A in h)_[E++]=A;return _}}}function Do(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var E=xm(h),A=Nh(h),U=A.length,H=0;H<U;H++)_.call(void 0,A[H],E&&E[H],h)}var pu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xo(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var A=h[E].indexOf("="),U=null;if(0<=A){var H=h[E].substring(0,A);U=h[E].substring(A+1)}else H=h[E];_(H,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function pr(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof pr){this.h=h.h,as(this,h.j),this.o=h.o,this.g=h.g,_a(this,h.s),this.l=h.l;var _=h.i,E=new Fi;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),No(this,E),this.m=h.m}else h&&(_=String(h).match(pu))?(this.h=!1,as(this,_[1]||"",!0),this.o=os(_[2]||""),this.g=os(_[3]||"",!0),_a(this,_[4]),this.l=os(_[5]||"",!0),No(this,_[6]||"",!0),this.m=os(_[7]||"")):(this.h=!1,this.i=new Fi(null,this.h))}pr.prototype.toString=function(){var h=[],_=this.j;_&&h.push(di(_,gu,!0),":");var E=this.g;return(E||_=="file")&&(h.push("//"),(_=this.o)&&h.push(di(_,gu,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&h.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(di(E,E.charAt(0)=="/"?_u:Oh,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",di(E,km)),h.join("")};function It(h){return new pr(h)}function as(h,_,E){h.j=E?os(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function _a(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function No(h,_,E){_ instanceof Fi?(h.i=_,kh(h.i,h.h)):(E||(_=di(_,Om)),h.i=new Fi(_,h.h))}function Qe(h,_,E){h.i.set(_,E)}function ya(h){return Qe(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function os(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function di(h,_,E){return typeof h=="string"?(h=encodeURI(h).replace(_,Nm),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Nm(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var gu=/[#\/\?@]/g,Oh=/[#\?:]/g,_u=/[#\?]/g,Om=/[#\?@]/g,km=/#/g;function Fi(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Xt(h){h.g||(h.g=new Map,h.h=0,h.i&&xo(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}n=Fi.prototype,n.add=function(h,_){Xt(this),this.i=null,h=$n(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this};function Oo(h,_){Xt(h),_=$n(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function ko(h,_){return Xt(h),_=$n(h,_),h.g.has(_)}n.forEach=function(h,_){Xt(this),this.g.forEach(function(E,A){E.forEach(function(U){h.call(_,U,A,this)},this)},this)},n.na=function(){Xt(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let A=0;A<_.length;A++){const U=h[A];for(let H=0;H<U.length;H++)E.push(_[A])}return E},n.V=function(h){Xt(this);let _=[];if(typeof h=="string")ko(this,h)&&(_=_.concat(this.g.get($n(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},n.set=function(h,_){return Xt(this),this.i=null,h=$n(this,h),ko(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function gr(h,_,E){Oo(h,_),0<E.length&&(h.i=null,h.g.set($n(h,_),ee(E)),h.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var A=_[E];const H=encodeURIComponent(String(A)),ae=this.V(A);for(A=0;A<ae.length;A++){var U=H;ae[A]!==""&&(U+="="+encodeURIComponent(String(ae[A]))),h.push(U)}}return this.i=h.join("&")};function $n(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function kh(h,_){_&&!h.j&&(Xt(h),h.i=null,h.g.forEach(function(E,A){var U=A.toLowerCase();A!=U&&(Oo(this,A),gr(this,U,E))},h)),h.j=_}function yu(h,_){const E=new ts;if(d.Image){const A=new Image;A.onload=N(Un,E,"TestLoadImage: loaded",!0,_,A),A.onerror=N(Un,E,"TestLoadImage: error",!1,_,A),A.onabort=N(Un,E,"TestLoadImage: abort",!1,_,A),A.ontimeout=N(Un,E,"TestLoadImage: timeout",!1,_,A),d.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else _(!1)}function Ph(h,_){const E=new ts,A=new AbortController,U=setTimeout(()=>{A.abort(),Un(E,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:A.signal}).then(H=>{clearTimeout(U),H.ok?Un(E,"TestPingServer: ok",!0,_):Un(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(U),Un(E,"TestPingServer: error",!1,_)})}function Un(h,_,E,A,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),A(E)}catch{}}function Di(){this.g=new Cm}function vu(h,_,E){const A=E||"";try{Do(h,function(U,H){let ae=U;g(U)&&(ae=ui(U)),_.push(A+H+"="+encodeURIComponent(ae))})}catch(U){throw _.push(A+"type="+encodeURIComponent("_badmap")),U}}function qi(h){this.l=h.Ub||null,this.j=h.eb||!1}Q(qi,ou),qi.prototype.g=function(){return new Xn(this.l,this.j)},qi.prototype.i=(function(h){return function(){return h}})({});function Xn(h,_){Kt.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Q(Xn,Kt),n=Xn.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,ls(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Gi(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ls(this)),this.g&&(this.readyState=3,ls(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Po(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Po(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Gi(this):ls(this),this.readyState==3&&Po(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Gi(this))},n.Qa=function(h){this.g&&(this.response=h,Gi(this))},n.ga=function(){this.g&&Gi(this)};function Gi(h){h.readyState=4,h.l=null,h.j=null,h.v=null,ls(h)}n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=_.next();return h.join(`\r
`)};function ls(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Xn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function va(h){let _="";return Te(h,function(E,A){_+=A,_+=":",_+=E,_+=`\r
`}),_}function us(h,_,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=va(E),typeof h=="string"?E!=null&&encodeURIComponent(String(E)):Qe(h,_,E))}function ct(h){Kt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Q(ct,Kt);var En=/^https?$/i,_r=["POST","PUT"];n=ct.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,_,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bi.g(),this.v=this.o?Rh(this.o):Rh(Bi),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(H){Ea(this,H);return}if(h=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var U in A)E.set(U,A[U]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const H of A.keys())E.set(H,A.get(H));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find(H=>H.toLowerCase()=="content-type"),U=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(_r,_,void 0))||A||U||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ae]of E)this.g.setRequestHeader(H,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vo(this),this.u=!0,this.g.send(h),this.u=!1}catch(H){Ea(this,H)}};function Ea(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,cs(h),hs(h)}function cs(h){h.A||(h.A=!0,$t(h,"complete"),$t(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,$t(this,"complete"),$t(this,"abort"),hs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hs(this,!0)),ct.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Vh(this):this.bb())},n.bb=function(){Vh(this)};function Vh(h){if(h.h&&typeof c<"u"&&(!h.v[1]||Rn(h)!=4||h.Z()!=2)){if(h.u&&Rn(h)==4)Sh(h.Ea,0,h);else if($t(h,"readystatechange"),Rn(h)==4){h.h=!1;try{const ae=h.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var A;if(A=ae===0){var U=String(h.D).match(pu)[1]||null;!U&&d.self&&d.self.location&&(U=d.self.location.protocol.slice(0,-1)),A=!En.test(U?U.toLowerCase():"")}E=A}if(E)$t(h,"complete"),$t(h,"success");else{h.m=6;try{var H=2<Rn(h)?h.g.statusText:""}catch{H=""}h.l=H+" ["+h.Z()+"]",cs(h)}}finally{hs(h)}}}}function hs(h,_){if(h.g){Vo(h);const E=h.g,A=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||$t(h,"ready");try{E.onreadystatechange=A}catch{}}}function Vo(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function Rn(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<Rn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),In(_)}};function Ta(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Mh(h){const _={};h=(h.g&&2<=Rn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(me(h[A]))continue;var E=V(h[A]);const U=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const H=_[U]||[];_[U]=H,H.push(E)}R(_,function(A){return A.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wa(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function Lh(h){this.Aa=0,this.i=[],this.j=new ts,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wa("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wa("baseRetryDelayMs",5e3,h),this.cb=wa("retryDelaySeedMs",1e4,h),this.Wa=wa("forwardChannelMaxRetries",2,h),this.wa=wa("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new fu(h&&h.concurrentRequestLimit),this.Da=new Di,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Lh.prototype,n.la=8,n.G=1,n.connect=function(h,_,E,A){ln(0),this.W=h,this.H=_||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.I=Gh(this,null,this.W),Mo(this)};function Eu(h){if(Uh(h),h.G==3){var _=h.U++,E=It(h.I);if(Qe(E,"SID",h.K),Qe(E,"RID",_),Qe(E,"TYPE","terminate"),Aa(h,E),_=new ji(h,h.j,_),_.L=2,_.v=ya(It(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&d.Image&&(new Image().src=_.v,E=!0),E||(_.g=Hh(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Ci(_)}Iu(h)}function ds(h){h.g&&(Au(h),h.g.cancel(),h.g=null)}function Uh(h){ds(h),h.u&&(d.clearTimeout(h.u),h.u=null),fs(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function Mo(h){if(!mu(h.h)&&!h.s){h.s=!0;var _=h.Ga;oe||Ze(),_e||(oe(),_e=!0),Ke.add(_,h),h.B=0}}function Pm(h,_){return xh(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=es(I(h.Ga,h,_),qh(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const U=new ji(this,this.j,h);let H=this.o;if(this.S&&(H?(H=S(H),P(H,this.S)):H=this.S),this.m!==null||this.O||(U.H=H,H=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(_+=A,4096<_){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=Tu(this,U,_),E=It(this.I),Qe(E,"RID",h),Qe(E,"CVER",22),this.D&&Qe(E,"X-HTTP-Session-Id",this.D),Aa(this,E),H&&(this.O?_="headers="+encodeURIComponent(String(va(H)))+"&"+_:this.m&&us(E,this.m,H)),ss(this.h,U),this.Ua&&Qe(E,"TYPE","init"),this.P?(Qe(E,"$req",_),Qe(E,"SID","null"),U.T=!0,pa(U,E,null)):pa(U,E,_),this.G=2}}else this.G==3&&(h?Bh(this,h):this.i.length==0||mu(this.h)||Bh(this))};function Bh(h,_){var E;_?E=_.l:E=h.U++;const A=It(h.I);Qe(A,"SID",h.K),Qe(A,"RID",E),Qe(A,"AID",h.T),Aa(h,A),h.m&&h.o&&us(A,h.m,h.o),E=new ji(h,h.j,E,h.B+1),h.m===null&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=Tu(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),ss(h.h,E),pa(E,A,_)}function Aa(h,_){h.H&&Te(h.H,function(E,A){Qe(_,A,E)}),h.l&&Do({},function(E,A){Qe(_,A,E)})}function Tu(h,_,E){E=Math.min(h.i.length,E);var A=h.l?I(h.l.Na,h.l,h):null;e:{var U=h.i;let H=-1;for(;;){const ae=["count="+E];H==-1?0<E?(H=U[0].g,ae.push("ofs="+H)):H=0:ae.push("ofs="+H);let Je=!0;for(let Bt=0;Bt<E;Bt++){let ke=U[Bt].g;const Zt=U[Bt].map;if(ke-=H,0>ke)H=Math.max(0,U[Bt].g-100),Je=!1;else try{vu(Zt,ae,"req"+ke+"_")}catch{A&&A(Zt)}}if(Je){A=ae.join("&");break e}}}return h=h.i.splice(0,E),_.D=h,A}function jh(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;oe||Ze(),_e||(oe(),_e=!0),Ke.add(_,h),h.v=0}}function wu(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=es(I(h.Fa,h),qh(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,zh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=es(I(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ln(10),ds(this),zh(this))};function Au(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function zh(h){h.g=new ji(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=It(h.qa);Qe(_,"RID","rpc"),Qe(_,"SID",h.K),Qe(_,"AID",h.T),Qe(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&Qe(_,"TO",h.ja),Qe(_,"TYPE","xmlhttp"),Aa(h,_),h.m&&h.o&&us(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=ya(It(_)),E.m=null,E.P=!0,fr(E,h)}n.Za=function(){this.C!=null&&(this.C=null,ds(this),wu(this),ln(19))};function fs(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Fh(h,_){var E=null;if(h.g==_){fs(h),Au(h),h.g=null;var A=2}else if(rs(h.h,_))E=_.D,hi(h.h,_),A=1;else return;if(h.G!=0){if(_.o)if(A==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var U=h.B;A=Ro(),$t(A,new uu(A,E)),Mo(h)}else jh(h);else if(U=_.s,U==3||U==0&&0<_.X||!(A==1&&Pm(h,_)||A==2&&wu(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),U){case 1:yr(h,5);break;case 4:yr(h,10);break;case 3:yr(h,6);break;default:yr(h,2)}}}function qh(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function yr(h,_){if(h.j.info("Error code "+_),_==2){var E=I(h.fb,h),A=h.Xa;const U=!A;A=new pr(A||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||as(A,"https"),ya(A),U?yu(A.toString(),E):Ph(A.toString(),E)}else ln(2);h.G=0,h.l&&h.l.sa(_),Iu(h),Uh(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ln(2)):(this.j.info("Failed to ping google.com"),ln(1))};function Iu(h){if(h.G=0,h.ka=[],h.l){const _=Sn(h.h);(_.length!=0||h.i.length!=0)&&(Z(h.ka,_),Z(h.ka,h.i),h.h.i.length=0,ee(h.i),h.i.length=0),h.l.ra()}}function Gh(h,_,E){var A=E instanceof pr?It(E):new pr(E);if(A.g!="")_&&(A.g=_+"."+A.g),_a(A,A.s);else{var U=d.location;A=U.protocol,_=_?_+"."+U.hostname:U.hostname,U=+U.port;var H=new pr(null);A&&as(H,A),_&&(H.g=_),U&&_a(H,U),E&&(H.l=E),A=H}return E=h.D,_=h.ya,E&&_&&Qe(A,E,_),Qe(A,"VER",h.la),Aa(h,A),A}function Hh(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new ct(new qi({eb:E})):new ct(h.pa),_.Ha(h.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kh(){}n=Kh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Lo(){}Lo.prototype.g=function(h,_){return new Cn(h,_)};function Cn(h,_){Kt.call(this),this.g=new Lh(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!me(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!me(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new ms(this)}Q(Cn,Kt),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){Eu(this.g)},Cn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.u&&(E={},E.__data__=ui(h),h=E);_.i.push(new Dm(_.Ya++,h)),_.G==3&&Mo(_)},Cn.prototype.N=function(){this.g.l=null,delete this.j,Eu(this.g),delete this.g,Cn.aa.N.call(this)};function Qh(h){Xr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}Q(Qh,Xr);function Yh(){Ri.call(this),this.status=1}Q(Yh,Ri);function ms(h){this.g=h}Q(ms,Kh),ms.prototype.ua=function(){$t(this.g,"a")},ms.prototype.ta=function(h){$t(this.g,new Qh(h))},ms.prototype.sa=function(h){$t(this.g,new Yh)},ms.prototype.ra=function(){$t(this.g,"b")},Lo.prototype.createWebChannel=Lo.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,zA=function(){return new Lo},jA=function(){return Ro()},BA=ci,d_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},At.NO_ERROR=0,At.TIMEOUT=8,At.HTTP_ERROR=6,cf=At,un.COMPLETE="complete",UA=un,ma.EventType=Li,Li.OPEN="a",Li.CLOSE="b",Li.ERROR="c",Li.MESSAGE="d",Kt.prototype.listen=Kt.prototype.K,vc=ma,ct.prototype.listenOnce=ct.prototype.L,ct.prototype.getLastError=ct.prototype.Ka,ct.prototype.getLastErrorCode=ct.prototype.Ba,ct.prototype.getStatus=ct.prototype.Z,ct.prototype.getResponseJson=ct.prototype.Oa,ct.prototype.getResponseText=ct.prototype.oa,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Ha,LA=ct}).apply(typeof Jd<"u"?Jd:typeof self<"u"?self:typeof window<"u"?window:{});const BT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xl="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=new nh("@firebase/firestore");function _l(){return $s.logLevel}function M4(n){$s.setLogLevel(n)}function ie(n,...e){if($s.logLevel<=Le.DEBUG){const t=e.map(yy);$s.debug(`Firestore (${Xl}): ${n}`,...t)}}function Vt(n,...e){if($s.logLevel<=Le.ERROR){const t=e.map(yy);$s.error(`Firestore (${Xl}): ${n}`,...t)}}function sr(n,...e){if($s.logLevel<=Le.WARN){const t=e.map(yy);$s.warn(`Firestore (${Xl}): ${n}`,...t)}}function yy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function he(n="Unexpected state"){const e=`FIRESTORE (${Xl}) INTERNAL ASSERTION FAILED: `+n;throw Vt(e),new Error(e)}function pe(n,e){n||he()}function L4(n,e){n||he()}function ue(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends gn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class U4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(nn.UNAUTHENTICATED)))}shutdown(){}}class B4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class j4{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){pe(this.o===void 0);let r=this.i;const a=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new _n;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new _n,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},d=m=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new _n)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pe(typeof r.accessToken=="string"),new FA(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string"),new nn(e)}}class z4{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class F4{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new z4(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class q4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class G4{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){pe(this.o===void 0);const r=l=>{l.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.R;return this.R=l.token,ie("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?a(l):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(pe(typeof t.token=="string"),this.R=t.token,new q4(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H4(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const a=H4(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%e.length))}return r}}function Se(n,e){return n<e?-1:n>e?1:0}function Pl(n,e,t){return n.length===e.length&&n.every(((r,a)=>t(r,e[a])))}function GA(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ne(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ne(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ne(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new yt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ye(e)}static min(){return new ye(new yt(0,0))}static max(){return new ye(new yt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,t,r){t===void 0?t=0:t>e.length&&he(),r===void 0?r=e.length-t:r>e.length-t&&he(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return zc.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zc?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=e.get(a),c=t.get(a);if(l<c)return-1;if(l>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class je extends zc{construct(e,t,r){return new je(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new je(t)}static emptyPath(){return new je([])}}const K4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gt extends zc{construct(e,t,r){return new gt(e,t,r)}static isValidIdentifier(e){return K4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new gt(["__name__"])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new ne(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new ne(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ne(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new ne(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gt(t)}static emptyPath(){return new gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.path=e}static fromPath(e){return new le(je.fromString(e))}static fromName(e){return new le(je.fromString(e).popFirst(5))}static empty(){return new le(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new je(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function f_(n){return n.fields.find((e=>e.kind===2))}function Fa(n){return n.fields.filter((e=>e.kind!==2))}Rf.UNKNOWN_ID=-1;class hf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Fc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Fc(0,li.min())}}function HA(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=ye.fromTimestamp(r===1e9?new yt(t+1,0):new yt(t,r));return new li(a,le.empty(),e)}function KA(n){return new li(n.readTime,n.key,-1)}class li{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new li(ye.min(),le.empty(),-1)}static max(){return new li(ye.max(),le.empty(),-1)}}function vy(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=le.comparator(n.documentKey,e.documentKey),t!==0?t:Se(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aa(n){if(n.code!==G.FAILED_PRECONDITION||n.message!==QA)throw n;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&he(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new z(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof z?t:z.resolve(t)}catch(t){return z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):z.reject(t)}static resolve(e){return new z(((t,r)=>{t(e)}))}static reject(e){return new z(((t,r)=>{r(e)}))}static waitFor(e){return new z(((t,r)=>{let a=0,l=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++l,c&&l===a&&t()}),(m=>r(m)))})),c=!0,l===a&&t()}))}static or(e){let t=z.resolve(!1);for(const r of e)t=t.next((a=>a?z.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new z(((r,a)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next((v=>{c[g]=v,++d,d===l&&r(c)}),(v=>a(v)))}}))}static doWhile(e,t){return new z(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new _n,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Sc(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const a=Ey(r.target.error);this.V.reject(new Sc(e,a))}}static open(e,t,r,a){try{return new em(t,e.transaction(a,r))}catch(l){throw new Sc(t,l)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ie("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Y4(t)}}class nr{constructor(e,t,r){this.name=e,this.version=t,this.p=r,nr.S(Tt())===12.2&&Vt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ie("SimpleDb","Removing database:",e),qa(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!to())return!1;if(nr.v())return!0;const e=Tt(),t=nr.S(e),r=0<t&&t<10,a=WA(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(ie("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{r(new Sc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?r(new ne(G.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new ne(G.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new Sc(e,c))},a.onupgradeneeded=l=>{ie("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.p.O(c,a.transaction,l.oldVersion,this.version).next((()=>{ie("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.M(e);const d=em.open(this.db,e,l?"readonly":"readwrite",r),m=a(d).next((g=>(d.g(),g))).catch((g=>(d.abort(g),z.reject(g)))).toPromise();return m.catch((()=>{})),await d.m,m}catch(d){const m=d,g=m.name!=="FirebaseError"&&c<3;if(ie("SimpleDb","Transaction failed with error:",m.message,"Retrying:",g),this.close(),!g)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function WA(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class Q4{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return qa(this.B.delete())}}class Sc extends ne{constructor(e,t){super(G.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function oa(n){return n.name==="IndexedDbTransactionError"}class Y4{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ie("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ie("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),qa(r)}add(e){return ie("SimpleDb","ADD",this.store.name,e,e),qa(this.store.add(e))}get(e){return qa(this.store.get(e)).next((t=>(t===void 0&&(t=null),ie("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return ie("SimpleDb","DELETE",this.store.name,e),qa(this.store.delete(e))}count(){return ie("SimpleDb","COUNT",this.store.name),qa(this.store.count())}U(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new z(((c,d)=>{l.onerror=m=>{d(m.target.error)},l.onsuccess=m=>{c(m.target.result)}}))}{const l=this.cursor(r),c=[];return this.W(l,((d,m)=>{c.push(m)})).next((()=>c))}}G(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new z(((a,l)=>{r.onerror=c=>{l(c.target.error)},r.onsuccess=c=>{a(c.target.result)}}))}j(e,t){ie("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const a=this.cursor(r);return this.W(a,((l,c,d)=>d.delete()))}J(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.W(a,t)}Y(e){const t=this.cursor({});return new z(((r,a)=>{t.onerror=l=>{const c=Ey(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((d=>{d?c.continue():r()})):r()}}))}W(e,t){const r=[];return new z(((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const m=new Q4(d),g=t(d.primaryKey,d.value,m);if(g instanceof z){const v=g.catch((T=>(m.done(),z.reject(T))));r.push(v)}m.isDone?a():m.K===null?d.continue():d.continue(m.K)}})).next((()=>z.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function qa(n){return new z(((e,t)=>{n.onsuccess=r=>{const a=r.target.result;e(a)},n.onerror=r=>{const a=Ey(r.target.error);t(a)}}))}let jT=!1;function Ey(n){const e=nr.S(Tt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return jT||(jT=!0,setTimeout((()=>{throw r}),0)),r}}return n}class W4{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){ie("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{ie("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){oa(t)?ie("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await aa(t)}await this.X(6e4)}))}}class $4{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const r=new Set;let a=t,l=!0;return z.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!r.has(c))return ie("IndexBackfiller",`Processing collection: ${c}`),this.ne(e,c,a).next((d=>{a-=d,r.add(c)}));l=!1})))).next((()=>t-a))}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this.re(a,l))).next((d=>(ie("IndexBackfiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>c.size))}))))}re(e,t){let r=e;return t.changes.forEach(((a,l)=>{const c=KA(l);vy(c,r)>0&&(r=c)})),new li(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Qn.oe=-1;function ch(n){return n==null}function qc(n){return n===0&&1/n==-1/0}function $A(n){return typeof n=="number"&&Number.isInteger(n)&&!qc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=zT(e)),e=X4(n.get(t),e);return zT(e)}function X4(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case"":t+="";break;default:t+=l}}return t}function zT(n){return n+""}function er(n){const e=n.length;if(pe(e>=2),e===2)return pe(n.charAt(0)===""&&n.charAt(1)===""),je.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const c=n.indexOf("",l);switch((c<0||c>t)&&he(),n.charAt(c+1)){case"":const d=n.substring(l,c);let m;a.length===0?m=d:(a+=d,m=a,a=""),r.push(m);break;case"":a+=n.substring(l,c),a+="\0";break;case"":a+=n.substring(l,c+1);break;default:he()}l=c+2}return new je(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(n,e){return[n,Pn(e)]}function XA(n,e,t){return[n,Pn(e),t]}const Z4={},J4=["prefixPath","collectionGroup","readTime","documentId"],ek=["prefixPath","collectionGroup","documentId"],tk=["collectionGroup","readTime","prefixPath","documentId"],nk=["canonicalId","targetId"],ik=["targetId","path"],rk=["path","targetId"],sk=["collectionId","parent"],ak=["indexId","uid"],ok=["uid","sequenceNumber"],lk=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],uk=["indexId","uid","orderedDocumentKey"],ck=["userId","collectionPath","documentId"],hk=["userId","collectionPath","largestBatchId"],dk=["userId","collectionGroup","largestBatchId"],ZA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],fk=[...ZA,"documentOverlays"],JA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],eI=JA,Ty=[...eI,"indexConfiguration","indexState","indexEntries"],mk=Ty,pk=[...Ty,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_ extends YA{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Wt(n,e){const t=ue(n);return nr.F(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function yo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function tI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,t){this.comparator=e,this.root=t||mn.EMPTY}insert(e,t){return new ut(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ef(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ef(this.root,e,this.comparator,!1)}getReverseIterator(){return new ef(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ef(this.root,e,this.comparator,!0)}}class ef{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??mn.RED,this.left=a??mn.EMPTY,this.right=l??mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new mn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return mn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw he();const e=this.left.check();if(e!==this.right.check())throw he();return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw he()}get value(){throw he()}get color(){throw he()}get left(){throw he()}get right(){throw he()}copy(e,t,r,a,l){return this}insert(e,t,r){return new mn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new GT(this.data.getIterator())}getIteratorFrom(e){return new GT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ot(this.comparator);return t.data=e,t}}class GT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function fl(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(gt.comparator)}static empty(){return new Yn([])}unionWith(e){let t=new ot(gt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Yn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Pl(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new nI("Invalid base64 string: "+l):l}})(e);return new Dt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Dt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dt.EMPTY_BYTE_STRING=new Dt("");const _k=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fr(n){if(pe(!!n),typeof n=="string"){let e=0;const t=_k.exec(n);if(pe(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pt(n.seconds),nanos:pt(n.nanos)}}function pt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Xs(n){return typeof n=="string"?Dt.fromBase64String(n):Dt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function wy(n){const e=n.mapValue.fields.__previous_value__;return tm(e)?wy(e):e}function Gc(n){const e=Fr(n.mapValue.fields.__local_write_time__.timestampValue);return new yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,t,r,a,l,c,d,m,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=g}}class Zs{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Zs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Zs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ff={nullValue:"NULL_VALUE"};function so(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tm(n)?4:iI(n)?9007199254740991:nm(n)?10:11:he()}function ar(n,e){if(n===e)return!0;const t=so(n);if(t!==so(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Gc(n).isEqual(Gc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Fr(a.timestampValue),d=Fr(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return Xs(a.bytesValue).isEqual(Xs(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return pt(a.geoPointValue.latitude)===pt(l.geoPointValue.latitude)&&pt(a.geoPointValue.longitude)===pt(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return pt(a.integerValue)===pt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=pt(a.doubleValue),d=pt(l.doubleValue);return c===d?qc(c)===qc(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return Pl(n.arrayValue.values||[],e.arrayValue.values||[],ar);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(qT(c)!==qT(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!ar(c[m],d[m])))return!1;return!0})(n,e);default:return he()}}function Hc(n,e){return(n.values||[]).find((t=>ar(t,e)))!==void 0}function Js(n,e){if(n===e)return 0;const t=so(n),r=so(e);if(t!==r)return Se(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Se(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=pt(l.integerValue||l.doubleValue),m=pt(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(n,e);case 3:return HT(n.timestampValue,e.timestampValue);case 4:return HT(Gc(n),Gc(e));case 5:return Se(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=Xs(l),m=Xs(c);return d.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),m=c.split("/");for(let g=0;g<d.length&&g<m.length;g++){const v=Se(d[g],m[g]);if(v!==0)return v}return Se(d.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Se(pt(l.latitude),pt(c.latitude));return d!==0?d:Se(pt(l.longitude),pt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return KT(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var d,m,g,v;const T=l.fields||{},I=c.fields||{},N=(d=T.value)===null||d===void 0?void 0:d.arrayValue,Q=(m=I.value)===null||m===void 0?void 0:m.arrayValue,ee=Se(((g=N==null?void 0:N.values)===null||g===void 0?void 0:g.length)||0,((v=Q==null?void 0:Q.values)===null||v===void 0?void 0:v.length)||0);return ee!==0?ee:KT(N,Q)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Hs.mapValue&&c===Hs.mapValue)return 0;if(l===Hs.mapValue)return 1;if(c===Hs.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),g=c.fields||{},v=Object.keys(g);m.sort(),v.sort();for(let T=0;T<m.length&&T<v.length;++T){const I=Se(m[T],v[T]);if(I!==0)return I;const N=Js(d[m[T]],g[v[T]]);if(N!==0)return N}return Se(m.length,v.length)})(n.mapValue,e.mapValue);default:throw he()}}function HT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Se(n,e);const t=Fr(n),r=Fr(e),a=Se(t.seconds,r.seconds);return a!==0?a:Se(t.nanos,r.nanos)}function KT(n,e){const t=n.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=Js(t[a],r[a]);if(l)return l}return Se(t.length,r.length)}function Vl(n){return p_(n)}function p_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Fr(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Xs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return le.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=p_(l);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${p_(t.fields[c])}`;return a+"}"})(n.mapValue):he()}function ao(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function g_(n){return!!n&&"integerValue"in n}function Kc(n){return!!n&&"arrayValue"in n}function QT(n){return!!n&&"nullValue"in n}function YT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function mf(n){return!!n&&"mapValue"in n}function nm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Rc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return yo(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Rc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Rc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function iI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const rI={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function vk(n){return"nullValue"in n?ff:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ao(Zs.empty(),le.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?nm(n)?rI:{mapValue:{}}:he()}function Ek(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ao(Zs.empty(),le.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?rI:"mapValue"in n?nm(n)?{mapValue:{}}:Hs:he()}function WT(n,e){const t=Js(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function $T(n,e){const t=Js(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.value=e}static empty(){return new pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!mf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rc(t)}setAll(e){let t=gt.emptyPath(),r={},a=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,r,a),r={},a=[],t=d.popLast()}c?r[d.lastSegment()]=Rc(c):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());mf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ar(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];mf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){yo(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new pn(Rc(this.value))}}function sI(n){const e=[];return yo(n.fields,((t,r)=>{const a=new gt([t]);if(mf(r)){const l=sI(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,t,r,a,l,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new ft(e,0,ye.min(),ye.min(),ye.min(),pn.empty(),0)}static newFoundDocument(e,t,r,a){return new ft(e,1,t,ye.min(),r,a,0)}static newNoDocument(e,t){return new ft(e,2,t,ye.min(),ye.min(),pn.empty(),0)}static newUnknownDocument(e,t){return new ft(e,3,t,ye.min(),ye.min(),pn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,t){this.position=e,this.inclusive=t}}function XT(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?r=le.comparator(le.fromName(c.referenceValue),t.key):r=Js(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function ZT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ar(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,t="asc"){this.field=e,this.dir=t}}function Tk(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{}class ze extends aI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new wk(e,t,r):t==="array-contains"?new bk(e,r):t==="in"?new dI(e,r):t==="not-in"?new Sk(e,r):t==="array-contains-any"?new Rk(e,r):new ze(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Ak(e,r):new Ik(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Js(t,this.value)):t!==null&&so(this.value)===so(t)&&this.matchesComparison(Js(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class it extends aI{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new it(e,t)}matches(e){return Ml(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ml(n){return n.op==="and"}function __(n){return n.op==="or"}function Ay(n){return oI(n)&&Ml(n)}function oI(n){for(const e of n.filters)if(e instanceof it)return!1;return!0}function y_(n){if(n instanceof ze)return n.field.canonicalString()+n.op.toString()+Vl(n.value);if(Ay(n))return n.filters.map((e=>y_(e))).join(",");{const e=n.filters.map((t=>y_(t))).join(",");return`${n.op}(${e})`}}function lI(n,e){return n instanceof ze?(function(r,a){return a instanceof ze&&r.op===a.op&&r.field.isEqual(a.field)&&ar(r.value,a.value)})(n,e):n instanceof it?(function(r,a){return a instanceof it&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,c,d)=>l&&lI(c,a.filters[d])),!0):!1})(n,e):void he()}function uI(n,e){const t=n.filters.concat(e);return it.create(t,n.op)}function cI(n){return n instanceof ze?(function(t){return`${t.field.canonicalString()} ${t.op} ${Vl(t.value)}`})(n):n instanceof it?(function(t){return t.op.toString()+" {"+t.getFilters().map(cI).join(" ,")+"}"})(n):"Filter"}class wk extends ze{constructor(e,t,r){super(e,t,r),this.key=le.fromName(r.referenceValue)}matches(e){const t=le.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ak extends ze{constructor(e,t){super(e,"in",t),this.keys=hI("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Ik extends ze{constructor(e,t){super(e,"not-in",t),this.keys=hI("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function hI(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>le.fromName(r.referenceValue)))}class bk extends ze{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Kc(t)&&Hc(t.arrayValue,this.value)}}class dI extends ze{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Hc(this.value.arrayValue,t)}}class Sk extends ze{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Hc(this.value.arrayValue,t)}}class Rk extends ze{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Kc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Hc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e,t=null,r=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.ue=null}}function v_(n,e=null,t=[],r=[],a=null,l=null,c=null){return new Ck(n,e,t,r,a,l,c)}function oo(n){const e=ue(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>y_(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),ch(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Vl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Vl(r))).join(",")),e.ue=t}return e.ue}function hh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Tk(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!lI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ZT(n.startAt,e.startAt)&&ZT(n.endAt,e.endAt)}function Cf(n){return le.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Df(n,e){return n.filters.filter((t=>t instanceof ze&&t.field.isEqual(e)))}function JT(n,e,t){let r=ff,a=!0;for(const l of Df(n,e)){let c=ff,d=!0;switch(l.op){case"<":case"<=":c=vk(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=ff}WT({value:r,inclusive:a},{value:c,inclusive:d})<0&&(r=c,a=d)}if(t!==null){for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const c=t.position[l];WT({value:r,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}function ew(n,e,t){let r=Hs,a=!0;for(const l of Df(n,e)){let c=Hs,d=!0;switch(l.op){case">=":case">":c=Ek(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=Hs}$T({value:r,inclusive:a},{value:c,inclusive:d})>0&&(r=c,a=d)}if(t!==null){for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const c=t.position[l];$T({value:r,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,t=null,r=[],a=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function fI(n,e,t,r,a,l,c,d){return new Qr(n,e,t,r,a,l,c,d)}function Zl(n){return new Qr(n)}function tw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Iy(n){return n.collectionGroup!==null}function Cl(n){const e=ue(n);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new ot(gt.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new Qc(l,r))})),t.has(gt.keyField().canonicalString())||e.ce.push(new Qc(gt.keyField(),r))}return e.ce}function Vn(n){const e=ue(n);return e.le||(e.le=Dk(e,Cl(n))),e.le}function Dk(n,e){if(n.limitType==="F")return v_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Qc(a.field,l)}));const t=n.endAt?new ea(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ea(n.startAt.position,n.startAt.inclusive):null;return v_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function E_(n,e){const t=n.filters.concat([e]);return new Qr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function xf(n,e,t){return new Qr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function dh(n,e){return hh(Vn(n),Vn(e))&&n.limitType===e.limitType}function mI(n){return`${oo(Vn(n))}|lt:${n.limitType}`}function yl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>cI(a))).join(", ")}]`),ch(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>Vl(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>Vl(a))).join(",")),`Target(${r})`})(Vn(n))}; limitType=${n.limitType})`}function fh(n,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):le.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(n,e)&&(function(r,a){for(const l of Cl(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(r,a){return!(r.startAt&&!(function(c,d,m){const g=XT(c,d,m);return c.inclusive?g<=0:g<0})(r.startAt,Cl(r),a)||r.endAt&&!(function(c,d,m){const g=XT(c,d,m);return c.inclusive?g>=0:g>0})(r.endAt,Cl(r),a))})(n,e)}function pI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gI(n){return(e,t)=>{let r=!1;for(const a of Cl(n)){const l=xk(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function xk(n,e,t){const r=n.field.isKeyField()?le.comparator(e.key,t.key):(function(l,c,d){const m=c.data.field(l),g=d.data.field(l);return m!==null&&g!==null?Js(m,g):he()})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return he()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){yo(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return tI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=new ut(le.comparator);function Wn(){return Nk}const _I=new ut(le.comparator);function Ec(...n){let e=_I;for(const t of n)e=e.insert(t.key,t);return e}function yI(n){let e=_I;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function tr(){return Cc()}function vI(){return Cc()}function Cc(){return new la((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Ok=new ut(le.comparator),kk=new ot(le.comparator);function De(...n){let e=kk;for(const t of n)e=e.add(t);return e}const Pk=new ot(Se);function by(){return Pk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qc(e)?"-0":e}}function EI(n){return{integerValue:""+n}}function TI(n,e){return $A(e)?EI(e):Sy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(){this._=void 0}}function Vk(n,e,t){return n instanceof Ll?(function(a,l){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&tm(l)&&(l=wy(l)),l&&(c.fields.__previous_value__=l),{mapValue:c}})(t,e):n instanceof lo?AI(n,e):n instanceof uo?II(n,e):(function(a,l){const c=wI(a,l),d=nw(c)+nw(a.Pe);return g_(c)&&g_(a.Pe)?EI(d):Sy(a.serializer,d)})(n,e)}function Mk(n,e,t){return n instanceof lo?AI(n,e):n instanceof uo?II(n,e):t}function wI(n,e){return n instanceof Ul?(function(r){return g_(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class Ll extends im{}class lo extends im{constructor(e){super(),this.elements=e}}function AI(n,e){const t=bI(e);for(const r of n.elements)t.some((a=>ar(a,r)))||t.push(r);return{arrayValue:{values:t}}}class uo extends im{constructor(e){super(),this.elements=e}}function II(n,e){let t=bI(e);for(const r of n.elements)t=t.filter((a=>!ar(a,r)));return{arrayValue:{values:t}}}class Ul extends im{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function nw(n){return pt(n.integerValue||n.doubleValue)}function bI(n){return Kc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,t){this.field=e,this.transform=t}}function Lk(n,e){return n.field.isEqual(e.field)&&(function(r,a){return r instanceof lo&&a instanceof lo||r instanceof uo&&a instanceof uo?Pl(r.elements,a.elements,ar):r instanceof Ul&&a instanceof Ul?ar(r.Pe,a.Pe):r instanceof Ll&&a instanceof Ll})(n.transform,e.transform)}class Uk{constructor(e,t){this.version=e,this.transformResults=t}}class _t{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _t}static exists(e){return new _t(void 0,e)}static updateTime(e){return new _t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class rm{}function SI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new eu(n.key,_t.none()):new Jl(n.key,n.data,_t.none());{const t=n.data,r=pn.empty();let a=new ot(gt.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new Yr(n.key,r,new Yn(a.toArray()),_t.none())}}function Bk(n,e,t){n instanceof Jl?(function(a,l,c){const d=a.value.clone(),m=rw(a.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Yr?(function(a,l,c){if(!pf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=rw(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(RI(a)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Dc(n,e,t,r){return n instanceof Jl?(function(l,c,d,m){if(!pf(l.precondition,c))return d;const g=l.value.clone(),v=sw(l.fieldTransforms,m,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,r):n instanceof Yr?(function(l,c,d,m){if(!pf(l.precondition,c))return d;const g=sw(l.fieldTransforms,m,c),v=c.data;return v.setAll(RI(l)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(n,e,t,r):(function(l,c,d){return pf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function jk(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),l=wI(r.transform,a||null);l!=null&&(t===null&&(t=pn.empty()),t.set(r.field,l))}return t||null}function iw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Pl(r,a,((l,c)=>Lk(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Jl extends rm{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Yr extends rm{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function RI(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function rw(n,e,t){const r=new Map;pe(n.length===t.length);for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,d=e.data.field(l.field);r.set(l.field,Mk(c,d,t[a]))}return r}function sw(n,e,t){const r=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);r.set(a.field,Vk(l,c,e))}return r}class eu extends rm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ry extends rm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&Bk(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Dc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Dc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=vI();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const m=SI(c,d);m!==null&&r.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(ye.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),De())}isEqual(e){return this.batchId===e.batchId&&Pl(this.mutations,e.mutations,((t,r)=>iw(t,r)))&&Pl(this.baseMutations,e.baseMutations,((t,r)=>iw(t,r)))}}class Dy{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){pe(e.mutations.length===r.length);let a=(function(){return Ok})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new Dy(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt,Ge;function CI(n){switch(n){default:return he();case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0}}function DI(n){if(n===void 0)return Vt("GRPC error has no .code"),G.UNKNOWN;switch(n){case Gt.OK:return G.OK;case Gt.CANCELLED:return G.CANCELLED;case Gt.UNKNOWN:return G.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return G.INTERNAL;case Gt.UNAVAILABLE:return G.UNAVAILABLE;case Gt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case Gt.NOT_FOUND:return G.NOT_FOUND;case Gt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case Gt.ABORTED:return G.ABORTED;case Gt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case Gt.DATA_LOSS:return G.DATA_LOSS;default:return he()}}(Ge=Gt||(Gt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=new eo([4294967295,4294967295],0);function aw(n){const e=xI().encode(n),t=new MA;return t.update(e),new Uint8Array(t.digest())}function ow(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new eo([t,r],0),new eo([a,l],0)]}class Ny{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Tc(`Invalid padding: ${t}`);if(r<0)throw new Tc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Tc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Tc(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=eo.fromNumber(this.Ie)}Ee(e,t,r){let a=e.add(t.multiply(eo.fromNumber(r)));return a.compare(Fk)===1&&(a=new eo([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=aw(e),[r,a]=ow(t);for(let l=0;l<this.hashCount;l++){const c=this.Ee(r,a,l);if(!this.de(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Ny(l,a,t);return r.forEach((d=>c.insert(d))),c}insert(e){if(this.Ie===0)return;const t=aw(e),[r,a]=ow(t);for(let l=0;l<this.hashCount;l++){const c=this.Ee(r,a,l);this.Ae(c)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Tc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,gh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ph(ye.min(),a,new ut(Se),Wn(),De())}}class gh{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new gh(r,t,De(),De(),De())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,t,r,a){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=a}}class NI{constructor(e,t){this.targetId=e,this.me=t}}class OI{constructor(e,t,r=Dt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class lw{constructor(){this.fe=0,this.ge=cw(),this.pe=Dt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=De(),t=De(),r=De();return this.ge.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:he()}})),new gh(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=cw()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,pe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class qk{constructor(e){this.Le=e,this.Be=new Map,this.ke=Wn(),this.qe=uw(),this.Qe=new ut(Se)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:he()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((r,a)=>{this.ze(a)&&t(a)}))}He(e){const t=e.targetId,r=e.me.count,a=this.Je(t);if(a){const l=a.target;if(Cf(l))if(r===0){const c=new le(l.path);this.Ue(t,c,ft.newNoDocument(c,ye.min()))}else pe(r===1);else{const c=this.Ye(t);if(c!==r){const d=this.Ze(e),m=d?this.Xe(d,e,c):1;if(m!==0){this.je(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,g)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=Xs(r).toUint8Array()}catch(m){if(m instanceof nI)return sr("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new Ny(c,a,l)}catch(m){return sr(m instanceof Tc?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.Ie===0?null:d}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const c=this.Le.tt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.Ue(t,l,null),a++)})),a}rt(e){const t=new Map;this.Be.forEach(((l,c)=>{const d=this.Je(c);if(d){if(l.current&&Cf(d.target)){const m=new le(d.target.path);this.ke.get(m)!==null||this.it(c,m)||this.Ue(c,m,ft.newNoDocument(m,e))}l.be&&(t.set(c,l.ve()),l.Ce())}}));let r=De();this.qe.forEach(((l,c)=>{let d=!0;c.forEachWhile((m=>{const g=this.Je(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(l))})),this.ke.forEach(((l,c)=>c.setReadTime(e)));const a=new ph(e,t,this.Qe,this.ke,r);return this.ke=Wn(),this.qe=uw(),this.Qe=new ut(Se),a}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,t)?a.Fe(t,1):a.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new lw,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new ot(Se),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||ie("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new lw),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function uw(){return new ut(le.comparator)}function cw(){return new ut(le.comparator)}const Gk={asc:"ASCENDING",desc:"DESCENDING"},Hk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kk={and:"AND",or:"OR"};class Qk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function T_(n,e){return n.useProto3Json||ch(e)?e:{value:e}}function Bl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Yk(n,e){return Bl(n,e.toTimestamp())}function Mt(n){return pe(!!n),ye.fromTimestamp((function(t){const r=Fr(t);return new yt(r.seconds,r.nanos)})(n))}function Oy(n,e){return w_(n,e).canonicalString()}function w_(n,e){const t=(function(a){return new je(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function PI(n){const e=je.fromString(n);return pe(GI(e)),e}function Yc(n,e){return Oy(n.databaseId,e.path)}function ir(n,e){const t=PI(e);if(t.get(1)!==n.databaseId.projectId)throw new ne(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ne(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new le(LI(t))}function VI(n,e){return Oy(n.databaseId,e)}function MI(n){const e=PI(n);return e.length===4?je.emptyPath():LI(e)}function A_(n){return new je(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function LI(n){return pe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function hw(n,e,t){return{name:Yc(n,e),fields:t.value.mapValue.fields}}function UI(n,e,t){const r=ir(n,e.name),a=Mt(e.updateTime),l=e.createTime?Mt(e.createTime):ye.min(),c=new pn({mapValue:{fields:e.fields}}),d=ft.newFoundDocument(r,a,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Wk(n,e){return"found"in e?(function(r,a){pe(!!a.found),a.found.name,a.found.updateTime;const l=ir(r,a.found.name),c=Mt(a.found.updateTime),d=a.found.createTime?Mt(a.found.createTime):ye.min(),m=new pn({mapValue:{fields:a.found.fields}});return ft.newFoundDocument(l,c,d,m)})(n,e):"missing"in e?(function(r,a){pe(!!a.missing),pe(!!a.readTime);const l=ir(r,a.missing),c=Mt(a.readTime);return ft.newNoDocument(l,c)})(n,e):he()}function $k(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:he()})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,v){return g.useProto3Json?(pe(v===void 0||typeof v=="string"),Dt.fromBase64String(v||"")):(pe(v===void 0||v instanceof Buffer||v instanceof Uint8Array),Dt.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const v=g.code===void 0?G.UNKNOWN:DI(g.code);return new ne(v,g.message||"")})(c);t=new OI(r,a,l,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=ir(n,r.document.name),l=Mt(r.document.updateTime),c=r.document.createTime?Mt(r.document.createTime):ye.min(),d=new pn({mapValue:{fields:r.document.fields}}),m=ft.newFoundDocument(a,l,c,d),g=r.targetIds||[],v=r.removedTargetIds||[];t=new gf(g,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=ir(n,r.document),l=r.readTime?Mt(r.readTime):ye.min(),c=ft.newNoDocument(a,l),d=r.removedTargetIds||[];t=new gf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=ir(n,r.document),l=r.removedTargetIds||[];t=new gf([],l,a,null)}else{if(!("filter"in e))return he();{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new zk(a,l),d=r.targetId;t=new NI(d,c)}}return t}function Wc(n,e){let t;if(e instanceof Jl)t={update:hw(n,e.key,e.value)};else if(e instanceof eu)t={delete:Yc(n,e.key)};else if(e instanceof Yr)t={update:hw(n,e.key,e.data),updateMask:nP(e.fieldMask)};else{if(!(e instanceof Ry))return he();t={verify:Yc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const d=c.transform;if(d instanceof Ll)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof lo)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof uo)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Ul)return{fieldPath:c.field.canonicalString(),increment:d.Pe};throw he()})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:Yk(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:he()})(n,e.precondition)),t}function I_(n,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?_t.updateTime(Mt(l.updateTime)):l.exists!==void 0?_t.exists(l.exists):_t.none()})(e.currentDocument):_t.none(),r=e.updateTransforms?e.updateTransforms.map((a=>(function(c,d){let m=null;if("setToServerValue"in d)pe(d.setToServerValue==="REQUEST_TIME"),m=new Ll;else if("appendMissingElements"in d){const v=d.appendMissingElements.values||[];m=new lo(v)}else if("removeAllFromArray"in d){const v=d.removeAllFromArray.values||[];m=new uo(v)}else"increment"in d?m=new Ul(c,d.increment):he();const g=gt.fromServerFormat(d.fieldPath);return new mh(g,m)})(n,a))):[];if(e.update){e.update.name;const a=ir(n,e.update.name),l=new pn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(m){const g=m.fieldPaths||[];return new Yn(g.map((v=>gt.fromServerFormat(v))))})(e.updateMask);return new Yr(a,l,c,t,r)}return new Jl(a,l,t,r)}if(e.delete){const a=ir(n,e.delete);return new eu(a,t)}if(e.verify){const a=ir(n,e.verify);return new Ry(a,t)}return he()}function Xk(n,e){return n&&n.length>0?(pe(e!==void 0),n.map((t=>(function(a,l){let c=a.updateTime?Mt(a.updateTime):Mt(l);return c.isEqual(ye.min())&&(c=Mt(l)),new Uk(c,a.transformResults||[])})(t,e)))):[]}function BI(n,e){return{documents:[VI(n,e.path)]}}function jI(n,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=VI(n,a);const l=(function(g){if(g.length!==0)return qI(it.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((v=>(function(I){return{field:vl(I.field),direction:Jk(I.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=T_(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{_t:t,parent:a}}function zI(n){let e=MI(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){pe(r===1);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(T){const I=FI(T);return I instanceof it&&Ay(I)?I.getFilters():[I]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((I=>(function(Q){return new Qc(El(Q.field),(function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Q.direction))})(I)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let I;return I=typeof T=="object"?T.value:T,ch(I)?null:I})(t.limit));let m=null;t.startAt&&(m=(function(T){const I=!!T.before,N=T.values||[];return new ea(N,I)})(t.startAt));let g=null;return t.endAt&&(g=(function(T){const I=!T.before,N=T.values||[];return new ea(N,I)})(t.endAt)),fI(e,a,c,l,d,"F",m,g)}function Zk(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function FI(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=El(t.unaryFilter.field);return ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=El(t.unaryFilter.field);return ze.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=El(t.unaryFilter.field);return ze.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=El(t.unaryFilter.field);return ze.create(c,"!=",{nullValue:"NULL_VALUE"});default:return he()}})(n):n.fieldFilter!==void 0?(function(t){return ze.create(El(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return he()}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return it.create(t.compositeFilter.filters.map((r=>FI(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return he()}})(t.compositeFilter.op))})(n):he()}function Jk(n){return Gk[n]}function eP(n){return Hk[n]}function tP(n){return Kk[n]}function vl(n){return{fieldPath:n.canonicalString()}}function El(n){return gt.fromServerFormat(n.fieldPath)}function qI(n){return n instanceof ze?(function(t){if(t.op==="=="){if(YT(t.value))return{unaryFilter:{field:vl(t.field),op:"IS_NAN"}};if(QT(t.value))return{unaryFilter:{field:vl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(YT(t.value))return{unaryFilter:{field:vl(t.field),op:"IS_NOT_NAN"}};if(QT(t.value))return{unaryFilter:{field:vl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vl(t.field),op:eP(t.op),value:t.value}}})(n):n instanceof it?(function(t){const r=t.getFilters().map((a=>qI(a)));return r.length===1?r[0]:{compositeFilter:{op:tP(t.op),filters:r}}})(n):he()}function nP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function GI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,t,r,a,l=ye.min(),c=ye.min(),d=Dt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new Lr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.ct=e}}function iP(n,e){let t;if(e.document)t=UI(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=le.fromSegments(e.noDocument.path),a=ho(e.noDocument.readTime);t=ft.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return he();{const r=le.fromSegments(e.unknownDocument.path),a=ho(e.unknownDocument.version);t=ft.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime((function(a){const l=new yt(a[0],a[1]);return ye.fromTimestamp(l)})(e.readTime)),t}function dw(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Nf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(l,c){return{name:Yc(l,c.key),fields:c.data.value.mapValue.fields,updateTime:Bl(l,c.version.toTimestamp()),createTime:Bl(l,c.createTime.toTimestamp())}})(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:co(e.version)};else{if(!e.isUnknownDocument())return he();r.unknownDocument={path:t.path.toArray(),version:co(e.version)}}return r}function Nf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function co(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ho(n){const e=new yt(n.seconds,n.nanoseconds);return ye.fromTimestamp(e)}function Ga(n,e){const t=(e.baseMutations||[]).map((l=>I_(n.ct,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map((l=>I_(n.ct,l))),a=yt.fromMillis(e.localWriteTimeMs);return new Cy(e.batchId,a,t,r)}function wc(n){const e=ho(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ho(n.lastLimboFreeSnapshotVersion):ye.min();let r;return r=(function(l){return l.documents!==void 0})(n.query)?(function(l){return pe(l.documents.length===1),Vn(Zl(MI(l.documents[0])))})(n.query):(function(l){return Vn(zI(l))})(n.query),new Lr(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Dt.fromBase64String(n.resumeToken))}function KI(n,e){const t=co(e.snapshotVersion),r=co(e.lastLimboFreeSnapshotVersion);let a;a=Cf(e.target)?BI(n.ct,e.target):jI(n.ct,e.target)._t;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:oo(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function ky(n){const e=zI({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?xf(e,e.limit,"L"):e}function Gg(n,e){return new xy(e.largestBatchId,I_(n.ct,e.overlayMutation))}function fw(n,e){const t=e.path.lastSegment();return[n,Pn(e.path.popLast()),t]}function mw(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:co(r.readTime),documentKey:Pn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{getBundleMetadata(e,t){return pw(e).get(t).next((r=>{if(r)return(function(l){return{id:l.bundleId,createTime:ho(l.createTime),version:l.version}})(r)}))}saveBundleMetadata(e,t){return pw(e).put((function(a){return{bundleId:a.id,createTime:co(Mt(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return gw(e).get(t).next((r=>{if(r)return(function(l){return{name:l.name,query:ky(l.bundledQuery),readTime:ho(l.readTime)}})(r)}))}saveNamedQuery(e,t){return gw(e).put((function(a){return{name:a.name,readTime:co(Mt(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function pw(n){return Wt(n,"bundles")}function gw(n){return Wt(n,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const r=t.uid||"";return new sm(e,r)}getOverlay(e,t){return hc(e).get(fw(this.userId,t)).next((r=>r?Gg(this.serializer,r):null))}getOverlays(e,t){const r=tr();return z.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){const a=[];return r.forEach(((l,c)=>{const d=new xy(t,c);a.push(this.ht(e,d))})),z.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach((c=>a.add(Pn(c.getCollectionPath()))));const l=[];return a.forEach((c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);l.push(hc(e).j("collectionPathOverlayIndex",d))})),z.waitFor(l)}getOverlaysForCollection(e,t,r){const a=tr(),l=Pn(t),c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return hc(e).U("collectionPathOverlayIndex",c).next((d=>{for(const m of d){const g=Gg(this.serializer,m);a.set(g.getKey(),g)}return a}))}getOverlaysForCollectionGroup(e,t,r,a){const l=tr();let c;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return hc(e).J({index:"collectionGroupOverlayIndex",range:d},((m,g,v)=>{const T=Gg(this.serializer,g);l.size()<a||T.largestBatchId===c?(l.set(T.getKey(),T),c=T.largestBatchId):v.done()})).next((()=>l))}ht(e,t){return hc(e).put((function(a,l,c){const[d,m,g]=fw(l,c.mutation.key);return{userId:l,collectionPath:m,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Wc(a.ct,c.mutation)}})(this.serializer,this.userId,t))}}function hc(n){return Wt(n,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{Pt(e){return Wt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((t=>{const r=t==null?void 0:t.value;return r?Dt.fromUint8Array(r):Dt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(pt(e.integerValue));else if("doubleValue"in e){const r=pt(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),qc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Fr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Xs(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?iI(e)?this.dt(t,Number.MAX_SAFE_INTEGER):nm(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):he()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const a of Object.keys(r))this.Vt(a,t),this.Tt(r[a],t)}wt(e,t){var r,a;const l=e.fields||{};this.dt(t,53);const c="value",d=((a=(r=l[c].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.length)||0;this.dt(t,15),t.At(pt(d)),this.Vt(c,t),this.Tt(l[c],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const a of r)this.Tt(a,t)}yt(e,t){this.dt(t,37),le.fromName(e).path.forEach((r=>{this.dt(t,60),this.Dt(r,t)}))}dt(e,t){e.At(t)}ft(e){e.At(2)}}Ha.vt=new Ha;function aP(n){if(n===0)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function _w(n){const e=64-(function(r){let a=0;for(let l=0;l<8;++l){const c=aP(255&r[l]);if(a+=c,c!==8)break}return a})(n);return Math.ceil(e/8)}class oP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const a=t.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const a=t.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(e){const t=this.qt(e),r=_w(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Kt(e){const t=this.qt(e),r=_w(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Ft(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class lP{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class uP{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class dc{constructor(){this.jt=new oP,this.Ht=new lP(this.jt),this.Jt=new uP(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,t,r,a){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=a}Zt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ka(this.indexId,this.documentKey,this.arrayValue,r)}}function Bs(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=yw(n.arrayValue,e.arrayValue),t!==0?t:(t=yw(n.directionalValue,e.directionalValue),t!==0?t:le.comparator(n.documentKey,e.documentKey)))}function yw(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e){this.Xt=new ot(((t,r)=>gt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(pe(e.collectionGroup===this.collectionId),this.nn)return!1;const t=f_(e);if(t!==void 0&&!this.sn(t))return!1;const r=Fa(e);let a=new Set,l=0,c=0;for(;l<r.length&&this.sn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.Xt.size>0){const d=this.Xt.getIterator().getNext();if(!a.has(d.field.canonicalString())){const m=r[l];if(!this.on(d,m)||!this._n(this.en[c++],m))return!1}++l}for(;l<r.length;++l){const d=r[l];if(c>=this.en.length||!this._n(this.en[c++],d))return!1}return!0}an(){if(this.nn)return null;let e=new ot(gt.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new hf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new hf(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new hf(r.field,r.dir==="asc"?0:1)));return new Rf(Rf.UNKNOWN_ID,this.collectionId,t,Fc.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(n){var e,t;if(pe(n instanceof ze||n instanceof it),n instanceof ze){if(n instanceof dI){const a=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map((l=>ze.create(n.field,"==",l))))||[];return it.create(a,"or")}return n}const r=n.filters.map((a=>QI(a)));return it.create(r,n.op)}function cP(n){if(n.getFilters().length===0)return[];const e=R_(QI(n));return pe(YI(e)),b_(e)||S_(e)?[e]:e.getFilters()}function b_(n){return n instanceof ze}function S_(n){return n instanceof it&&Ay(n)}function YI(n){return b_(n)||S_(n)||(function(t){if(t instanceof it&&__(t)){for(const r of t.getFilters())if(!b_(r)&&!S_(r))return!1;return!0}return!1})(n)}function R_(n){if(pe(n instanceof ze||n instanceof it),n instanceof ze)return n;if(n.filters.length===1)return R_(n.filters[0]);const e=n.filters.map((r=>R_(r)));let t=it.create(e,n.op);return t=Of(t),YI(t)?t:(pe(t instanceof it),pe(Ml(t)),pe(t.filters.length>1),t.filters.reduce(((r,a)=>Py(r,a))))}function Py(n,e){let t;return pe(n instanceof ze||n instanceof it),pe(e instanceof ze||e instanceof it),t=n instanceof ze?e instanceof ze?(function(a,l){return it.create([a,l],"and")})(n,e):Ew(n,e):e instanceof ze?Ew(e,n):(function(a,l){if(pe(a.filters.length>0&&l.filters.length>0),Ml(a)&&Ml(l))return uI(a,l.getFilters());const c=__(a)?a:l,d=__(a)?l:a,m=c.filters.map((g=>Py(g,d)));return it.create(m,"or")})(n,e),Of(t)}function Ew(n,e){if(Ml(e))return uI(e,n.getFilters());{const t=e.filters.map((r=>Py(n,r)));return it.create(t,"or")}}function Of(n){if(pe(n instanceof ze||n instanceof it),n instanceof ze)return n;const e=n.getFilters();if(e.length===1)return Of(e[0]);if(oI(n))return n;const t=e.map((a=>Of(a))),r=[];return t.forEach((a=>{a instanceof ze?r.push(a):a instanceof it&&(a.op===n.op?r.push(...a.filters):r.push(a))})),r.length===1?r[0]:it.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(){this.un=new Vy}addToCollectionParentIndex(e,t){return this.un.add(t),z.resolve()}getCollectionParents(e,t){return z.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return z.resolve()}deleteFieldIndex(e,t){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,t){return z.resolve()}getDocumentsMatchingTarget(e,t){return z.resolve(null)}getIndexType(e,t){return z.resolve(0)}getFieldIndexes(e,t){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,t){return z.resolve(li.min())}getMinOffsetFromCollectionGroup(e,t){return z.resolve(li.min())}updateCollectionGroup(e,t,r){return z.resolve()}updateIndexEntries(e,t){return z.resolve()}}class Vy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new ot(je.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new ot(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf=new Uint8Array(0);class dP{constructor(e,t){this.databaseId=t,this.cn=new Vy,this.ln=new la((r=>oo(r)),((r,a)=>hh(r,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.cn.add(t)}));const l={collectionId:r,parent:Pn(a)};return Tw(e).put(l)}return z.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[GA(t),""],!1,!0);return Tw(e).U(a).next((l=>{for(const c of l){if(c.collectionId!==t)break;r.push(er(c.parent))}return r}))}addFieldIndex(e,t){const r=fc(e),a=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((m=>[m.fieldPath.canonicalString(),m.kind]))}})(t);delete a.indexId;const l=r.add(a);if(t.indexState){const c=pl(e);return l.next((d=>{c.put(mw(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const r=fc(e),a=pl(e),l=ml(e);return r.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=fc(e),r=ml(e),a=pl(e);return t.j().next((()=>r.j())).next((()=>a.j()))}createTargetIndexes(e,t){return z.forEach(this.hn(t),(r=>this.getIndexType(e,r).next((a=>{if(a===0||a===1){const l=new vw(r).an();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const r=ml(e);let a=!0;const l=new Map;return z.forEach(this.hn(t),(c=>this.Pn(e,c).next((d=>{a&&(a=!!d),l.set(c,d)})))).next((()=>{if(a){let c=De();const d=[];return z.forEach(l,((m,g)=>{ie("IndexedDbIndexManager",`Using index ${(function(ce){return`id=${ce.indexId}|cg=${ce.collectionGroup}|f=${ce.fields.map((Ae=>`${Ae.fieldPath}:${Ae.kind}`)).join(",")}`})(m)} to execute ${oo(t)}`);const v=(function(ce,Ae){const Re=f_(Ae);if(Re===void 0)return null;for(const Te of Df(ce,Re.fieldPath))switch(Te.op){case"array-contains-any":return Te.value.arrayValue.values||[];case"array-contains":return[Te.value]}return null})(g,m),T=(function(ce,Ae){const Re=new Map;for(const Te of Fa(Ae))for(const R of Df(ce,Te.fieldPath))switch(R.op){case"==":case"in":Re.set(Te.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return Re.set(Te.fieldPath.canonicalString(),R.value),Array.from(Re.values())}return null})(g,m),I=(function(ce,Ae){const Re=[];let Te=!0;for(const R of Fa(Ae)){const S=R.kind===0?JT(ce,R.fieldPath,ce.startAt):ew(ce,R.fieldPath,ce.startAt);Re.push(S.value),Te&&(Te=S.inclusive)}return new ea(Re,Te)})(g,m),N=(function(ce,Ae){const Re=[];let Te=!0;for(const R of Fa(Ae)){const S=R.kind===0?ew(ce,R.fieldPath,ce.endAt):JT(ce,R.fieldPath,ce.endAt);Re.push(S.value),Te&&(Te=S.inclusive)}return new ea(Re,Te)})(g,m),Q=this.In(m,g,I),ee=this.In(m,g,N),Z=this.Tn(m,g,T),te=this.En(m.indexId,v,Q,I.inclusive,ee,N.inclusive,Z);return z.forEach(te,(me=>r.G(me,t.limit).next((ce=>{ce.forEach((Ae=>{const Re=le.fromSegments(Ae.documentKey);c.has(Re)||(c=c.add(Re),d.push(Re))}))}))))})).next((()=>d))}return z.resolve(null)}))}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=cP(it.create(e.filters,"and")).map((r=>v_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,t),t)}En(e,t,r,a,l,c,d){const m=(t!=null?t.length:1)*Math.max(r.length,l.length),g=m/(t!=null?t.length:1),v=[];for(let T=0;T<m;++T){const I=t?this.dn(t[T/g]):tf,N=this.An(e,I,r[T%g],a),Q=this.Rn(e,I,l[T%g],c),ee=d.map((Z=>this.An(e,I,Z,!0)));v.push(...this.createRange(N,Q,ee))}return v}An(e,t,r,a){const l=new Ka(e,le.empty(),t,r);return a?l:l.Zt()}Rn(e,t,r,a){const l=new Ka(e,le.empty(),t,r);return a?l.Zt():l}Pn(e,t){const r=new vw(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let c=null;for(const d of l)r.rn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c}))}getIndexType(e,t){let r=2;const a=this.hn(t);return z.forEach(a,(l=>this.Pn(e,l).next((c=>{c?r!==0&&c.fields.length<(function(m){let g=new ot(gt.comparator),v=!1;for(const T of m.filters)for(const I of T.getFlattenedFilters())I.field.isKeyField()||(I.op==="array-contains"||I.op==="array-contains-any"?v=!0:g=g.add(I.field));for(const T of m.orderBy)T.field.isKeyField()||(g=g.add(T.field));return g.size+(v?1:0)})(l)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(t)&&a.length>1&&r===2?1:r))}Vn(e,t){const r=new dc;for(const a of Fa(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=r.Yt(a.kind);Ha.vt.It(l,c)}return r.zt()}dn(e){const t=new dc;return Ha.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new dc;return Ha.vt.It(ao(this.databaseId,t),r.Yt((function(l){const c=Fa(l);return c.length===0?0:c[c.length-1].kind})(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let a=[];a.push(new dc);let l=0;for(const c of Fa(e)){const d=r[l++];for(const m of a)if(this.fn(t,c.fieldPath)&&Kc(d))a=this.gn(a,c,d);else{const g=m.Yt(c.kind);Ha.vt.It(d,g)}}return this.pn(a)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const a=[...e],l=[];for(const c of r.arrayValue.values||[])for(const d of a){const m=new dc;m.seed(d.zt()),Ha.vt.It(c,m.Yt(t.kind)),l.push(m)}return l}fn(e,t){return!!e.filters.find((r=>r instanceof ze&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=fc(e),a=pl(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next((l=>{const c=[];return z.forEach(l,(d=>a.get([d.indexId,this.uid]).next((m=>{c.push((function(v,T){const I=T?new Fc(T.sequenceNumber,new li(ho(T.readTime),new le(er(T.documentKey)),T.largestBatchId)):Fc.empty(),N=v.fields.map((([Q,ee])=>new hf(gt.fromServerFormat(Q),ee)));return new Rf(v.indexId,v.collectionGroup,N,I)})(d,m))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Se(r.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const a=fc(e),l=pl(e);return this.yn(e).next((c=>a.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((d=>z.forEach(d,(m=>l.put(mw(m.indexId,this.uid,c,r))))))))}updateIndexEntries(e,t){const r=new Map;return z.forEach(t,((a,l)=>{const c=r.get(a.collectionGroup);return(c?z.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next((d=>(r.set(a.collectionGroup,d),z.forEach(d,(m=>this.wn(e,a,m).next((g=>{const v=this.Sn(l,m);return g.isEqual(v)?z.resolve():this.bn(e,l,m,g,v)})))))))}))}Dn(e,t,r,a){return ml(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,a){return ml(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const a=ml(e);let l=new ot(Bs);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},((c,d)=>{l=l.add(new Ka(r.indexId,t,d.arrayValue,d.directionalValue))})).next((()=>l))}Sn(e,t){let r=new ot(Bs);const a=this.Vn(t,e);if(a==null)return r;const l=f_(t);if(l!=null){const c=e.data.field(l.fieldPath);if(Kc(c))for(const d of c.arrayValue.values||[])r=r.add(new Ka(t.indexId,e.key,this.dn(d),a))}else r=r.add(new Ka(t.indexId,e.key,tf,a));return r}bn(e,t,r,a,l){ie("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return(function(m,g,v,T,I){const N=m.getIterator(),Q=g.getIterator();let ee=fl(N),Z=fl(Q);for(;ee||Z;){let te=!1,me=!1;if(ee&&Z){const ce=v(ee,Z);ce<0?me=!0:ce>0&&(te=!0)}else ee!=null?me=!0:te=!0;te?(T(Z),Z=fl(Q)):me?(I(ee),ee=fl(N)):(ee=fl(N),Z=fl(Q))}})(a,l,Bs,(d=>{c.push(this.Dn(e,t,r,d))}),(d=>{c.push(this.vn(e,t,r,d))})),z.waitFor(c)}yn(e){let t=1;return pl(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((c,d)=>Bs(c,d))).filter(((c,d,m)=>!d||Bs(c,m[d-1])!==0));const a=[];a.push(e);for(const c of r){const d=Bs(c,e),m=Bs(c,t);if(d===0)a[0]=e.Zt();else if(d>0&&m<0)a.push(c),a.push(c.Zt());else if(m>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Cn(a[c],a[c+1]))return[];const d=[a[c].indexId,this.uid,a[c].arrayValue,a[c].directionalValue,tf,[]],m=[a[c+1].indexId,this.uid,a[c+1].arrayValue,a[c+1].directionalValue,tf,[]];l.push(IDBKeyRange.bound(d,m))}return l}Cn(e,t){return Bs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ww)}getMinOffset(e,t){return z.mapArray(this.hn(t),(r=>this.Pn(e,r).next((a=>a||he())))).next(ww)}}function Tw(n){return Wt(n,"collectionParents")}function ml(n){return Wt(n,"indexEntries")}function fc(n){return Wt(n,"indexConfiguration")}function pl(n){return Wt(n,"indexState")}function ww(n){pe(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const a=n[r].indexState.offset;vy(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new li(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Kn{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Kn(e,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(n,e,t){const r=n.store("mutations"),a=n.store("documentMutations"),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const m=r.J({range:c},((v,T,I)=>(d++,I.delete())));l.push(m.next((()=>{pe(d===1)})));const g=[];for(const v of t.mutations){const T=XA(e,v.key.path,t.batchId);l.push(a.delete(T)),g.push(v.key)}return z.waitFor(l).next((()=>g))}function kf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw he();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kn.DEFAULT_COLLECTION_PERCENTILE=10,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kn.DEFAULT=new Kn(41943040,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kn.DISABLED=new Kn(-1,0,0);class am{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Fn={}}static lt(e,t,r,a){pe(e.uid!=="");const l=e.isAuthenticated()?e.uid:"";return new am(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return js(e).J({index:"userMutationsIndex",range:r},((a,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,r,a){const l=Tl(e),c=js(e);return c.add({}).next((d=>{pe(typeof d=="number");const m=new Cy(d,t,r,a),g=(function(N,Q,ee){const Z=ee.baseMutations.map((me=>Wc(N.ct,me))),te=ee.mutations.map((me=>Wc(N.ct,me)));return{userId:Q,batchId:ee.batchId,localWriteTimeMs:ee.localWriteTime.toMillis(),baseMutations:Z,mutations:te}})(this.serializer,this.userId,m),v=[];let T=new ot(((I,N)=>Se(I.canonicalString(),N.canonicalString())));for(const I of a){const N=XA(this.userId,I.key.path,d);T=T.add(I.key.path.popLast()),v.push(c.put(g)),v.push(l.put(N,Z4))}return T.forEach((I=>{v.push(this.indexManager.addToCollectionParentIndex(e,I))})),e.addOnCommittedListener((()=>{this.Fn[d]=m.keys()})),z.waitFor(v).next((()=>m))}))}lookupMutationBatch(e,t){return js(e).get(t).next((r=>r?(pe(r.userId===this.userId),Ga(this.serializer,r)):null))}Mn(e,t){return this.Fn[t]?z.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const a=r.keys();return this.Fn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return js(e).J({index:"userMutationsIndex",range:a},((c,d,m)=>{d.userId===this.userId&&(pe(d.batchId>=r),l=Ga(this.serializer,d)),m.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return js(e).J({index:"userMutationsIndex",range:t,reverse:!0},((a,l,c)=>{r=l.batchId,c.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return js(e).U("userMutationsIndex",t).next((r=>r.map((a=>Ga(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=df(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return Tl(e).J({range:a},((c,d,m)=>{const[g,v,T]=c,I=er(v);if(g===this.userId&&t.path.isEqual(I))return js(e).get(T).next((N=>{if(!N)throw he();pe(N.userId===this.userId),l.push(Ga(this.serializer,N))}));m.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ot(Se);const a=[];return t.forEach((l=>{const c=df(this.userId,l.path),d=IDBKeyRange.lowerBound(c),m=Tl(e).J({range:d},((g,v,T)=>{const[I,N,Q]=g,ee=er(N);I===this.userId&&l.path.isEqual(ee)?r=r.add(Q):T.done()}));a.push(m)})),z.waitFor(a).next((()=>this.xn(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=df(this.userId,r),c=IDBKeyRange.lowerBound(l);let d=new ot(Se);return Tl(e).J({range:c},((m,g,v)=>{const[T,I,N]=m,Q=er(I);T===this.userId&&r.isPrefixOf(Q)?Q.length===a&&(d=d.add(N)):v.done()})).next((()=>this.xn(e,d)))}xn(e,t){const r=[],a=[];return t.forEach((l=>{a.push(js(e).get(l).next((c=>{if(c===null)throw he();pe(c.userId===this.userId),r.push(Ga(this.serializer,c))})))})),z.waitFor(a).next((()=>r))}removeMutationBatch(e,t){return WI(e._e,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.On(t.batchId)})),z.forEach(r,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return z.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return Tl(e).J({range:r},((l,c,d)=>{if(l[0]===this.userId){const m=er(l[1]);a.push(m)}else d.done()})).next((()=>{pe(a.length===0)}))}))}containsKey(e,t){return $I(e,this.userId,t)}Nn(e){return XI(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function $I(n,e,t){const r=df(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let c=!1;return Tl(n).J({range:l,H:!0},((d,m,g)=>{const[v,T,I]=d;v===e&&T===a&&(c=!0),g.done()})).next((()=>c))}function js(n){return Wt(n,"mutations")}function Tl(n){return Wt(n,"documentMutations")}function XI(n){return Wt(n,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new fo(0)}static kn(){return new fo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next((t=>{const r=new fo(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((t=>ye.fromTimestamp(new yt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.qn(e).next((a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Qn(e,a))))}addTargetData(e,t){return this.Kn(e,t).next((()=>this.qn(e).next((r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>gl(e).delete(t.targetId))).next((()=>this.qn(e))).next((r=>(pe(r.targetCount>0),r.targetCount-=1,this.Qn(e,r))))}removeTargets(e,t,r){let a=0;const l=[];return gl(e).J(((c,d)=>{const m=wc(d);m.sequenceNumber<=t&&r.get(m.targetId)===null&&(a++,l.push(this.removeTargetData(e,m)))})).next((()=>z.waitFor(l))).next((()=>a))}forEachTarget(e,t){return gl(e).J(((r,a)=>{const l=wc(a);t(l)}))}qn(e){return Iw(e).get("targetGlobalKey").next((t=>(pe(t!==null),t)))}Qn(e,t){return Iw(e).put("targetGlobalKey",t)}Kn(e,t){return gl(e).put(KI(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next((t=>t.targetCount))}getTargetData(e,t){const r=oo(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return gl(e).J({range:a,index:"queryTargetsIndex"},((c,d,m)=>{const g=wc(d);hh(t,g.target)&&(l=g,m.done())})).next((()=>l))}addMatchingKeys(e,t,r){const a=[],l=Fs(e);return t.forEach((c=>{const d=Pn(c.path);a.push(l.put({targetId:r,path:d})),a.push(this.referenceDelegate.addReference(e,r,c))})),z.waitFor(a)}removeMatchingKeys(e,t,r){const a=Fs(e);return z.forEach(t,(l=>{const c=Pn(l.path);return z.waitFor([a.delete([r,c]),this.referenceDelegate.removeReference(e,r,l)])}))}removeMatchingKeysForTargetId(e,t){const r=Fs(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=Fs(e);let l=De();return a.J({range:r,H:!0},((c,d,m)=>{const g=er(c[1]),v=new le(g);l=l.add(v)})).next((()=>l))}containsKey(e,t){const r=Pn(t.path),a=IDBKeyRange.bound([r],[GA(r)],!1,!0);let l=0;return Fs(e).J({index:"documentTargetsIndex",H:!0,range:a},(([c,d],m,g)=>{c!==0&&(l++,g.done())})).next((()=>l>0))}ot(e,t){return gl(e).get(t).next((r=>r?wc(r):null))}}function gl(n){return Wt(n,"targets")}function Iw(n){return Wt(n,"targetGlobal")}function Fs(n){return Wt(n,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw([n,e],[t,r]){const a=Se(n,t);return a===0?Se(e,r):a}class mP{constructor(e){this.Un=e,this.buffer=new ot(bw),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();bw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class pP{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){ie("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){oa(t)?ie("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await aa(t)}await this.Hn(3e5)}))}}class gP{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return z.resolve(Qn.oe);const r=new mP(t);return this.Jn.forEachTarget(e,(a=>r.zn(a.sequenceNumber))).next((()=>this.Jn.Zn(e,(a=>r.zn(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(Aw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Aw):this.Xn(e,t)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,a,l,c,d,m,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(e,a)))).next((T=>(r=T,d=Date.now(),this.removeTargets(e,r,t)))).next((T=>(l=T,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((T=>(g=Date.now(),_l()<=Le.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${T} documents in `+(g-m)+`ms
Total Duration: ${g-v}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T}))))}}function _P(n,e){return new gP(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e,t){this.db=e,this.garbageCollector=_P(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}er(e){let t=0;return this.Zn(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,((r,a)=>t(a)))}addReference(e,t,r){return nf(e,r)}removeReference(e,t,r){return nf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return nf(e,t)}nr(e,t){return(function(a,l){let c=!1;return XI(a).Y((d=>$I(a,d,l).next((m=>(m&&(c=!0),z.resolve(!m)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.tr(e,((c,d)=>{if(d<=t){const m=this.nr(e,c).next((g=>{if(!g)return l++,r.getEntry(e,c).next((()=>(r.removeEntry(c,ye.min()),Fs(e).delete((function(T){return[0,Pn(T.path)]})(c)))))}));a.push(m)}})).next((()=>z.waitFor(a))).next((()=>r.apply(e))).next((()=>l))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return nf(e,t)}tr(e,t){const r=Fs(e);let a,l=Qn.oe;return r.J({index:"documentTargetsIndex"},(([c,d],{path:m,sequenceNumber:g})=>{c===0?(l!==Qn.oe&&t(new le(er(a)),l),l=g,a=m):l=Qn.oe})).next((()=>{l!==Qn.oe&&t(new le(er(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function nf(n,e){return Fs(n).put((function(r,a){return{targetId:0,path:Pn(r.path),sequenceNumber:a}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this.changes=new la((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ja(e).put(r)}removeEntry(e,t,r){return ja(e).delete((function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Nf(c),d[d.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.rr(e,r))))}getEntry(e,t){let r=ft.newInvalidDocument(t);return ja(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(mc(t))},((a,l)=>{r=this.ir(t,l)})).next((()=>r))}sr(e,t){let r={size:0,document:ft.newInvalidDocument(t)};return ja(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(mc(t))},((a,l)=>{r={document:this.ir(t,l),size:kf(l)}})).next((()=>r))}getEntries(e,t){let r=Wn();return this._r(e,t,((a,l)=>{const c=this.ir(a,l);r=r.insert(a,c)})).next((()=>r))}ar(e,t){let r=Wn(),a=new ut(le.comparator);return this._r(e,t,((l,c)=>{const d=this.ir(l,c);r=r.insert(l,d),a=a.insert(l,kf(c))})).next((()=>({documents:r,ur:a})))}_r(e,t,r){if(t.isEmpty())return z.resolve();let a=new ot(Cw);t.forEach((m=>a=a.add(m)));const l=IDBKeyRange.bound(mc(a.first()),mc(a.last())),c=a.getIterator();let d=c.getNext();return ja(e).J({index:"documentKeyIndex",range:l},((m,g,v)=>{const T=le.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;d&&Cw(d,T)<0;)r(d,null),d=c.getNext();d&&d.isEqual(T)&&(r(d,g),d=c.hasNext()?c.getNext():null),d?v.$(mc(d)):v.done()})).next((()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,r,a,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),Nf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ja(e).U(IDBKeyRange.bound(d,m,!0)).next((g=>{l==null||l.incrementDocumentReadCount(g.length);let v=Wn();for(const T of g){const I=this.ir(le.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);I.isFoundDocument()&&(fh(t,I)||a.has(I.key))&&(v=v.insert(I.key,I))}return v}))}getAllFromCollectionGroup(e,t,r,a){let l=Wn();const c=Rw(t,r),d=Rw(t,li.max());return ja(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,d,!0)},((m,g,v)=>{const T=this.ir(le.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(T.key,T),l.size===a&&v.done()})).next((()=>l))}newChangeBuffer(e){return new EP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return Sw(e).get("remoteDocumentGlobalKey").next((t=>(pe(!!t),t)))}rr(e,t){return Sw(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=iP(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ye.min())))return r}return ft.newInvalidDocument(e)}}function JI(n){return new vP(n)}class EP extends ZI{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new la((r=>r.toString()),((r,a)=>r.isEqual(a)))}applyChanges(e){const t=[];let r=0,a=new ot(((l,c)=>Se(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const d=this.lr.get(l);if(t.push(this.cr.removeEntry(e,l,d.readTime)),c.isValidDocument()){const m=dw(this.cr.serializer,c);a=a.add(l.path.popLast());const g=kf(m);r+=g-d.size,t.push(this.cr.addEntry(e,l,m))}else if(r-=d.size,this.trackRemovals){const m=dw(this.cr.serializer,c.convertToNoDocument(ye.min()));t.push(this.cr.addEntry(e,l,m))}})),a.forEach((l=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.cr.updateMetadata(e,r)),z.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next((r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.cr.ar(e,t).next((({documents:r,ur:a})=>(a.forEach(((l,c)=>{this.lr.set(l,{size:c,readTime:r.get(l).readTime})})),r)))}}function Sw(n){return Wt(n,"remoteDocumentGlobal")}function ja(n){return Wt(n,"remoteDocumentsV14")}function mc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Rw(n,e){const t=e.documentKey.path.toArray();return[n,Nf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Cw(n,e){const t=n.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=Se(t[l],r[l]),a)return a;return a=Se(t.length,r.length),a||(a=Se(t[t.length-2],r[r.length-2]),a||Se(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&Dc(r.mutation,a,Yn.empty(),yt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,De()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=De()){const a=tr();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let c=Ec();return l.forEach(((d,m)=>{c=c.insert(d,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=tr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,De())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,r,a){let l=Wn();const c=Cc(),d=(function(){return Cc()})();return t.forEach(((m,g)=>{const v=r.get(g.key);a.has(g.key)&&(v===void 0||v.mutation instanceof Yr)?l=l.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),Dc(v.mutation,g,v.mutation.getFieldMask(),yt.now())):c.set(g.key,Yn.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((g,v)=>c.set(g,v))),t.forEach(((g,v)=>{var T;return d.set(g,new TP(v,(T=c.get(g))!==null&&T!==void 0?T:null))})),d)))}recalculateAndSaveOverlays(e,t){const r=Cc();let a=new ut(((c,d)=>c-d)),l=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((m=>{const g=t.get(m);if(g===null)return;let v=r.get(m)||Yn.empty();v=d.applyToLocalView(g,v),r.set(m,v);const T=(a.get(d.batchId)||De()).add(m);a=a.insert(d.batchId,T)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),g=m.key,v=m.value,T=vI();v.forEach((I=>{if(!l.has(I)){const N=SI(t.get(I),r.get(I));N!==null&&T.set(I,N),l=l.add(I)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,T))}return z.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return(function(c){return le.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Iy(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):z.resolve(tr());let d=-1,m=l;return c.next((g=>z.forEach(g,((v,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(v)?z.resolve():this.remoteDocumentCache.getEntry(e,v).next((I=>{m=m.insert(v,I)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,m,g,De()))).next((v=>({batchId:d,changes:yI(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new le(t)).next((r=>{let a=Ec();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=Ec();return this.indexManager.getCollectionParents(e,l).next((d=>z.forEach(d,(m=>{const g=(function(T,I){return new Qr(I,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,r,a).next((v=>{v.forEach(((T,I)=>{c=c.insert(T,I)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((c=>{l.forEach(((m,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,ft.newInvalidDocument(v)))}));let d=Ec();return c.forEach(((m,g)=>{const v=l.get(m);v!==void 0&&Dc(v.mutation,g,Yn.empty(),yt.now()),fh(t,g)&&(d=d.insert(m,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return z.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Mt(a.createTime)}})(t)),z.resolve()}getNamedQuery(e,t){return z.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(a){return{name:a.name,query:ky(a.bundledQuery),readTime:Mt(a.readTime)}})(t)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(){this.overlays=new ut(le.comparator),this.Ir=new Map}getOverlay(e,t){return z.resolve(this.overlays.get(t))}getOverlays(e,t){const r=tr();return z.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.ht(e,t,l)})),z.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Ir.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Ir.delete(r)),z.resolve()}getOverlaysForCollection(e,t,r){const a=tr(),l=t.length+1,c=new le(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return z.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new ut(((g,v)=>g-v));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let v=l.get(g.largestBatchId);v===null&&(v=tr(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const d=tr(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,v)=>d.set(g,v))),!(d.size()>=a)););return z.resolve(d)}ht(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Ir.get(a.largestBatchId).delete(r.key);this.Ir.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new xy(t,r));let l=this.Ir.get(t);l===void 0&&(l=De(),this.Ir.set(t,l)),this.Ir.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(){this.sessionToken=Dt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(){this.Tr=new ot(tn.Er),this.dr=new ot(tn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new tn(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Vr(new tn(e,t))}mr(e,t){e.forEach((r=>this.removeReference(r,t)))}gr(e){const t=new le(new je([])),r=new tn(t,e),a=new tn(t,e+1),l=[];return this.dr.forEachInRange([r,a],(c=>{this.Vr(c),l.push(c.key)})),l}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new le(new je([])),r=new tn(t,e),a=new tn(t,e+1);let l=De();return this.dr.forEachInRange([r,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new tn(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class tn{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return le.comparator(e.key,t.key)||Se(e.wr,t.wr)}static Ar(e,t){return Se(e.wr,t.wr)||le.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new ot(tn.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Cy(l,t,r,a);this.mutationQueue.push(c);for(const d of a)this.br=this.br.add(new tn(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return z.resolve(c)}lookupMutationBatch(e,t){return z.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.vr(r),l=a<0?0:a;return z.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new tn(t,0),a=new tn(t,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([r,a],(c=>{const d=this.Dr(c.wr);l.push(d)})),z.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ot(Se);return t.forEach((a=>{const l=new tn(a,0),c=new tn(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,c],(d=>{r=r.add(d.wr)}))})),z.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;le.isDocumentKey(l)||(l=l.child(""));const c=new tn(new le(l),0);let d=new ot(Se);return this.br.forEachWhile((m=>{const g=m.key.path;return!!r.isPrefixOf(g)&&(g.length===a&&(d=d.add(m.wr)),!0)}),c),z.resolve(this.Cr(d))}Cr(e){const t=[];return e.forEach((r=>{const a=this.Dr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){pe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return z.forEach(t.mutations,(a=>{const l=new tn(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,t){const r=new tn(t,0),a=this.br.firstAfterOrEqual(r);return z.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e){this.Mr=e,this.docs=(function(){return new ut(le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return z.resolve(r?r.document.mutableCopy():ft.newInvalidDocument(t))}getEntries(e,t){let r=Wn();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():ft.newInvalidDocument(a))})),z.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=Wn();const c=t.path,d=new le(c.child("")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:g,value:{document:v}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||vy(KA(v),r)<=0||(a.has(v.key)||fh(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return z.resolve(l)}getAllFromCollectionGroup(e,t,r,a){he()}Or(e,t){return z.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new RP(this)}getSize(e){return z.resolve(this.size)}}class RP extends ZI{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.cr.addEntry(e,a)):this.cr.removeEntry(r)})),z.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.persistence=e,this.Nr=new la((t=>oo(t)),hh),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.Lr=0,this.Br=new My,this.targetCount=0,this.kr=fo.Bn()}forEachTarget(e,t){return this.Nr.forEach(((r,a)=>t(a))),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),z.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new fo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,z.resolve()}updateTargetData(e,t){return this.Kn(t),z.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.Nr.forEach(((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.Nr.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),z.waitFor(l).next((()=>a))}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return z.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),z.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),z.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),z.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return z.resolve(r)}containsKey(e,t){return z.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Qn(0),this.Kr=!1,this.Kr=!0,this.$r=new IP,this.referenceDelegate=e(this),this.Ur=new CP(this),this.indexManager=new hP,this.remoteDocumentCache=(function(a){return new SP(a)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new HI(t),this.Gr=new wP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new AP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new bP(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){ie("MemoryPersistence","Starting transaction:",e);const a=new DP(this.Qr.next());return this.referenceDelegate.zr(),r(a).next((l=>this.referenceDelegate.jr(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Hr(e,t){return z.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,t))))}}class DP extends YA{constructor(e){super(),this.currentSequenceNumber=e}}class om{constructor(e){this.persistence=e,this.Jr=new My,this.Yr=null}static Zr(e){return new om(e)}get Xr(){if(this.Yr)return this.Yr;throw he()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),z.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),z.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((a=>this.Xr.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.Xr.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,(r=>{const a=le.fromPath(r);return this.ei(e,a).next((l=>{l||t.removeEntry(a,ye.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return z.or([()=>z.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e){this.serializer=e}O(e,t,r,a){const l=new em("createOrUpgrade",t);r<1&&a>=1&&((function(m){m.createObjectStore("owner")})(e),(function(m){m.createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",FT,{unique:!0}),m.createObjectStore("documentMutations")})(e),Dw(e),(function(m){m.createObjectStore("remoteDocuments")})(e));let c=z.resolve();return r<3&&a>=3&&(r!==0&&((function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")})(e),Dw(e)),c=c.next((()=>(function(m){const g=m.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ye.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",v)})(l)))),r<4&&a>=4&&(r!==0&&(c=c.next((()=>(function(m,g){return g.store("mutations").U().next((v=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",FT,{unique:!0});const T=g.store("mutations"),I=v.map((N=>T.put(N)));return z.waitFor(I)}))})(e,l)))),c=c.next((()=>{(function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),r<5&&a>=5&&(c=c.next((()=>this.ni(l)))),r<6&&a>=6&&(c=c.next((()=>((function(m){m.createObjectStore("remoteDocumentGlobal")})(e),this.ri(l))))),r<7&&a>=7&&(c=c.next((()=>this.ii(l)))),r<8&&a>=8&&(c=c.next((()=>this.si(e,l)))),r<9&&a>=9&&(c=c.next((()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&a>=10&&(c=c.next((()=>this.oi(l)))),r<11&&a>=11&&(c=c.next((()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(m){m.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),r<12&&a>=12&&(c=c.next((()=>{(function(m){const g=m.createObjectStore("documentOverlays",{keyPath:ck});g.createIndex("collectionPathOverlayIndex",hk,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",dk,{unique:!1})})(e)}))),r<13&&a>=13&&(c=c.next((()=>(function(m){const g=m.createObjectStore("remoteDocumentsV14",{keyPath:J4});g.createIndex("documentKeyIndex",ek),g.createIndex("collectionGroupIndex",tk)})(e))).next((()=>this._i(e,l))).next((()=>e.deleteObjectStore("remoteDocuments")))),r<14&&a>=14&&(c=c.next((()=>this.ai(e,l)))),r<15&&a>=15&&(c=c.next((()=>(function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:ak}).createIndex("sequenceNumberIndex",ok,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:lk}).createIndex("documentKeyIndex",uk,{unique:!1})})(e)))),r<16&&a>=16&&(c=c.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),r<17&&a>=17&&(c=c.next((()=>{(function(m){m.createObjectStore("globals",{keyPath:"name"})})(e)}))),c}ri(e){let t=0;return e.store("remoteDocuments").J(((r,a)=>{t+=kf(a)})).next((()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)}))}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next((a=>z.forEach(a,(l=>{const c=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",c).next((d=>z.forEach(d,(m=>{pe(m.userId===l.userId);const g=Ga(this.serializer,m);return WI(e,l.userId,g).next((()=>{}))}))))}))))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((a=>{const l=[];return r.J(((c,d)=>{const m=new je(c),g=(function(T){return[0,Pn(T)]})(m);l.push(t.get(g).next((v=>v?z.resolve():(T=>t.put({targetId:0,path:Pn(T),sequenceNumber:a.highestListenSequenceNumber}))(m))))})).next((()=>z.waitFor(l)))}))}si(e,t){e.createObjectStore("collectionParents",{keyPath:sk});const r=t.store("collectionParents"),a=new Vy,l=c=>{if(a.add(c)){const d=c.lastSegment(),m=c.popLast();return r.put({collectionId:d,parent:Pn(m)})}};return t.store("remoteDocuments").J({H:!0},((c,d)=>{const m=new je(c);return l(m.popLast())})).next((()=>t.store("documentMutations").J({H:!0},(([c,d,m],g)=>{const v=er(d);return l(v.popLast())}))))}oi(e){const t=e.store("targets");return t.J(((r,a)=>{const l=wc(a),c=KI(this.serializer,l);return t.put(c)}))}_i(e,t){const r=t.store("remoteDocuments"),a=[];return r.J(((l,c)=>{const d=t.store("remoteDocumentsV14"),m=(function(T){return T.document?new le(je.fromString(T.document.name).popFirst(5)):T.noDocument?le.fromSegments(T.noDocument.path):T.unknownDocument?le.fromSegments(T.unknownDocument.path):he()})(c).path.toArray(),g={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(g))})).next((()=>z.waitFor(a)))}ai(e,t){const r=t.store("mutations"),a=JI(this.serializer),l=new tb(om.Zr,this.serializer.ct);return r.U().next((c=>{const d=new Map;return c.forEach((m=>{var g;let v=(g=d.get(m.userId))!==null&&g!==void 0?g:De();Ga(this.serializer,m).keys().forEach((T=>v=v.add(T))),d.set(m.userId,v)})),z.forEach(d,((m,g)=>{const v=new nn(g),T=sm.lt(this.serializer,v),I=l.getIndexManager(v),N=am.lt(v,this.serializer,I,l.referenceDelegate);return new eb(a,N,T,I).recalculateAndSaveOverlaysForDocumentKeys(new m_(t,Qn.oe),m).next()}))}))}}function Dw(n){n.createObjectStore("targetDocuments",{keyPath:ik}).createIndex("documentTargetsIndex",rk,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",nk,{unique:!0}),n.createObjectStore("targetGlobal")}const Hg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ly{constructor(e,t,r,a,l,c,d,m,g,v,T=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=l,this.window=c,this.document=d,this.ci=g,this.li=v,this.hi=T,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=I=>Promise.resolve(),!Ly.D())throw new ne(G.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yP(this,a),this.Ai=t+"main",this.serializer=new HI(m),this.Ri=new nr(this.Ai,this.hi,new xP(this.serializer)),this.$r=new sP,this.Ur=new fP(this.referenceDelegate,this.serializer),this.remoteDocumentCache=JI(this.serializer),this.Gr=new rP,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,v===!1&&Vt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ne(G.FAILED_PRECONDITION,Hg);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new Qn(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>rf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((t=>this.isPrimary&&!t?this.bi(e).next((()=>!1)):!!t&&this.Di(e).next((()=>!0)))))).catch((e=>{if(oa(e))return ie("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ie("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return pc(e).get("owner").next((t=>z.resolve(this.vi(t))))}Ci(e){return rf(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=Wt(t,"clientMetadata");return r.U().next((a=>{const l=this.xi(a,18e5),c=a.filter((d=>l.indexOf(d)===-1));return z.forEach(c,(d=>r.delete(d.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?z.resolve(!0):pc(e).get("owner").next((t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new ne(G.FAILED_PRECONDITION,Hg);return!1}}return!(!this.networkEnabled||!this.inForeground)||rf(e).U().next((r=>this.xi(r,5e3).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ie("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new m_(e,Qn.oe);return this.bi(t).next((()=>this.Ci(t)))})),this.Ri.close(),this.qi()}xi(e,t){return e.filter((r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>rf(e).U().next((t=>this.xi(t,18e5).map((r=>r.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return am.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new dP(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return sm.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){ie("IndexedDbPersistence","Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(m){return m===17?pk:m===16?mk:m===15?Ty:m===14?eI:m===13?JA:m===12?fk:m===11?ZA:void he()})(this.hi);let c;return this.Ri.runTransaction(e,a,l,(d=>(c=new m_(d,this.Qr?this.Qr.next():Qn.oe),t==="readwrite-primary"?this.wi(c).next((m=>!!m||this.Si(c))).next((m=>{if(!m)throw Vt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new ne(G.FAILED_PRECONDITION,QA);return r(c)})).next((m=>this.Di(c).next((()=>m)))):this.Ki(c).next((()=>r(c)))))).then((d=>(c.raiseOnCommittedEvent(),d)))}Ki(e){return pc(e).get("owner").next((t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ne(G.FAILED_PRECONDITION,Hg)}))}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return pc(e).put("owner",t)}static D(){return nr.D()}bi(e){const t=pc(e);return t.get("owner").next((r=>this.vi(r)?(ie("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):z.resolve()))}Mi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Vt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;A2()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return ie("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Vt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Vt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function pc(n){return Wt(n,"owner")}function rf(n){return Wt(n,"clientMetadata")}function Uy(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=a}static Wi(e,t){let r=De(),a=De();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new By(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return A2()?8:WA(Tt())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.Yi(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.Zi(e,t,a,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new NP;return this.Xi(e,t,c).next((d=>{if(l.result=d,this.zi)return this.es(e,t,c,d.size)}))})).next((()=>l.result))}es(e,t,r,a){return r.documentReadCount<this.ji?(_l()<=Le.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",yl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(_l()<=Le.DEBUG&&ie("QueryEngine","Query:",yl(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.Hi*a?(_l()<=Le.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",yl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vn(t))):z.resolve())}Yi(e,t){if(tw(t))return z.resolve(null);let r=Vn(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=xf(t,null,"F"),r=Vn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=De(...l);return this.Ji.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,r).next((m=>{const g=this.ts(t,d);return this.ns(t,g,c,m.readTime)?this.Yi(e,xf(t,null,"F")):this.rs(e,g,t,m)}))))})))))}Zi(e,t,r,a){return tw(t)||a.isEqual(ye.min())?z.resolve(null):this.Ji.getDocuments(e,r).next((l=>{const c=this.ts(t,l);return this.ns(t,c,r,a)?z.resolve(null):(_l()<=Le.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),yl(t)),this.rs(e,c,t,HA(a,-1)).next((d=>d)))}))}ts(e,t){let r=new ot(gI(e));return t.forEach(((a,l)=>{fh(e,l)&&(r=r.add(l))})),r}ns(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Xi(e,t,r){return _l()<=Le.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",yl(t)),this.Ji.getDocumentsMatchingQuery(e,t,li.min(),r)}rs(e,t,r,a){return this.Ji.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,t,r,a){this.persistence=e,this.ss=t,this.serializer=a,this.os=new ut(Se),this._s=new la((l=>oo(l)),hh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eb(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function ib(n,e,t,r){return new OP(n,e,t,r)}async function rb(n,e){const t=ue(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.ls(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],d=[];let m=De();for(const g of a){c.push(g.batchId);for(const v of g.mutations)m=m.add(v.key)}for(const g of l){d.push(g.batchId);for(const v of g.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(r,m).next((g=>({hs:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function kP(n,e){const t=ue(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.cs.newChangeBuffer({trackRemovals:!0});return(function(d,m,g,v){const T=g.batch,I=T.keys();let N=z.resolve();return I.forEach((Q=>{N=N.next((()=>v.getEntry(m,Q))).next((ee=>{const Z=g.docVersions.get(Q);pe(Z!==null),ee.version.compareTo(Z)<0&&(T.applyToRemoteDocument(ee,g),ee.isValidDocument()&&(ee.setReadTime(g.commitVersion),v.addEntry(ee)))}))})),N.next((()=>d.mutationQueue.removeMutationBatch(m,T)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let m=De();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(m=m.add(d.batch.mutations[g].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function sb(n){const e=ue(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function PP(n,e){const t=ue(n),r=e.snapshotVersion;let a=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.cs.newChangeBuffer({trackRemovals:!0});a=t.os;const d=[];e.targetChanges.forEach(((v,T)=>{const I=a.get(T);if(!I)return;d.push(t.Ur.removeMatchingKeys(l,v.removedDocuments,T).next((()=>t.Ur.addMatchingKeys(l,v.addedDocuments,T))));let N=I.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?N=N.withResumeToken(Dt.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):v.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(v.resumeToken,r)),a=a.insert(T,N),(function(ee,Z,te){return ee.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-ee.snapshotVersion.toMicroseconds()>=3e8?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(I,N,v)&&d.push(t.Ur.updateTargetData(l,N))}));let m=Wn(),g=De();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(ab(l,c,e.documentUpdates).next((v=>{m=v.Ps,g=v.Is}))),!r.isEqual(ye.min())){const v=t.Ur.getLastRemoteSnapshotVersion(l).next((T=>t.Ur.setTargetsMetadata(l,l.currentSequenceNumber,r)));d.push(v)}return z.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(t.os=a,l)))}function ab(n,e,t){let r=De(),a=De();return t.forEach((l=>r=r.add(l))),e.getEntries(n,r).next((l=>{let c=Wn();return t.forEach(((d,m)=>{const g=l.get(d);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(ye.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):ie("LocalStore","Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",m.version)})),{Ps:c,Is:a}}))}function VP(n,e){const t=ue(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function jl(n,e){const t=ue(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.Ur.getTargetData(r,e).next((l=>l?(a=l,z.resolve(a)):t.Ur.allocateTargetId(r).next((c=>(a=new Lr(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.os.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r}))}async function zl(n,e,t){const r=ue(n),a=r.os.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!oa(c))throw c;ie("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.os=r.os.remove(e),r._s.delete(a.target)}function Pf(n,e,t){const r=ue(n);let a=ye.min(),l=De();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,v){const T=ue(m),I=T._s.get(v);return I!==void 0?z.resolve(T.os.get(I)):T.Ur.getTargetData(g,v)})(r,c,Vn(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(c,d.targetId).next((m=>{l=m}))})).next((()=>r.ss.getDocumentsMatchingQuery(c,e,t?a:ye.min(),t?l:De()))).next((d=>(ub(r,pI(e),d),{documents:d,Ts:l})))))}function ob(n,e){const t=ue(n),r=ue(t.Ur),a=t.os.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>r.ot(l,e).next((c=>c?c.target:null))))}function lb(n,e){const t=ue(n),r=t.us.get(e)||ye.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.cs.getAllFromCollectionGroup(a,e,HA(r,-1),Number.MAX_SAFE_INTEGER))).then((a=>(ub(t,e,a),a)))}function ub(n,e,t){let r=n.us.get(e)||ye.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),n.us.set(e,r)}async function MP(n,e,t,r){const a=ue(n);let l=De(),c=Wn();for(const g of t){const v=e.Es(g.metadata.name);g.document&&(l=l.add(v));const T=e.ds(g);T.setReadTime(e.As(g.metadata.readTime)),c=c.insert(v,T)}const d=a.cs.newChangeBuffer({trackRemovals:!0}),m=await jl(a,(function(v){return Vn(Zl(je.fromString(`__bundle__/docs/${v}`)))})(r));return a.persistence.runTransaction("Apply bundle documents","readwrite",(g=>ab(g,d,c).next((v=>(d.apply(g),v))).next((v=>a.Ur.removeMatchingKeysForTargetId(g,m.targetId).next((()=>a.Ur.addMatchingKeys(g,l,m.targetId))).next((()=>a.localDocuments.getLocalViewOfDocuments(g,v.Ps,v.Is))).next((()=>v.Ps))))))}async function LP(n,e,t=De()){const r=await jl(n,Vn(ky(e.bundledQuery))),a=ue(n);return a.persistence.runTransaction("Save named query","readwrite",(l=>{const c=Mt(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return a.Gr.saveNamedQuery(l,e);const d=r.withResumeToken(Dt.EMPTY_BYTE_STRING,c);return a.os=a.os.insert(d.targetId,d),a.Ur.updateTargetData(l,d).next((()=>a.Ur.removeMatchingKeysForTargetId(l,r.targetId))).next((()=>a.Ur.addMatchingKeys(l,t,r.targetId))).next((()=>a.Gr.saveNamedQuery(l,e)))}))}function xw(n,e){return`firestore_clients_${n}_${e}`}function Nw(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Kg(n,e){return`firestore_targets_${n}_${e}`}class Vf{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static Rs(e,t,r){const a=JSON.parse(r);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new ne(a.error.code,a.error.message))),c?new Vf(e,t,a.state,l):(Vt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xc{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new ne(r.error.code,r.error.message))),l?new xc(e,r.state,a):(Vt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Mf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=by();for(let c=0;a&&c<r.activeTargetIds.length;++c)a=$A(r.activeTargetIds[c]),l=l.add(r.activeTargetIds[c]);return a?new Mf(e,l):(Vt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class jy{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new jy(t.clientId,t.onlineState):(Vt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class C_{constructor(){this.activeTargetIds=by()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Qg{constructor(e,t,r,a,l){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new ut(Se),this.started=!1,this.bs=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Ds=xw(this.persistenceKey,this.ps),this.vs=(function(m){return`firestore_sequence_number_${m}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new C_),this.Cs=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.xs=(function(m){return`firestore_online_state_${m}`})(this.persistenceKey),this.Os=(function(m){return`firestore_bundle_loaded_v2_${m}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const a=this.getItem(xw(this.persistenceKey,r));if(a){const l=Mf.Rs(r,a);l&&(this.Ss=this.Ss.insert(l.clientId,l))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const r=this.Ls(t);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach(((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Kg(this.persistenceKey,e));if(a){const l=xc.Rs(e,a);l&&(r=l.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Kg(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach((a=>{this.Qs(a)})),this.currentUser=e,r.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ie("SharedClientState","READ",e,t),t}setItem(e,t){ie("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ie("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if(ie("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Vt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){const r=this.Gs(t.key);return this.zs(r,null)}{const r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){const r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){const r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){const r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){const r=(function(l){let c=Qn.oe;if(l!=null)try{const d=JSON.parse(l);pe(typeof d=="number"),c=d}catch(d){Vt("SharedClientState","Failed to read sequence number from WebStorage",d)}return c})(t.newValue);r!==Qn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){const r=this.Xs(t.newValue);await Promise.all(r.map((a=>this.syncEngine.eo(a))))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const a=new Vf(this.currentUser,e,t,r),l=Nw(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Vs())}Qs(e){const t=Nw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){const a=Kg(this.persistenceKey,e),l=new xc(e,t,r);this.setItem(a,l.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return Mf.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return Vf.Rs(new nn(l),a,t)}Ys(e,t){const r=this.Ms.exec(e),a=Number(r[1]);return xc.Rs(a,t)}Ls(e){return jy.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);ie("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),a=this.ks(this.Ss),l=this.ks(r),c=[],d=[];return l.forEach((m=>{a.has(m)||c.push(m)})),a.forEach((m=>{l.has(m)||d.push(m)})),this.syncEngine.io(c,d).then((()=>{this.Ss=r}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=by();return e.forEach(((r,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class cb{constructor(){this.so=new C_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new C_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ie("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ie("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sf=null;function Yg(){return sf===null?sf=(function(){return 268435456+Math.round(2147483648*Math.random())})():sf++,"0x"+sf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn="WebChannelConnection";class zP extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${a}/databases/${l}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${l}`}get Fo(){return!1}Mo(t,r,a,l,c){const d=Yg(),m=this.xo(t,r.toUriEncodedString());ie("RestConnection",`Sending RPC '${t}' ${d}:`,m,a);const g={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(g,l,c),this.No(t,m,g,a).then((v=>(ie("RestConnection",`Received RPC '${t}' ${d}: `,v),v)),(v=>{throw sr("RestConnection",`RPC '${t}' ${d} failed with error: `,v,"url: ",m,"request:",a),v}))}Lo(t,r,a,l,c,d){return this.Mo(t,r,a,l,c)}Oo(t,r,a){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Xl})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((l,c)=>t[c]=l)),a&&a.headers.forEach(((l,c)=>t[c]=l))}xo(t,r){const a=BP[t];return`${this.Do}/v1/${r}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,a){const l=Yg();return new Promise(((c,d)=>{const m=new LA;m.setWithCredentials(!0),m.listenOnce(UA.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case cf.NO_ERROR:const v=m.getResponseJson();ie(wn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),c(v);break;case cf.TIMEOUT:ie(wn,`RPC '${e}' ${l} timed out`),d(new ne(G.DEADLINE_EXCEEDED,"Request time out"));break;case cf.HTTP_ERROR:const T=m.getStatus();if(ie(wn,`RPC '${e}' ${l} failed with status:`,T,"response text:",m.getResponseText()),T>0){let I=m.getResponseJson();Array.isArray(I)&&(I=I[0]);const N=I==null?void 0:I.error;if(N&&N.status&&N.message){const Q=(function(Z){const te=Z.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(te)>=0?te:G.UNKNOWN})(N.status);d(new ne(Q,N.message))}else d(new ne(G.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new ne(G.UNAVAILABLE,"Connection failed."));break;default:he()}}finally{ie(wn,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(a);ie(wn,`RPC '${e}' ${l} sending request:`,a),m.send(t,"POST",g,r,15)}))}Bo(e,t,r){const a=Yg(),l=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=zA(),d=jA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Oo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const v=l.join("");ie(wn,`Creating RPC '${e}' stream ${a}: ${v}`,m);const T=c.createWebChannel(v,m);let I=!1,N=!1;const Q=new jP({Io:Z=>{N?ie(wn,`Not sending because RPC '${e}' stream ${a} is closed:`,Z):(I||(ie(wn,`Opening RPC '${e}' stream ${a} transport.`),T.open(),I=!0),ie(wn,`RPC '${e}' stream ${a} sending:`,Z),T.send(Z))},To:()=>T.close()}),ee=(Z,te,me)=>{Z.listen(te,(ce=>{try{me(ce)}catch(Ae){setTimeout((()=>{throw Ae}),0)}}))};return ee(T,vc.EventType.OPEN,(()=>{N||(ie(wn,`RPC '${e}' stream ${a} transport opened.`),Q.yo())})),ee(T,vc.EventType.CLOSE,(()=>{N||(N=!0,ie(wn,`RPC '${e}' stream ${a} transport closed`),Q.So())})),ee(T,vc.EventType.ERROR,(Z=>{N||(N=!0,sr(wn,`RPC '${e}' stream ${a} transport errored:`,Z),Q.So(new ne(G.UNAVAILABLE,"The operation could not be completed")))})),ee(T,vc.EventType.MESSAGE,(Z=>{var te;if(!N){const me=Z.data[0];pe(!!me);const ce=me,Ae=ce.error||((te=ce[0])===null||te===void 0?void 0:te.error);if(Ae){ie(wn,`RPC '${e}' stream ${a} received error:`,Ae);const Re=Ae.status;let Te=(function(C){const P=Gt[C];if(P!==void 0)return DI(P)})(Re),R=Ae.message;Te===void 0&&(Te=G.INTERNAL,R="Unknown error status: "+Re+" with message "+Ae.message),N=!0,Q.So(new ne(Te,R)),T.close()}else ie(wn,`RPC '${e}' stream ${a} received:`,me),Q.bo(me)}})),ee(d,BA.STAT_EVENT,(Z=>{Z.stat===d_.PROXY?ie(wn,`RPC '${e}' stream ${a} detected buffering proxy`):Z.stat===d_.NOPROXY&&ie(wn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{Q.wo()}),0),Q}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(){return typeof window<"u"?window:null}function _f(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(n){return new Qk(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e,t,r=1e3,a=1.5,l=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=a,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),a=Math.max(0,t-r);a>0&&ie("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,t,r,a,l,c,d,m){this.ui=e,this.Ho=r,this.Jo=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new zy(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(Vt(t.toString()),Vt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.Yo===t&&this.P_(r,a)}),(r=>{e((()=>{const a=new ne(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(a)}))}))}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((a=>{r((()=>this.I_(a)))})),this.stream.onMessage((a=>{r((()=>++this.e_==1?this.E_(a):this.onNext(a)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return ie("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(ie("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class FP extends db{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=$k(this.serializer,e),r=(function(l){if(!("targetChange"in l))return ye.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?ye.min():c.readTime?Mt(c.readTime):ye.min()})(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=A_(this.serializer),t.addTarget=(function(l,c){let d;const m=c.target;if(d=Cf(m)?{documents:BI(l,m)}:{query:jI(l,m)._t},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=kI(l,c.resumeToken);const g=T_(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(ye.min())>0){d.readTime=Bl(l,c.snapshotVersion.toTimestamp());const g=T_(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const r=Zk(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=A_(this.serializer),t.removeTarget=e,this.a_(t)}}class qP extends db{constructor(e,t,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return pe(!!e.streamToken),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=Xk(e.writeResults,e.commitTime),r=Mt(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=A_(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Wc(this.serializer,r)))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP extends class{}{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new ne(G.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Mo(e,w_(t,r),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ne(G.UNKNOWN,l.toString())}))}Lo(e,t,r,a,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Lo(e,w_(t,r),a,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ne(G.UNKNOWN,c.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class HP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Vt(t),this.D_=!1):ie("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o((c=>{r.enqueueAndForget((async()=>{ua(this)&&(ie("RemoteStore","Restarting streams for network reachability change."),await(async function(m){const g=ue(m);g.L_.add(4),await tu(g),g.q_.set("Unknown"),g.L_.delete(4),await yh(g)})(this))}))})),this.q_=new HP(r,a)}}async function yh(n){if(ua(n))for(const e of n.B_)await e(!0)}async function tu(n){for(const e of n.B_)await e(!1)}function lm(n,e){const t=ue(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Gy(t)?qy(t):iu(t).r_()&&Fy(t,e))}function Fl(n,e){const t=ue(n),r=iu(t);t.N_.delete(e),r.r_()&&fb(t,e),t.N_.size===0&&(r.r_()?r.o_():ua(t)&&t.q_.set("Unknown"))}function Fy(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}iu(n).A_(e)}function fb(n,e){n.Q_.xe(e),iu(n).R_(e)}function qy(n){n.Q_=new qk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),iu(n).start(),n.q_.v_()}function Gy(n){return ua(n)&&!iu(n).n_()&&n.N_.size>0}function ua(n){return ue(n).L_.size===0}function mb(n){n.Q_=void 0}async function QP(n){n.q_.set("Online")}async function YP(n){n.N_.forEach(((e,t)=>{Fy(n,e)}))}async function WP(n,e){mb(n),Gy(n)?(n.q_.M_(e),qy(n)):n.q_.set("Unknown")}async function $P(n,e,t){if(n.q_.set("Online"),e instanceof OI&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const d of l.targetIds)a.N_.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.N_.delete(d),a.Q_.removeTarget(d))})(n,e)}catch(r){ie("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Lf(n,r)}else if(e instanceof gf?n.Q_.Ke(e):e instanceof NI?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ye.min()))try{const r=await sb(n.localStore);t.compareTo(r)>=0&&await(function(l,c){const d=l.Q_.rt(c);return d.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const v=l.N_.get(g);v&&l.N_.set(g,v.withResumeToken(m.resumeToken,c))}})),d.targetMismatches.forEach(((m,g)=>{const v=l.N_.get(m);if(!v)return;l.N_.set(m,v.withResumeToken(Dt.EMPTY_BYTE_STRING,v.snapshotVersion)),fb(l,m);const T=new Lr(v.target,m,g,v.sequenceNumber);Fy(l,T)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){ie("RemoteStore","Failed to raise snapshot:",r),await Lf(n,r)}}async function Lf(n,e,t){if(!oa(e))throw e;n.L_.add(1),await tu(n),n.q_.set("Offline"),t||(t=()=>sb(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ie("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await yh(n)}))}function pb(n,e){return e().catch((t=>Lf(n,t,e)))}async function nu(n){const e=ue(n),t=ta(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;XP(e);)try{const a=await VP(e.localStore,r);if(a===null){e.O_.length===0&&t.o_();break}r=a.batchId,ZP(e,a)}catch(a){await Lf(e,a)}gb(e)&&_b(e)}function XP(n){return ua(n)&&n.O_.length<10}function ZP(n,e){n.O_.push(e);const t=ta(n);t.r_()&&t.V_&&t.m_(e.mutations)}function gb(n){return ua(n)&&!ta(n).n_()&&n.O_.length>0}function _b(n){ta(n).start()}async function JP(n){ta(n).p_()}async function eV(n){const e=ta(n);for(const t of n.O_)e.m_(t.mutations)}async function tV(n,e,t){const r=n.O_.shift(),a=Dy.from(r,e,t);await pb(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await nu(n)}async function nV(n,e){e&&ta(n).V_&&await(async function(r,a){if((function(c){return CI(c)&&c!==G.ABORTED})(a.code)){const l=r.O_.shift();ta(r).s_(),await pb(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await nu(r)}})(n,e),gb(n)&&_b(n)}async function kw(n,e){const t=ue(n);t.asyncQueue.verifyOperationInProgress(),ie("RemoteStore","RemoteStore received new credentials");const r=ua(t);t.L_.add(3),await tu(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await yh(t)}async function D_(n,e){const t=ue(n);e?(t.L_.delete(2),await yh(t)):e||(t.L_.add(2),await tu(t),t.q_.set("Unknown"))}function iu(n){return n.K_||(n.K_=(function(t,r,a){const l=ue(t);return l.w_(),new FP(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Eo:QP.bind(null,n),Ro:YP.bind(null,n),mo:WP.bind(null,n),d_:$P.bind(null,n)}),n.B_.push((async e=>{e?(n.K_.s_(),Gy(n)?qy(n):n.q_.set("Unknown")):(await n.K_.stop(),mb(n))}))),n.K_}function ta(n){return n.U_||(n.U_=(function(t,r,a){const l=ue(t);return l.w_(),new qP(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:JP.bind(null,n),mo:nV.bind(null,n),f_:eV.bind(null,n),g_:tV.bind(null,n)}),n.B_.push((async e=>{e?(n.U_.s_(),await nu(n)):(await n.U_.stop(),n.O_.length>0&&(ie("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new _n,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,d=new Hy(e,t,c,a,l);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ru(n,e){if(Vt("AsyncQueue",`${e}: ${n}`),oa(n))return new ne(G.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e){this.comparator=e?(t,r)=>e(t,r)||le.comparator(t.key,r.key):(t,r)=>le.comparator(t.key,r.key),this.keyedMap=Ec(),this.sortedSet=new ut(this.comparator)}static emptySet(e){return new Dl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Dl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Dl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(){this.W_=new ut(le.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):he():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,r)=>{e.push(r)})),e}}class ql{constructor(e,t,r,a,l,c,d,m,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new ql(e,t,Dl.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class rV{constructor(){this.queries=Vw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const a=ue(t),l=a.queries;a.queries=Vw(),l.forEach(((c,d)=>{for(const m of d.j_)m.onError(r)}))})(this,new ne(G.ABORTED,"Firestore shutting down"))}}function Vw(){return new la((n=>mI(n)),dh)}async function Ky(n,e){const t=ue(n);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.H_()&&e.J_()&&(r=2):(l=new iV,r=e.J_()?0:1);try{switch(r){case 0:l.z_=await t.onListen(a,!0);break;case 1:l.z_=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=ru(c,`Initialization of query '${yl(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.j_.push(e),e.Z_(t.onlineState),l.z_&&e.X_(l.z_)&&Yy(t)}async function Qy(n,e){const t=ue(n),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.j_.indexOf(e);c>=0&&(l.j_.splice(c,1),l.j_.length===0?a=e.J_()?0:1:!l.H_()&&e.J_()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function sV(n,e){const t=ue(n);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.j_)d.X_(a)&&(r=!0);c.z_=a}}r&&Yy(t)}function aV(n,e,t){const r=ue(n),a=r.queries.get(e);if(a)for(const l of a.j_)l.onError(t);r.queries.delete(e)}function Yy(n){n.Y_.forEach((e=>{e.next()}))}var x_,Mw;(Mw=x_||(x_={})).ea="default",Mw.Cache="cache";class Wy{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new ql(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ql.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==x_.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e){this.serializer=e}Es(e){return ir(this.serializer,e)}ds(e){return e.metadata.exists?UI(this.serializer,e.document,!1):ft.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Mt(e)}}class lV{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=yb(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=je.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new Lw(this.serializer);for(const a of e)if(a.metadata.queries){const l=r.Es(a.metadata.name);for(const c of a.metadata.queries){const d=(t.get(c)||De()).add(l);t.set(c,d)}}return t}async complete(){const e=await MP(this.localStore,new Lw(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(const r of this.queries)await LP(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function yb(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e){this.key=e}}class Eb{constructor(e){this.key=e}}class Tb{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=De(),this.mutatedKeys=De(),this.Aa=gI(e),this.Ra=new Dl(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new Pw,a=t?t.Ra:this.Ra;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,T)=>{const I=a.get(v),N=fh(this.query,T)?T:null,Q=!!I&&this.mutatedKeys.has(I.key),ee=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let Z=!1;I&&N?I.data.isEqual(N.data)?Q!==ee&&(r.track({type:3,doc:N}),Z=!0):this.ga(I,N)||(r.track({type:2,doc:N}),Z=!0,(m&&this.Aa(N,m)>0||g&&this.Aa(N,g)<0)&&(d=!0)):!I&&N?(r.track({type:0,doc:N}),Z=!0):I&&!N&&(r.track({type:1,doc:I}),Z=!0,(m||g)&&(d=!0)),Z&&(N?(c=c.add(N),l=ee?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),r.track({type:1,doc:v})}return{Ra:c,fa:r,ns:d,mutatedKeys:l}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const c=e.fa.G_();c.sort(((v,T)=>(function(N,Q){const ee=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he()}};return ee(N)-ee(Q)})(v.type,T.type)||this.Aa(v.doc,T.doc))),this.pa(r),a=a!=null&&a;const d=t&&!a?this.ya():[],m=this.da.size===0&&this.current&&!a?1:0,g=m!==this.Ea;return this.Ea=m,c.length!==0||g?{snapshot:new ql(this.query,e.Ra,l,c,e.mutatedKeys,m===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Pw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=De(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const t=[];return e.forEach((r=>{this.da.has(r)||t.push(new Eb(r))})),this.da.forEach((r=>{e.has(r)||t.push(new vb(r))})),t}ba(e){this.Ta=e.Ts,this.da=De();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ql.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class uV{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class cV{constructor(e){this.key=e,this.va=!1}}class hV{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Ca={},this.Fa=new la((d=>mI(d)),dh),this.Ma=new Map,this.xa=new Set,this.Oa=new ut(le.comparator),this.Na=new Map,this.La=new My,this.Ba={},this.ka=new Map,this.qa=fo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function dV(n,e,t=!0){const r=um(n);let a;const l=r.Fa.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.Da()):a=await wb(r,e,t,!0),a}async function fV(n,e){const t=um(n);await wb(t,e,!0,!1)}async function wb(n,e,t,r){const a=await jl(n.localStore,Vn(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return r&&(d=await $y(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&lm(n.remoteStore,a),d}async function $y(n,e,t,r,a){n.Ka=(T,I,N)=>(async function(ee,Z,te,me){let ce=Z.view.ma(te);ce.ns&&(ce=await Pf(ee.localStore,Z.query,!1).then((({documents:R})=>Z.view.ma(R,ce))));const Ae=me&&me.targetChanges.get(Z.targetId),Re=me&&me.targetMismatches.get(Z.targetId)!=null,Te=Z.view.applyChanges(ce,ee.isPrimaryClient,Ae,Re);return N_(ee,Z.targetId,Te.wa),Te.snapshot})(n,T,I,N);const l=await Pf(n.localStore,e,!0),c=new Tb(e,l.Ts),d=c.ma(l.documents),m=gh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",a),g=c.applyChanges(d,n.isPrimaryClient,m);N_(n,t,g.wa);const v=new uV(e,t,c);return n.Fa.set(e,v),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),g.snapshot}async function mV(n,e,t){const r=ue(n),a=r.Fa.get(e),l=r.Ma.get(a.targetId);if(l.length>1)return r.Ma.set(a.targetId,l.filter((c=>!dh(c,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await zl(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&Fl(r.remoteStore,a.targetId),Gl(r,a.targetId)})).catch(aa)):(Gl(r,a.targetId),await zl(r.localStore,a.targetId,!0))}async function pV(n,e){const t=ue(n),r=t.Fa.get(e),a=t.Ma.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Fl(t.remoteStore,r.targetId))}async function gV(n,e,t){const r=e0(n);try{const a=await(function(c,d){const m=ue(c),g=yt.now(),v=d.reduce(((N,Q)=>N.add(Q.key)),De());let T,I;return m.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let Q=Wn(),ee=De();return m.cs.getEntries(N,v).next((Z=>{Q=Z,Q.forEach(((te,me)=>{me.isValidDocument()||(ee=ee.add(te))}))})).next((()=>m.localDocuments.getOverlayedDocuments(N,Q))).next((Z=>{T=Z;const te=[];for(const me of d){const ce=jk(me,T.get(me.key).overlayedDocument);ce!=null&&te.push(new Yr(me.key,ce,sI(ce.value.mapValue),_t.exists(!0)))}return m.mutationQueue.addMutationBatch(N,g,te,d)})).next((Z=>{I=Z;const te=Z.applyToLocalDocumentSet(T,ee);return m.documentOverlayCache.saveOverlays(N,Z.batchId,te)}))})).then((()=>({batchId:I.batchId,changes:yI(T)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(c,d,m){let g=c.Ba[c.currentUser.toKey()];g||(g=new ut(Se)),g=g.insert(d,m),c.Ba[c.currentUser.toKey()]=g})(r,a.batchId,t),await Wr(r,a.changes),await nu(r.remoteStore)}catch(a){const l=ru(a,"Failed to persist write");t.reject(l)}}async function Ab(n,e){const t=ue(n);try{const r=await PP(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Na.get(l);c&&(pe(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?c.va=!0:a.modifiedDocuments.size>0?pe(c.va):a.removedDocuments.size>0&&(pe(c.va),c.va=!1))})),await Wr(t,r,e)}catch(r){await aa(r)}}function Uw(n,e,t){const r=ue(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Fa.forEach(((l,c)=>{const d=c.view.Z_(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const m=ue(c);m.onlineState=d;let g=!1;m.queries.forEach(((v,T)=>{for(const I of T.j_)I.Z_(d)&&(g=!0)})),g&&Yy(m)})(r.eventManager,e),a.length&&r.Ca.d_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _V(n,e,t){const r=ue(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Na.get(e),l=a&&a.key;if(l){let c=new ut(le.comparator);c=c.insert(l,ft.newNoDocument(l,ye.min()));const d=De().add(l),m=new ph(ye.min(),new Map,new ut(Se),c,d);await Ab(r,m),r.Oa=r.Oa.remove(l),r.Na.delete(e),Jy(r)}else await zl(r.localStore,e,!1).then((()=>Gl(r,e,t))).catch(aa)}async function yV(n,e){const t=ue(n),r=e.batch.batchId;try{const a=await kP(t.localStore,e);Zy(t,r,null),Xy(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Wr(t,a)}catch(a){await aa(a)}}async function vV(n,e,t){const r=ue(n);try{const a=await(function(c,d){const m=ue(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return m.mutationQueue.lookupMutationBatch(g,d).next((T=>(pe(T!==null),v=T.keys(),m.mutationQueue.removeMutationBatch(g,T)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,v,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>m.localDocuments.getDocuments(g,v)))}))})(r.localStore,e);Zy(r,e,t),Xy(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Wr(r,a)}catch(a){await aa(a)}}async function EV(n,e){const t=ue(n);ua(t.remoteStore)||ie("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(c){const d=ue(c);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m)))})(t.localStore);if(r===-1)return void e.resolve();const a=t.ka.get(r)||[];a.push(e),t.ka.set(r,a)}catch(r){const a=ru(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}function Xy(n,e){(n.ka.get(e)||[]).forEach((t=>{t.resolve()})),n.ka.delete(e)}function Zy(n,e,t){const r=ue(n);let a=r.Ba[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.Ba[r.currentUser.toKey()]=a}}function Gl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach((r=>{n.La.containsKey(r)||Ib(n,r)}))}function Ib(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(Fl(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Jy(n))}function N_(n,e,t){for(const r of t)r instanceof vb?(n.La.addReference(r.key,e),TV(n,r)):r instanceof Eb?(ie("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||Ib(n,r.key)):he()}function TV(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(ie("SyncEngine","New document in limbo: "+t),n.xa.add(r),Jy(n))}function Jy(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new le(je.fromString(e)),r=n.qa.next();n.Na.set(r,new cV(t)),n.Oa=n.Oa.insert(t,r),lm(n.remoteStore,new Lr(Vn(Zl(t.path)),r,"TargetPurposeLimboResolution",Qn.oe))}}async function Wr(n,e,t){const r=ue(n),a=[],l=[],c=[];r.Fa.isEmpty()||(r.Fa.forEach(((d,m)=>{c.push(r.Ka(m,e,t).then((g=>{var v;if((g||t)&&r.isPrimaryClient){const T=g?!g.fromCache:(v=t==null?void 0:t.targetChanges.get(m.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(g){a.push(g);const T=By.Wi(m.targetId,g);l.push(T)}})))})),await Promise.all(c),r.Ca.d_(a),await(async function(m,g){const v=ue(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>z.forEach(g,(I=>z.forEach(I.$i,(N=>v.persistence.referenceDelegate.addReference(T,I.targetId,N))).next((()=>z.forEach(I.Ui,(N=>v.persistence.referenceDelegate.removeReference(T,I.targetId,N)))))))))}catch(T){if(!oa(T))throw T;ie("LocalStore","Failed to update sequence numbers: "+T)}for(const T of g){const I=T.targetId;if(!T.fromCache){const N=v.os.get(I),Q=N.snapshotVersion,ee=N.withLastLimboFreeSnapshotVersion(Q);v.os=v.os.insert(I,ee)}}})(r.localStore,l))}async function wV(n,e){const t=ue(n);if(!t.currentUser.isEqual(e)){ie("SyncEngine","User change. New user:",e.toKey());const r=await rb(t.localStore,e);t.currentUser=e,(function(l,c){l.ka.forEach((d=>{d.forEach((m=>{m.reject(new ne(G.CANCELLED,c))}))})),l.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Wr(t,r.hs)}}function AV(n,e){const t=ue(n),r=t.Na.get(e);if(r&&r.va)return De().add(r.key);{let a=De();const l=t.Ma.get(e);if(!l)return a;for(const c of l){const d=t.Fa.get(c);a=a.unionWith(d.view.Va)}return a}}async function IV(n,e){const t=ue(n),r=await Pf(t.localStore,e.query,!0),a=e.view.ba(r);return t.isPrimaryClient&&N_(t,e.targetId,a.wa),a}async function bV(n,e){const t=ue(n);return lb(t.localStore,e).then((r=>Wr(t,r)))}async function SV(n,e,t,r){const a=ue(n),l=await(function(d,m){const g=ue(d),v=ue(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",(T=>v.Mn(T,m).next((I=>I?g.localDocuments.getDocuments(T,I):z.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await nu(a.remoteStore):t==="acknowledged"||t==="rejected"?(Zy(a,e,r||null),Xy(a,e),(function(d,m){ue(ue(d).mutationQueue).On(m)})(a.localStore,e)):he(),await Wr(a,l)):ie("SyncEngine","Cannot apply mutation batch with id: "+e)}async function RV(n,e){const t=ue(n);if(um(t),e0(t),e===!0&&t.Qa!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await Bw(t,r.toArray());t.Qa=!0,await D_(t.remoteStore,!0);for(const l of a)lm(t.remoteStore,l)}else if(e===!1&&t.Qa!==!1){const r=[];let a=Promise.resolve();t.Ma.forEach(((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):a=a.then((()=>(Gl(t,c),zl(t.localStore,c,!0)))),Fl(t.remoteStore,c)})),await a,await Bw(t,r),(function(c){const d=ue(c);d.Na.forEach(((m,g)=>{Fl(d.remoteStore,g)})),d.La.pr(),d.Na=new Map,d.Oa=new ut(le.comparator)})(t),t.Qa=!1,await D_(t.remoteStore,!1)}}async function Bw(n,e,t){const r=ue(n),a=[],l=[];for(const c of e){let d;const m=r.Ma.get(c);if(m&&m.length!==0){d=await jl(r.localStore,Vn(m[0]));for(const g of m){const v=r.Fa.get(g),T=await IV(r,v);T.snapshot&&l.push(T.snapshot)}}else{const g=await ob(r.localStore,c);d=await jl(r.localStore,g),await $y(r,bb(g),c,!1,d.resumeToken)}a.push(d)}return r.Ca.d_(l),a}function bb(n){return fI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function CV(n){return(function(t){return ue(ue(t).persistence).Qi()})(ue(n).localStore)}async function DV(n,e,t,r){const a=ue(n);if(a.Qa)return void ie("SyncEngine","Ignoring unexpected query state notification.");const l=a.Ma.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await lb(a.localStore,pI(l[0])),d=ph.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Dt.EMPTY_BYTE_STRING);await Wr(a,c,d);break}case"rejected":await zl(a.localStore,e,!0),Gl(a,e,r);break;default:he()}}async function xV(n,e,t){const r=um(n);if(r.Qa){for(const a of e){if(r.Ma.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){ie("SyncEngine","Adding an already active target "+a);continue}const l=await ob(r.localStore,a),c=await jl(r.localStore,l);await $y(r,bb(l),c.targetId,!1,c.resumeToken),lm(r.remoteStore,c)}for(const a of t)r.Ma.has(a)&&await zl(r.localStore,a,!1).then((()=>{Fl(r.remoteStore,a),Gl(r,a)})).catch(aa)}}function um(n){const e=ue(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ab.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_V.bind(null,e),e.Ca.d_=sV.bind(null,e.eventManager),e.Ca.$a=aV.bind(null,e.eventManager),e}function e0(n){const e=ue(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vV.bind(null,e),e}function NV(n,e,t){const r=ue(n);(async function(l,c,d){try{const m=await c.getMetadata();if(await(function(N,Q){const ee=ue(N),Z=Mt(Q.createTime);return ee.persistence.runTransaction("hasNewerBundle","readonly",(te=>ee.Gr.getBundleMetadata(te,Q.id))).then((te=>!!te&&te.createTime.compareTo(Z)>=0))})(l.localStore,m))return await c.close(),d._completeWith((function(N){return{taskState:"Success",documentsLoaded:N.totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}})(m)),Promise.resolve(new Set);d._updateProgress(yb(m));const g=new lV(m,l.localStore,c.serializer);let v=await c.Ua();for(;v;){const I=await g.la(v);I&&d._updateProgress(I),v=await c.Ua()}const T=await g.complete();return await Wr(l,T.Ia,void 0),await(function(N,Q){const ee=ue(N);return ee.persistence.runTransaction("Save bundle","readwrite",(Z=>ee.Gr.saveBundleMetadata(Z,Q)))})(l.localStore,m),d._completeWith(T.progress),Promise.resolve(T.Pa)}catch(m){return sr("SyncEngine",`Loading bundle failed with ${m}`),d._failWith(m),Promise.resolve(new Set)}})(r,e,t).then((a=>{r.sharedClientState.notifyBundleLoaded(a)}))}class $c{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_h(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return ib(this.persistence,new nb,e.initialUser,this.serializer)}Ga(e){return new tb(om.Zr,this.serializer)}Wa(e){return new cb}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$c.provider={build:()=>new $c};class Sb extends $c{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await e0(this.Ja.syncEngine),await nu(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return ib(this.persistence,new nb,e.initialUser,this.serializer)}ja(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new pP(r,e.asyncQueue,t)}Ha(e,t){const r=new $4(t,this.persistence);return new W4(e.asyncQueue,r)}Ga(e){const t=Uy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Kn.withCacheSize(this.cacheSizeBytes):Kn.DEFAULT;return new Ly(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,hb(),_f(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new cb}}class OV extends Sb{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof Qg&&(this.sharedClientState.syncEngine={no:SV.bind(null,t),ro:DV.bind(null,t),io:xV.bind(null,t),Qi:CV.bind(null,t),eo:bV.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi((async r=>{await RV(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Wa(e){const t=hb();if(!Qg.D(t))throw new ne(G.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Uy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Qg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Xc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Uw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wV.bind(null,this.syncEngine),await D_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new rV})()}createDatastore(e){const t=_h(e.databaseInfo.databaseId),r=(function(l){return new zP(l)})(e.databaseInfo);return(function(l,c,d,m){return new GP(l,c,d,m)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,c,d){return new KP(r,a,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Uw(this.syncEngine,t,0)),(function(){return Ow.D()?new Ow:new UP})())}createSyncEngine(e,t){return(function(a,l,c,d,m,g,v){const T=new hV(a,l,c,d,m,g);return v&&(T.Qa=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=ue(a);ie("RemoteStore","RemoteStore shutting down."),l.L_.add(5),await tu(l),l.k_.shutdown(),l.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Xc.provider={build:()=>new Xc};function jw(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Vt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new _n,this.buffer=new Uint8Array,this.eu=(function(){return new TextDecoder("utf-8")})(),this.tu().then((r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);const a=await this.iu(r);return new oV(JSON.parse(a),e.length+r)}su(){return this.buffer.findIndex((e=>e===123))}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ne(G.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(a,l){const c=ue(a),d={documents:l.map((T=>Yc(c.serializer,T)))},m=await c.Lo("BatchGetDocuments",c.serializer.databaseId,je.emptyPath(),d,l.length),g=new Map;m.forEach((T=>{const I=Wk(c.serializer,T);g.set(I.key.toString(),I)}));const v=[];return l.forEach((T=>{const I=g.get(T.toString());pe(!!I),v.push(I)})),v})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new eu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const a=le.fromPath(r);this.mutations.push(new Ry(a,this.precondition(a)))})),await(async function(r,a){const l=ue(r),c={writes:a.map((d=>Wc(l.serializer,d)))};await l.Mo("Commit",l.serializer.databaseId,je.emptyPath(),c)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw he();t=ye.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ne(G.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ye.min())?_t.exists(!1):_t.updateTime(t):_t.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ye.min()))throw new ne(G.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _t.updateTime(t)}return _t.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e,t,r,a,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=l,this._u=r.maxAttempts,this.t_=new zy(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go((async()=>{const e=new PV(this.datastore),t=this.cu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((a=>{this.lu(a)}))))})).catch((r=>{this.lu(r)}))}))}cu(e){try{const t=this.updateFunction(e);return!ch(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((()=>(this.uu(),Promise.resolve())))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!CI(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=nn.UNAUTHENTICATED,this.clientId=qA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{ie("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(ie("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _n;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=ru(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Wg(n,e){n.asyncQueue.verifyOperationInProgress(),ie("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async a=>{r.isEqual(a)||(await rb(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function zw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await t0(n);ie("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>kw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,a)=>kw(e.remoteStore,a))),n._onlineComponents=e}async function t0(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ie("FirestoreClient","Using user provided OfflineComponentProvider");try{await Wg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===G.FAILED_PRECONDITION||a.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;sr("Error using user provided cache. Falling back to memory cache: "+t),await Wg(n,new $c)}}else ie("FirestoreClient","Using default OfflineComponentProvider"),await Wg(n,new $c);return n._offlineComponents}async function hm(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ie("FirestoreClient","Using user provided OnlineComponentProvider"),await zw(n,n._uninitializedComponentsProvider._online)):(ie("FirestoreClient","Using default OnlineComponentProvider"),await zw(n,new Xc))),n._onlineComponents}function Rb(n){return t0(n).then((e=>e.persistence))}function n0(n){return t0(n).then((e=>e.localStore))}function Cb(n){return hm(n).then((e=>e.remoteStore))}function i0(n){return hm(n).then((e=>e.syncEngine))}function LV(n){return hm(n).then((e=>e.datastore))}async function Hl(n){const e=await hm(n),t=e.eventManager;return t.onListen=dV.bind(null,e.syncEngine),t.onUnlisten=mV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=fV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=pV.bind(null,e.syncEngine),t}function UV(n){return n.asyncQueue.enqueue((async()=>{const e=await Rb(n),t=await Cb(n);return e.setNetworkEnabled(!0),(function(a){const l=ue(a);return l.L_.delete(0),yh(l)})(t)}))}function BV(n){return n.asyncQueue.enqueue((async()=>{const e=await Rb(n),t=await Cb(n);return e.setNetworkEnabled(!1),(async function(a){const l=ue(a);l.L_.add(0),await tu(l),l.q_.set("Offline")})(t)}))}function jV(n,e){const t=new _n;return n.asyncQueue.enqueueAndForget((async()=>(async function(a,l,c){try{const d=await(function(g,v){const T=ue(g);return T.persistence.runTransaction("read document","readonly",(I=>T.localDocuments.getDocument(I,v)))})(a,l);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new ne(G.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const m=ru(d,`Failed to get document '${l} from cache`);c.reject(m)}})(await n0(n),e,t))),t.promise}function Db(n,e,t={}){const r=new _n;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,g){const v=new cm({next:I=>{v.Za(),c.enqueueAndForget((()=>Qy(l,T)));const N=I.docs.has(d);!N&&I.fromCache?g.reject(new ne(G.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&I.fromCache&&m&&m.source==="server"?g.reject(new ne(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(I)},error:I=>g.reject(I)}),T=new Wy(Zl(d.path),v,{includeMetadataChanges:!0,_a:!0});return Ky(l,T)})(await Hl(n),n.asyncQueue,e,t,r))),r.promise}function zV(n,e){const t=new _n;return n.asyncQueue.enqueueAndForget((async()=>(async function(a,l,c){try{const d=await Pf(a,l,!0),m=new Tb(l,d.Ts),g=m.ma(d.documents),v=m.applyChanges(g,!1);c.resolve(v.snapshot)}catch(d){const m=ru(d,`Failed to execute query '${l} against cache`);c.reject(m)}})(await n0(n),e,t))),t.promise}function xb(n,e,t={}){const r=new _n;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,g){const v=new cm({next:I=>{v.Za(),c.enqueueAndForget((()=>Qy(l,T))),I.fromCache&&m.source==="server"?g.reject(new ne(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(I)},error:I=>g.reject(I)}),T=new Wy(d,v,{includeMetadataChanges:!0,_a:!0});return Ky(l,T)})(await Hl(n),n.asyncQueue,e,t,r))),r.promise}function FV(n,e){const t=new cm(e);return n.asyncQueue.enqueueAndForget((async()=>(function(a,l){ue(a).Y_.add(l),l.next()})(await Hl(n),t))),()=>{t.Za(),n.asyncQueue.enqueueAndForget((async()=>(function(a,l){ue(a).Y_.delete(l)})(await Hl(n),t)))}}function qV(n,e,t,r){const a=(function(c,d){let m;return m=typeof c=="string"?xI().encode(c):c,(function(v,T){return new kV(v,T)})((function(v,T){if(v instanceof Uint8Array)return jw(v,T);if(v instanceof ArrayBuffer)return jw(new Uint8Array(v),T);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(m),d)})(t,_h(e));n.asyncQueue.enqueueAndForget((async()=>{NV(await i0(n),a,r)}))}function GV(n,e){return n.asyncQueue.enqueue((async()=>(function(r,a){const l=ue(r);return l.persistence.runTransaction("Get named query","readonly",(c=>l.Gr.getNamedQuery(c,a)))})(await n0(n),e)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(n,e,t){if(!t)throw new ne(G.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Ob(n,e,t,r){if(e===!0&&r===!0)throw new ne(G.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qw(n){if(!le.isDocumentKey(n))throw new ne(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Gw(n){if(le.isDocumentKey(n))throw new ne(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function dm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":he()}function $e(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ne(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=dm(n);throw new ne(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function kb(n,e){if(e<=0)throw new ne(G.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ne(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ob("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Nb((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ne(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ne(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ne(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vh{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hw(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new U4;switch(r.type){case"firstParty":return new F4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Fw.get(t);r&&(ie("ComponentProvider","Removing Datastore"),Fw.delete(t),r.terminate())})(this),Promise.resolve()}}function HV(n,e,t,r={}){var a;const l=(n=$e(n,vh))._getSettings(),c=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==c&&sr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},l),{host:c,ssl:!1})),r.mockUserToken){let d,m;if(typeof r.mockUserToken=="string")d=r.mockUserToken,m=nn.MOCK_USER;else{d=J5(r.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new ne(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new nn(g)}n._authCredentials=new B4(new FA(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ln=class Pb{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pb(this.firestore,e,this._query)}},Et=class Vb{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vb(this.firestore,e,this._key)}},Qs=class Mb extends Ln{constructor(e,t,r){super(e,t,Zl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new le(e))}withConverter(e){return new Mb(this.firestore,e,this._path)}};function Lb(n,e,...t){if(n=ve(n),r0("collection","path",e),n instanceof vh){const r=je.fromString(e,...t);return Gw(r),new Qs(n,null,r)}{if(!(n instanceof Et||n instanceof Qs))throw new ne(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(je.fromString(e,...t));return Gw(r),new Qs(n.firestore,null,r)}}function KV(n,e){if(n=$e(n,vh),r0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ne(G.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ln(n,null,(function(r){return new Qr(je.emptyPath(),r)})(e))}function Uf(n,e,...t){if(n=ve(n),arguments.length===1&&(e=qA.newId()),r0("doc","path",e),n instanceof vh){const r=je.fromString(e,...t);return qw(r),new Et(n,null,new le(r))}{if(!(n instanceof Et||n instanceof Qs))throw new ne(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(je.fromString(e,...t));return qw(r),new Et(n.firestore,n instanceof Qs?n.converter:null,new le(r))}}function Ub(n,e){return n=ve(n),e=ve(e),(n instanceof Et||n instanceof Qs)&&(e instanceof Et||e instanceof Qs)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Bb(n,e){return n=ve(n),e=ve(e),n instanceof Ln&&e instanceof Ln&&n.firestore===e.firestore&&dh(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new zy(this,"async_queue_retry"),this.Vu=()=>{const r=_f();r&&ie("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=_f();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=_f();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new _n;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!oa(e))throw e;ie("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const a=(function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),d})(r);throw Vt("INTERNAL UNHANDLED ERROR: ",a),r})).then((r=>(this.du=!1,r))))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const a=Hy.createAndSchedule(this,e,t,r,(l=>this.yu(l)));return this.Tu.push(a),a}fu(){this.Eu&&he()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function O_(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}class QV{constructor(){this._progressObserver={},this._taskCompletionResolver=new _n,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV=-1;let Lt=class extends vh{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new Kw,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Kw(e),this._firestoreClient=void 0,await e}}};function An(n){if(n._terminated)throw new ne(G.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||jb(n),n._firestoreClient}function jb(n){var e,t,r;const a=n._freezeSettings(),l=(function(d,m,g,v){return new yk(d,m,g,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,Nb(v.experimentalLongPollingOptions),v.useFetchStreams)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new MV(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}})(n._componentsProvider))}function WV(n,e){sr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return zb(n,Xc.provider,{build:r=>new Sb(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function $V(n){sr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();zb(n,Xc.provider,{build:t=>new OV(t,e.cacheSizeBytes)})}function zb(n,e,t){if((n=$e(n,Lt))._firestoreClient||n._terminated)throw new ne(G.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ne(G.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},jb(n)}function XV(n){if(n._initialized&&!n._terminated)throw new ne(G.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new _n;return n._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!nr.D())return Promise.resolve();const a=r+"main";await nr.delete(a)})(Uy(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function ZV(n){return(function(t){const r=new _n;return t.asyncQueue.enqueueAndForget((async()=>EV(await i0(t),r))),r.promise})(An(n=$e(n,Lt)))}function JV(n){return UV(An(n=$e(n,Lt)))}function e3(n){return BV(An(n=$e(n,Lt)))}function t3(n,e){const t=An(n=$e(n,Lt)),r=new QV;return qV(t,n._databaseId,e,r),r}function n3(n,e){return GV(An(n=$e(n,Lt)),e).then((t=>t?new Ln(n,null,t.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this._byteString=e}static fromBase64String(e){try{return new or(Dt.fromBase64String(e))}catch(t){throw new ne(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new or(Dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let na=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ne(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vo=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ne(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ne(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3=/^__.*__$/;class r3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Yr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jl(e,this.data,t,this.fieldTransforms)}}class Fb{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Yr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function qb(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he()}}class mm{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new mm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Fu({path:r,xu:!1});return a.Ou(e),a}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Fu({path:r,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Bf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(qb(this.Cu)&&i3.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class s3{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||_h(e)}Qu(e,t,r,a=!1){return new mm({Cu:e,methodName:t,qu:r,path:gt.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Eo(n){const e=n._freezeSettings(),t=_h(n._databaseId);return new s3(n._databaseId,!!e.ignoreUndefinedProperties,t)}function pm(n,e,t,r,a,l={}){const c=n.Qu(l.merge||l.mergeFields?2:0,e,t,a);d0("Data must be an object, but it was:",c,r);const d=Kb(r,c);let m,g;if(l.merge)m=new Yn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const T of l.mergeFields){const I=k_(e,T,t);if(!c.contains(I))throw new ne(G.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);Yb(v,I)||v.push(I)}m=new Yn(v),g=c.fieldTransforms.filter((T=>m.covers(T.field)))}else m=null,g=c.fieldTransforms;return new r3(new pn(d),m,g)}class Eh extends vo{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Eh}}function Gb(n,e,t){return new mm({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class a0 extends vo{_toFieldTransform(e){return new mh(e.path,new Ll)}isEqual(e){return e instanceof a0}}class o0 extends vo{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=Gb(this,e,!0),r=this.Ku.map((l=>To(l,t))),a=new lo(r);return new mh(e.path,a)}isEqual(e){return e instanceof o0&&kc(this.Ku,e.Ku)}}class l0 extends vo{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=Gb(this,e,!0),r=this.Ku.map((l=>To(l,t))),a=new uo(r);return new mh(e.path,a)}isEqual(e){return e instanceof l0&&kc(this.Ku,e.Ku)}}class u0 extends vo{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new Ul(e.serializer,TI(e.serializer,this.$u));return new mh(e.path,t)}isEqual(e){return e instanceof u0&&this.$u===e.$u}}function c0(n,e,t,r){const a=n.Qu(1,e,t);d0("Data must be an object, but it was:",a,r);const l=[],c=pn.empty();yo(r,((m,g)=>{const v=f0(e,m,t);g=ve(g);const T=a.Nu(v);if(g instanceof Eh)l.push(v);else{const I=To(g,T);I!=null&&(l.push(v),c.set(v,I))}}));const d=new Yn(l);return new Fb(c,d,a.fieldTransforms)}function h0(n,e,t,r,a,l){const c=n.Qu(1,e,t),d=[k_(e,r,t)],m=[a];if(l.length%2!=0)throw new ne(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<l.length;I+=2)d.push(k_(e,l[I])),m.push(l[I+1]);const g=[],v=pn.empty();for(let I=d.length-1;I>=0;--I)if(!Yb(g,d[I])){const N=d[I];let Q=m[I];Q=ve(Q);const ee=c.Nu(N);if(Q instanceof Eh)g.push(N);else{const Z=To(Q,ee);Z!=null&&(g.push(N),v.set(N,Z))}}const T=new Yn(g);return new Fb(v,T,c.fieldTransforms)}function Hb(n,e,t,r=!1){return To(t,n.Qu(r?4:3,e))}function To(n,e){if(Qb(n=ve(n)))return d0("Unsupported field value:",e,n),Kb(n,e);if(n instanceof vo)return(function(r,a){if(!qb(a.Cu))throw a.Bu(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,a){const l=[];let c=0;for(const d of r){let m=To(d,a.Lu(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(n,e)}return(function(r,a){if((r=ve(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return TI(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=yt.fromDate(r);return{timestampValue:Bl(a.serializer,l)}}if(r instanceof yt){const l=new yt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bl(a.serializer,l)}}if(r instanceof fm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof or)return{bytesValue:kI(a.serializer,r._byteString)};if(r instanceof Et){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.Bu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Oy(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof s0)return(function(c,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map((m=>{if(typeof m!="number")throw d.Bu("VectorValues must only contain numeric values.");return Sy(d.serializer,m)}))}}}}}})(r,a);throw a.Bu(`Unsupported field value: ${dm(r)}`)})(n,e)}function Kb(n,e){const t={};return tI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yo(n,((r,a)=>{const l=To(a,e.Mu(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function Qb(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof yt||n instanceof fm||n instanceof or||n instanceof Et||n instanceof vo||n instanceof s0)}function d0(n,e,t){if(!Qb(t)||!(function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)})(t)){const r=dm(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function k_(n,e,t){if((e=ve(e))instanceof na)return e._internalPath;if(typeof e=="string")return f0(n,e);throw Bf("Field path arguments must be of type string or ",n,!1,void 0,t)}const a3=new RegExp("[~\\*/\\[\\]]");function f0(n,e,t){if(e.search(a3)>=0)throw Bf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new na(...e.split("."))._internalPath}catch{throw Bf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Bf(n,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${a}`),m+=")"),new ne(G.INVALID_ARGUMENT,d+n+m)}function Yb(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new o3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(gm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class o3 extends Zc{data(){return super.data()}}function gm(n,e){return typeof e=="string"?f0(n,e):e instanceof na?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ne(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class m0{}class Th extends m0{}function zs(n,e,...t){let r=[];e instanceof m0&&r.push(e),r=r.concat(t),(function(l){const c=l.filter((m=>m instanceof p0)).length,d=l.filter((m=>m instanceof _m)).length;if(c>1||c>0&&d>0)throw new ne(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)n=a._apply(n);return n}class _m extends Th{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new _m(e,t,r)}_apply(e){const t=this._parse(e);return Xb(e._query,t),new Ln(e.firestore,e.converter,E_(e._query,t))}_parse(e){const t=Eo(e.firestore);return(function(l,c,d,m,g,v,T){let I;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ne(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Yw(T,v);const N=[];for(const Q of T)N.push(Qw(m,l,Q));I={arrayValue:{values:N}}}else I=Qw(m,l,T)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Yw(T,v),I=Hb(d,c,T,v==="in"||v==="not-in");return ze.create(g,v,I)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function l3(n,e,t){const r=e,a=gm("where",n);return _m._create(a,r,t)}class p0 extends m0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new p0(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:it.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const d=l.getFlattenedFilters();for(const m of d)Xb(c,m),c=E_(c,m)})(e._query,t),new Ln(e.firestore,e.converter,E_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class g0 extends Th{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new g0(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new ne(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ne(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qc(l,c)})(e._query,this._field,this._direction);return new Ln(e.firestore,e.converter,(function(a,l){const c=a.explicitOrderBy.concat([l]);return new Qr(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function u3(n,e="asc"){const t=e,r=gm("orderBy",n);return g0._create(r,t)}class ym extends Th{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new ym(e,t,r)}_apply(e){return new Ln(e.firestore,e.converter,xf(e._query,this._limit,this._limitType))}}function c3(n){return kb("limit",n),ym._create("limit",n,"F")}function h3(n){return kb("limitToLast",n),ym._create("limitToLast",n,"L")}class vm extends Th{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new vm(e,t,r)}_apply(e){const t=$b(e,this.type,this._docOrFields,this._inclusive);return new Ln(e.firestore,e.converter,(function(a,l){return new Qr(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)})(e._query,t))}}function d3(...n){return vm._create("startAt",n,!0)}function f3(...n){return vm._create("startAfter",n,!1)}class Em extends Th{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Em(e,t,r)}_apply(e){const t=$b(e,this.type,this._docOrFields,this._inclusive);return new Ln(e.firestore,e.converter,(function(a,l){return new Qr(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,l)})(e._query,t))}}function m3(...n){return Em._create("endBefore",n,!1)}function p3(...n){return Em._create("endAt",n,!0)}function $b(n,e,t,r){if(t[0]=ve(t[0]),t[0]instanceof Zc)return(function(l,c,d,m,g){if(!m)throw new ne(G.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const v=[];for(const T of Cl(l))if(T.field.isKeyField())v.push(ao(c,m.key));else{const I=m.data.field(T.field);if(tm(I))throw new ne(G.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(I===null){const N=T.field.canonicalString();throw new ne(G.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}v.push(I)}return new ea(v,g)})(n._query,n.firestore._databaseId,e,t[0]._document,r);{const a=Eo(n.firestore);return(function(c,d,m,g,v,T){const I=c.explicitOrderBy;if(v.length>I.length)throw new ne(G.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let Q=0;Q<v.length;Q++){const ee=v[Q];if(I[Q].field.isKeyField()){if(typeof ee!="string")throw new ne(G.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof ee}`);if(!Iy(c)&&ee.indexOf("/")!==-1)throw new ne(G.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${ee}' contains a slash.`);const Z=c.path.child(je.fromString(ee));if(!le.isDocumentKey(Z))throw new ne(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${Z}' is not because it contains an odd number of segments.`);const te=new le(Z);N.push(ao(d,te))}else{const Z=Hb(m,g,ee);N.push(Z)}}return new ea(N,T)})(n._query,n.firestore._databaseId,a,e,t,r)}}function Qw(n,e,t){if(typeof(t=ve(t))=="string"){if(t==="")throw new ne(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Iy(e)&&t.indexOf("/")!==-1)throw new ne(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(je.fromString(t));if(!le.isDocumentKey(r))throw new ne(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ao(n,new le(r))}if(t instanceof Et)return ao(n,t._key);throw new ne(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dm(t)}.`)}function Yw(n,e){if(!Array.isArray(n)||n.length===0)throw new ne(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Xb(n,e){const t=(function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ne(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class _0{convertValue(e,t="none"){switch(so(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw he()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return yo(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){var t,r,a;const l=(a=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map((c=>pt(c.doubleValue)));return new s0(l)}convertGeoPoint(e){return new fm(pt(e.latitude),pt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=wy(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Gc(e));default:return null}}convertTimestamp(e){const t=Fr(e);return new yt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=je.fromString(e);pe(GI(r));const a=new Zs(r.get(1),r.get(3)),l=new le(r.popFirst(5));return a.isEqual(t)||Vt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class g3 extends _0{constructor(e){super(),this.firestore=e}convertBytes(e){return new or(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let qr=class extends Zc{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Nc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(gm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Nc=class extends qr{data(e={}){return super.data(e)}},ia=class{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Wa(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Nc(this._firestore,this._userDataWriter,r.key,r,new Wa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ne(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const m=new Nc(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Wa(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const m=new Nc(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Wa(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,v=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:_3(d.type),doc:m,oldIndex:g,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function _3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he()}}function Zb(n,e){return n instanceof qr&&e instanceof qr?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ia&&e instanceof ia&&n._firestore===e._firestore&&Bb(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y3(n){n=$e(n,Et);const e=$e(n.firestore,Lt);return Db(An(e),n._key).then((t=>y0(e,n,t)))}class wo extends _0{constructor(e){super(),this.firestore=e}convertBytes(e){return new or(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,t)}}function v3(n){n=$e(n,Et);const e=$e(n.firestore,Lt),t=An(e),r=new wo(e);return jV(t,n._key).then((a=>new qr(e,r,n._key,a,new Wa(a!==null&&a.hasLocalMutations,!0),n.converter)))}function E3(n){n=$e(n,Et);const e=$e(n.firestore,Lt);return Db(An(e),n._key,{source:"server"}).then((t=>y0(e,n,t)))}function T3(n){n=$e(n,Ln);const e=$e(n.firestore,Lt),t=An(e),r=new wo(e);return Wb(n._query),xb(t,n._query).then((a=>new ia(e,r,n,a)))}function w3(n){n=$e(n,Ln);const e=$e(n.firestore,Lt),t=An(e),r=new wo(e);return zV(t,n._query).then((a=>new ia(e,r,n,a)))}function A3(n){n=$e(n,Ln);const e=$e(n.firestore,Lt),t=An(e),r=new wo(e);return xb(t,n._query,{source:"server"}).then((a=>new ia(e,r,n,a)))}function Ww(n,e,t){n=$e(n,Et);const r=$e(n.firestore,Lt),a=Tm(n.converter,e,t);return wh(r,[pm(Eo(r),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,_t.none())])}function $w(n,e,t,...r){n=$e(n,Et);const a=$e(n.firestore,Lt),l=Eo(a);let c;return c=typeof(e=ve(e))=="string"||e instanceof na?h0(l,"updateDoc",n._key,e,t,r):c0(l,"updateDoc",n._key,e),wh(a,[c.toMutation(n._key,_t.exists(!0))])}function I3(n){return wh($e(n.firestore,Lt),[new eu(n._key,_t.none())])}function b3(n,e){const t=$e(n.firestore,Lt),r=Uf(n),a=Tm(n.converter,e);return wh(t,[pm(Eo(n.firestore),"addDoc",r._key,a,n.converter!==null,{}).toMutation(r._key,_t.exists(!1))]).then((()=>r))}function Jb(n,...e){var t,r,a;n=ve(n);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||O_(e[c])||(l=e[c],c++);const d={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(O_(e[c])){const T=e[c];e[c]=(t=T.next)===null||t===void 0?void 0:t.bind(T),e[c+1]=(r=T.error)===null||r===void 0?void 0:r.bind(T),e[c+2]=(a=T.complete)===null||a===void 0?void 0:a.bind(T)}let m,g,v;if(n instanceof Et)g=$e(n.firestore,Lt),v=Zl(n._key.path),m={next:T=>{e[c]&&e[c](y0(g,n,T))},error:e[c+1],complete:e[c+2]};else{const T=$e(n,Ln);g=$e(T.firestore,Lt),v=T._query;const I=new wo(g);m={next:N=>{e[c]&&e[c](new ia(g,I,T,N))},error:e[c+1],complete:e[c+2]},Wb(n._query)}return(function(I,N,Q,ee){const Z=new cm(ee),te=new Wy(N,Z,Q);return I.asyncQueue.enqueueAndForget((async()=>Ky(await Hl(I),te))),()=>{Z.Za(),I.asyncQueue.enqueueAndForget((async()=>Qy(await Hl(I),te)))}})(An(g),v,d,m)}function S3(n,e){return FV(An(n=$e(n,Lt)),O_(e)?e:{next:e})}function wh(n,e){return(function(r,a){const l=new _n;return r.asyncQueue.enqueueAndForget((async()=>gV(await i0(r),a,l))),l.promise})(An(n),e)}function y0(n,e,t){const r=t.docs.get(e._key),a=new wo(n);return new qr(n,a,e._key,r,new Wa(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let C3=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Eo(e)}set(e,t,r){this._verifyNotCommitted();const a=qs(e,this._firestore),l=Tm(a.converter,t,r),c=pm(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(c.toMutation(a._key,_t.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const l=qs(e,this._firestore);let c;return c=typeof(t=ve(t))=="string"||t instanceof na?h0(this._dataReader,"WriteBatch.update",l._key,t,r,a):c0(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,_t.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=qs(e,this._firestore);return this._mutations=this._mutations.concat(new eu(t._key,_t.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ne(G.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function qs(n,e){if((n=ve(n)).firestore!==e)throw new ne(G.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let D3=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Eo(t)}get(t){const r=qs(t,this._firestore),a=new g3(this._firestore);return this._transaction.lookup([r._key]).then((l=>{if(!l||l.length!==1)return he();const c=l[0];if(c.isFoundDocument())return new Zc(this._firestore,a,c.key,c,r.converter);if(c.isNoDocument())return new Zc(this._firestore,a,r._key,null,r.converter);throw he()}))}set(t,r,a){const l=qs(t,this._firestore),c=Tm(l.converter,r,a),d=pm(this._dataReader,"Transaction.set",l._key,c,l.converter!==null,a);return this._transaction.set(l._key,d),this}update(t,r,a,...l){const c=qs(t,this._firestore);let d;return d=typeof(r=ve(r))=="string"||r instanceof na?h0(this._dataReader,"Transaction.update",c._key,r,a,l):c0(this._dataReader,"Transaction.update",c._key,r),this._transaction.update(c._key,d),this}delete(t){const r=qs(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=qs(e,this._firestore),r=new wo(this._firestore);return super.get(e).then((a=>new qr(this._firestore,r,t._key,a._document,new Wa(!1,!1),t.converter)))}};function x3(n,e,t){n=$e(n,Lt);const r=Object.assign(Object.assign({},R3),t);return(function(l){if(l.maxAttempts<1)throw new ne(G.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(l,c,d){const m=new _n;return l.asyncQueue.enqueueAndForget((async()=>{const g=await LV(l);new VV(l.asyncQueue,g,d,c,m).au()})),m.promise})(An(n),(a=>e(new D3(n,a))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N3(){return new Eh("deleteField")}function O3(){return new a0("serverTimestamp")}function k3(...n){return new o0("arrayUnion",n)}function P3(...n){return new l0("arrayRemove",n)}function V3(n){return new u0("increment",n)}(function(e,t=!0){(function(a){Xl=a})(ra),Ii(new Mn("firestore",((r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new Lt(new j4(r.getProvider("auth-internal")),new G4(r.getProvider("app-check-internal")),(function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ne(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zs(g.options.projectId,v)})(c,a),c);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),kn(BT,"4.7.3",e),kn(BT,"4.7.3","esm2017")})();const M3="@firebase/firestore-compat",L3="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(){if(typeof Uint8Array>"u")throw new ne("unimplemented","Uint8Arrays are not available in this environment.")}function Zw(){if(!gk())throw new ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Jc{constructor(e){this._delegate=e}static fromBase64String(e){return Zw(),new Jc(or.fromBase64String(e))}static fromUint8Array(e){return Xw(),new Jc(or.fromUint8Array(e))}toBase64(){return Zw(),this._delegate.toBase64()}toUint8Array(){return Xw(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(n){return U3(n,["next","error","complete"])}function U3(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{enableIndexedDbPersistence(e,t){return WV(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return $V(e._delegate)}clearIndexedDbPersistence(e){return XV(e._delegate)}}class eS{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Zs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&sr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){HV(this._delegate,e,t,r)}enableNetwork(){return JV(this._delegate)}disableNetwork(){return e3(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Ob("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return ZV(this._delegate)}onSnapshotsInSync(e){return S3(this._delegate,e)}get app(){if(!this._appCompat)throw new ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Kl(this,Lb(this._delegate,e))}catch(t){throw On(t,"collection()","Firestore.collection()")}}doc(e){try{return new wi(this,Uf(this._delegate,e))}catch(t){throw On(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new xn(this,KV(this._delegate,e))}catch(t){throw On(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return x3(this._delegate,t=>e(new tS(this,t)))}batch(){return An(this._delegate),new nS(new C3(this._delegate,e=>wh(this._delegate,e)))}loadBundle(e){return t3(this._delegate,e)}namedQuery(e){return n3(this._delegate,e).then(t=>t?new xn(this,t):null)}}class wm extends _0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jc(new or(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return wi.forKey(t,this.firestore,null)}}function j3(n){M4(n)}class tS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new wm(e)}get(e){const t=$a(e);return this._delegate.get(t).then(r=>new eh(this._firestore,new qr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const a=$a(e);return r?(v0("Transaction.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=$a(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=$a(e);return this._delegate.delete(t),this}}class nS{constructor(e){this._delegate=e}set(e,t,r){const a=$a(e);return r?(v0("WriteBatch.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=$a(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=$a(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class mo{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Nc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new th(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=mo.INSTANCES;let a=r.get(e);a||(a=new WeakMap,r.set(e,a));let l=a.get(t);return l||(l=new mo(e,new wm(e),t),a.set(t,l)),l}}mo.INSTANCES=new WeakMap;class wi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wm(e)}static forPath(e,t,r){if(e.length%2!==0)throw new ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new wi(t,new Et(t._delegate,r,new le(e)))}static forKey(e,t,r){return new wi(t,new Et(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Kl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Kl(this.firestore,Lb(this._delegate,e))}catch(t){throw On(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ve(e),e instanceof Et?Ub(this._delegate,e):!1}set(e,t){t=v0("DocumentReference.set",t);try{return t?Ww(this._delegate,e,t):Ww(this._delegate,e)}catch(r){throw On(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?$w(this._delegate,e):$w(this._delegate,e,t,...r)}catch(a){throw On(a,"updateDoc()","DocumentReference.update()")}}delete(){return I3(this._delegate)}onSnapshot(...e){const t=iS(e),r=rS(e,a=>new eh(this.firestore,new qr(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return Jb(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=v3(this._delegate):(e==null?void 0:e.source)==="server"?t=E3(this._delegate):t=y3(this._delegate),t.then(r=>new eh(this.firestore,new qr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new wi(this.firestore,e?this._delegate.withConverter(mo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function On(n,e,t){return n.message=n.message.replace(e,t),n}function iS(n){for(const e of n)if(typeof e=="object"&&!P_(e))return e;return{}}function rS(n,e){var t,r;let a;return P_(n[0])?a=n[0]:P_(n[1])?a=n[1]:typeof n[0]=="function"?a={next:n[0],error:n[1],complete:n[2]}:a={next:n[1],error:n[2],complete:n[3]},{next:l=>{a.next&&a.next(e(l))},error:(t=a.error)===null||t===void 0?void 0:t.bind(a),complete:(r=a.complete)===null||r===void 0?void 0:r.bind(a)}}class eh{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new wi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Zb(this._delegate,e._delegate)}}class th extends eh{data(e){const t=this._delegate.data(e);return this._delegate._converter||L4(t!==void 0),t}}class xn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wm(e)}where(e,t,r){try{return new xn(this.firestore,zs(this._delegate,l3(e,t,r)))}catch(a){throw On(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new xn(this.firestore,zs(this._delegate,u3(e,t)))}catch(r){throw On(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new xn(this.firestore,zs(this._delegate,c3(e)))}catch(t){throw On(t,"limit()","Query.limit()")}}limitToLast(e){try{return new xn(this.firestore,zs(this._delegate,h3(e)))}catch(t){throw On(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new xn(this.firestore,zs(this._delegate,d3(...e)))}catch(t){throw On(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new xn(this.firestore,zs(this._delegate,f3(...e)))}catch(t){throw On(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new xn(this.firestore,zs(this._delegate,m3(...e)))}catch(t){throw On(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new xn(this.firestore,zs(this._delegate,p3(...e)))}catch(t){throw On(t,"endAt()","Query.endAt()")}}isEqual(e){return Bb(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=w3(this._delegate):(e==null?void 0:e.source)==="server"?t=A3(this._delegate):t=T3(this._delegate),t.then(r=>new V_(this.firestore,new ia(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=iS(e),r=rS(e,a=>new V_(this.firestore,new ia(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return Jb(this._delegate,t,r)}withConverter(e){return new xn(this.firestore,e?this._delegate.withConverter(mo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class z3{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new th(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class V_{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new xn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new th(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new z3(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new th(this._firestore,r))})}isEqual(e){return Zb(this._delegate,e._delegate)}}class Kl extends xn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new wi(this.firestore,e):null}doc(e){try{return e===void 0?new wi(this.firestore,Uf(this._delegate)):new wi(this.firestore,Uf(this._delegate,e))}catch(t){throw On(t,"doc()","CollectionReference.doc()")}}add(e){return b3(this._delegate,e).then(t=>new wi(this.firestore,t))}isEqual(e){return Ub(this._delegate,e._delegate)}withConverter(e){return new Kl(this.firestore,e?this._delegate.withConverter(mo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function $a(n){return $e(n,Et)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(...e){this._delegate=new na(...e)}static documentId(){return new E0(gt.keyField().canonicalString())}isEqual(e){return e=ve(e),e instanceof na?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e){this._delegate=e}static serverTimestamp(){const e=O3();return e._methodName="FieldValue.serverTimestamp",new Qa(e)}static delete(){const e=N3();return e._methodName="FieldValue.delete",new Qa(e)}static arrayUnion(...e){const t=k3(...e);return t._methodName="FieldValue.arrayUnion",new Qa(t)}static arrayRemove(...e){const t=P3(...e);return t._methodName="FieldValue.arrayRemove",new Qa(t)}static increment(e){const t=V3(e);return t._methodName="FieldValue.increment",new Qa(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3={Firestore:eS,GeoPoint:fm,Timestamp:yt,Blob:Jc,Transaction:tS,WriteBatch:nS,DocumentReference:wi,DocumentSnapshot:eh,Query:xn,QueryDocumentSnapshot:th,QuerySnapshot:V_,CollectionReference:Kl,FieldPath:E0,FieldValue:Qa,setLogLevel:j3,CACHE_SIZE_UNLIMITED:YV};function q3(n,e){n.INTERNAL.registerComponent(new Mn("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(r,a)},"PUBLIC").setServiceProps(Object.assign({},F3)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G3(n){q3(n,(e,t)=>new eS(e,t,new B3)),n.registerVersion(M3,L3)}G3(Nn);const sS="@firebase/installations",T0="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS=1e4,oS=`w:${T0}`,lS="FIS_v2",H3="https://firebaseinstallations.googleapis.com/v1",K3=3600*1e3,Q3="installations",Y3="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},po=new Gr(Q3,Y3,W3);function uS(n){return n instanceof gn&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS({projectId:n}){return`${H3}/projects/${n}/installations`}function hS(n){return{token:n.token,requestStatus:2,expiresIn:X3(n.expiresIn),creationTime:Date.now()}}async function dS(n,e){const r=(await e.json()).error;return po.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function fS({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function $3(n,{refreshToken:e}){const t=fS(n);return t.append("Authorization",Z3(e)),t}async function mS(n){const e=await n();return e.status>=500&&e.status<600?n():e}function X3(n){return Number(n.replace("s","000"))}function Z3(n){return`${lS} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J3({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=cS(n),a=fS(n),l=e.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const c={fid:t,authVersion:lS,appId:n.appId,sdkVersion:oS},d={method:"POST",headers:a,body:JSON.stringify(c)},m=await mS(()=>fetch(r,d));if(m.ok){const g=await m.json();return{fid:g.fid||t,registrationStatus:2,refreshToken:g.refreshToken,authToken:hS(g.authToken)}}else throw await dS("Create Installation",m)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=/^[cdef][\w-]{21}$/,M_="";function nM(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=iM(n);return tM.test(t)?t:M_}catch{return M_}}function iM(n){return eM(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS=new Map;function _S(n,e){const t=Am(n);yS(t,e),rM(t,e)}function yS(n,e){const t=gS.get(n);if(t)for(const r of t)r(e)}function rM(n,e){const t=sM();t&&t.postMessage({key:n,fid:e}),aM()}let Xa=null;function sM(){return!Xa&&"BroadcastChannel"in self&&(Xa=new BroadcastChannel("[Firebase] FID Change"),Xa.onmessage=n=>{yS(n.data.key,n.data.fid)}),Xa}function aM(){gS.size===0&&Xa&&(Xa.close(),Xa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM="firebase-installations-database",lM=1,go="firebase-installations-store";let $g=null;function w0(){return $g||($g=x2(oM,lM,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(go)}}})),$g}async function jf(n,e){const t=Am(n),a=(await w0()).transaction(go,"readwrite"),l=a.objectStore(go),c=await l.get(t);return await l.put(e,t),await a.done,(!c||c.fid!==e.fid)&&_S(n,e.fid),e}async function vS(n){const e=Am(n),r=(await w0()).transaction(go,"readwrite");await r.objectStore(go).delete(e),await r.done}async function Im(n,e){const t=Am(n),a=(await w0()).transaction(go,"readwrite"),l=a.objectStore(go),c=await l.get(t),d=e(c);return d===void 0?await l.delete(t):await l.put(d,t),await a.done,d&&(!c||c.fid!==d.fid)&&_S(n,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A0(n){let e;const t=await Im(n.appConfig,r=>{const a=uM(r),l=cM(n,a);return e=l.registrationPromise,l.installationEntry});return t.fid===M_?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function uM(n){const e=n||{fid:nM(),registrationStatus:0};return ES(e)}function cM(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(po.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=hM(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:dM(n)}:{installationEntry:e}}async function hM(n,e){try{const t=await J3(n,e);return jf(n.appConfig,t)}catch(t){throw uS(t)&&t.customData.serverCode===409?await vS(n.appConfig):await jf(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function dM(n){let e=await Jw(n.appConfig);for(;e.registrationStatus===1;)await pS(100),e=await Jw(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await A0(n);return r||t}return e}function Jw(n){return Im(n,e=>{if(!e)throw po.create("installation-not-found");return ES(e)})}function ES(n){return fM(n)?{fid:n.fid,registrationStatus:0}:n}function fM(n){return n.registrationStatus===1&&n.registrationTime+aS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mM({appConfig:n,heartbeatServiceProvider:e},t){const r=pM(n,t),a=$3(n,t),l=e.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const c={installation:{sdkVersion:oS,appId:n.appId}},d={method:"POST",headers:a,body:JSON.stringify(c)},m=await mS(()=>fetch(r,d));if(m.ok){const g=await m.json();return hS(g)}else throw await dS("Generate Auth Token",m)}function pM(n,{fid:e}){return`${cS(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I0(n,e=!1){let t;const r=await Im(n.appConfig,l=>{if(!TS(l))throw po.create("not-registered");const c=l.authToken;if(!e&&yM(c))return l;if(c.requestStatus===1)return t=gM(n,e),l;{if(!navigator.onLine)throw po.create("app-offline");const d=EM(l);return t=_M(n,d),d}});return t?await t:r.authToken}async function gM(n,e){let t=await e2(n.appConfig);for(;t.authToken.requestStatus===1;)await pS(100),t=await e2(n.appConfig);const r=t.authToken;return r.requestStatus===0?I0(n,e):r}function e2(n){return Im(n,e=>{if(!TS(e))throw po.create("not-registered");const t=e.authToken;return TM(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function _M(n,e){try{const t=await mM(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await jf(n.appConfig,r),t}catch(t){if(uS(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await vS(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await jf(n.appConfig,r)}throw t}}function TS(n){return n!==void 0&&n.registrationStatus===2}function yM(n){return n.requestStatus===2&&!vM(n)}function vM(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+K3}function EM(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function TM(n){return n.requestStatus===1&&n.requestTime+aS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wM(n){const e=n,{installationEntry:t,registrationPromise:r}=await A0(e);return r?r.catch(console.error):I0(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AM(n,e=!1){const t=n;return await IM(t),(await I0(t,e)).token}async function IM(n){const{registrationPromise:e}=await A0(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bM(n){if(!n||!n.options)throw Xg("App Configuration");if(!n.name)throw Xg("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Xg(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Xg(n){return po.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS="installations",SM="installations-internal",RM=n=>{const e=n.getProvider("app").getImmediate(),t=bM(e),r=Ff(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},CM=n=>{const e=n.getProvider("app").getImmediate(),t=Ff(e,wS).getImmediate();return{getId:()=>wM(t),getToken:a=>AM(t,a)}};function DM(){Ii(new Mn(wS,RM,"PUBLIC")),Ii(new Mn(SM,CM,"PRIVATE"))}DM();kn(sS,T0);kn(sS,T0,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2="analytics",xM="firebase_id",NM="origin",OM=60*1e3,kM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",b0="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn=new nh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},oi=new Gr("analytics","Analytics",PM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(n){if(!n.startsWith(b0)){const e=oi.create("invalid-gtag-resource",{gtagURL:n});return sn.warn(e.message),""}return n}function AS(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function MM(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function LM(n,e){const t=MM("firebase-js-sdk-policy",{createScriptURL:VM}),r=document.createElement("script"),a=`${b0}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(a):a,r.async=!0,document.head.appendChild(r)}function UM(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function BM(n,e,t,r,a,l){const c=r[a];try{if(c)await e[c];else{const m=(await AS(t)).find(g=>g.measurementId===a);m&&await e[m.appId]}}catch(d){sn.error(d)}n("config",a,l)}async function jM(n,e,t,r,a){try{let l=[];if(a&&a.send_to){let c=a.send_to;Array.isArray(c)||(c=[c]);const d=await AS(t);for(const m of c){const g=d.find(T=>T.measurementId===m),v=g&&e[g.appId];if(v)l.push(v);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),n("event",r,a||{})}catch(l){sn.error(l)}}function zM(n,e,t,r){async function a(l,...c){try{if(l==="event"){const[d,m]=c;await jM(n,e,t,d,m)}else if(l==="config"){const[d,m]=c;await BM(n,e,t,r,d,m)}else if(l==="consent"){const[d,m]=c;n("consent",d,m)}else if(l==="get"){const[d,m,g]=c;n("get",d,m,g)}else if(l==="set"){const[d]=c;n("set",d)}else n(l,...c)}catch(d){sn.error(d)}}return a}function FM(n,e,t,r,a){let l=function(...c){window[r].push(arguments)};return window[a]&&typeof window[a]=="function"&&(l=window[a]),window[a]=zM(l,n,e,t),{gtagCore:l,wrappedGtag:window[a]}}function qM(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(b0)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM=30,HM=1e3;class KM{constructor(e={},t=HM){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const IS=new KM;function QM(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function YM(n){var e;const{appId:t,apiKey:r}=n,a={method:"GET",headers:QM(r)},l=kM.replace("{app-id}",t),c=await fetch(l,a);if(c.status!==200&&c.status!==304){let d="";try{const m=await c.json();!((e=m.error)===null||e===void 0)&&e.message&&(d=m.error.message)}catch{}throw oi.create("config-fetch-failed",{httpStatus:c.status,responseMessage:d})}return c.json()}async function WM(n,e=IS,t){const{appId:r,apiKey:a,measurementId:l}=n.options;if(!r)throw oi.create("no-app-id");if(!a){if(l)return{measurementId:l,appId:r};throw oi.create("no-api-key")}const c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new ZM;return setTimeout(async()=>{d.abort()},OM),bS({appId:r,apiKey:a,measurementId:l},c,d,e)}async function bS(n,{throttleEndTimeMillis:e,backoffCount:t},r,a=IS){var l;const{appId:c,measurementId:d}=n;try{await $M(r,e)}catch(m){if(d)return sn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:c,measurementId:d};throw m}try{const m=await YM(n);return a.deleteThrottleMetadata(c),m}catch(m){const g=m;if(!XM(g)){if(a.deleteThrottleMetadata(c),d)return sn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:c,measurementId:d};throw m}const v=Number((l=g==null?void 0:g.customData)===null||l===void 0?void 0:l.httpStatus)===503?uT(t,a.intervalMillis,GM):uT(t,a.intervalMillis),T={throttleEndTimeMillis:Date.now()+v,backoffCount:t+1};return a.setThrottleMetadata(c,T),sn.debug(`Calling attemptFetch again in ${v} millis`),bS(n,T,r,a)}}function $M(n,e){return new Promise((t,r)=>{const a=Math.max(e-Date.now(),0),l=setTimeout(t,a);n.addEventListener(()=>{clearTimeout(l),r(oi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function XM(n){if(!(n instanceof gn)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class ZM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function JM(n,e,t,r,a){if(a&&a.global){n("event",t,r);return}else{const l=await e,c=Object.assign(Object.assign({},r),{send_to:l});n("event",t,c)}}async function eL(n,e,t,r){if(r&&r.global)return n("set",{screen_name:t}),Promise.resolve();{const a=await e;n("config",a,{update:!0,screen_name:t})}}async function tL(n,e,t,r){if(r&&r.global)return n("set",{user_id:t}),Promise.resolve();{const a=await e;n("config",a,{update:!0,user_id:t})}}async function nL(n,e,t,r){if(r&&r.global){const a={};for(const l of Object.keys(t))a[`user_properties.${l}`]=t[l];return n("set",a),Promise.resolve()}else{const a=await e;n("config",a,{update:!0,user_properties:t})}}async function iL(n,e){const t=await n;window[`ga-disable-${t}`]=!e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rL(){if(to())try{await K_()}catch(n){return sn.warn(oi.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return sn.warn(oi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function sL(n,e,t,r,a,l,c){var d;const m=WM(n);m.then(N=>{t[N.measurementId]=N.appId,n.options.measurementId&&N.measurementId!==n.options.measurementId&&sn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${N.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(N=>sn.error(N)),e.push(m);const g=rL().then(N=>{if(N)return r.getId()}),[v,T]=await Promise.all([m,g]);qM(l)||LM(l,v.measurementId),a("js",new Date);const I=(d=c==null?void 0:c.config)!==null&&d!==void 0?d:{};return I[NM]="firebase",I.update=!0,T!=null&&(I[xM]=T),a("config",v.measurementId,I),v.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aL=class{constructor(e){this.app=e}_delete(){return delete Br[this.app.options.appId],Promise.resolve()}},Br={},n2=[];const i2={};let yf="dataLayer",SS="gtag",r2,Ah,L_=!1;function oL(n){if(L_)throw oi.create("already-initialized");n.dataLayerName&&(yf=n.dataLayerName),n.gtagName&&(SS=n.gtagName)}function lL(){const n=[];if(zf()&&n.push("This is a browser extension environment."),I2()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,a)=>`(${a+1}) ${r}`).join(" "),t=oi.create("invalid-analytics-context",{errorInfo:e});sn.warn(t.message)}}function uL(n,e,t){lL();const r=n.options.appId;if(!r)throw oi.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)sn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw oi.create("no-api-key");if(Br[r]!=null)throw oi.create("already-exists",{id:r});if(!L_){UM(yf);const{wrappedGtag:l,gtagCore:c}=FM(Br,n2,i2,yf,SS);Ah=l,r2=c,L_=!0}return Br[r]=sL(n,n2,i2,e,r2,yf,t),new aL(n)}async function cL(){if(zf()||!I2()||!to())return!1;try{return await K_()}catch{return!1}}function hL(n,e,t){n=ve(n),eL(Ah,Br[n.app.options.appId],e,t).catch(r=>sn.error(r))}function dL(n,e,t){n=ve(n),tL(Ah,Br[n.app.options.appId],e,t).catch(r=>sn.error(r))}function fL(n,e,t){n=ve(n),nL(Ah,Br[n.app.options.appId],e,t).catch(r=>sn.error(r))}function mL(n,e){n=ve(n),iL(Br[n.app.options.appId],e).catch(t=>sn.error(t))}function RS(n,e,t,r){n=ve(n),JM(Ah,Br[n.app.options.appId],e,t,r).catch(a=>sn.error(a))}const s2="@firebase/analytics",a2="0.10.8";function pL(){Ii(new Mn(t2,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return uL(r,a,t)},"PUBLIC")),Ii(new Mn("analytics-internal",n,"PRIVATE")),kn(s2,a2),kn(s2,a2,"esm2017");function n(e){try{const t=e.getProvider(t2).getImmediate();return{logEvent:(r,a,l)=>RS(t,r,a,l)}}catch(t){throw oi.create("interop-component-reg-failed",{reason:t})}}}pL();const gL="@firebase/analytics-compat",_L="0.2.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,t){this.app=e,this._delegate=t}logEvent(e,t,r){RS(this._delegate,e,t,r)}setCurrentScreen(e,t){hL(this._delegate,e,t)}setUserId(e,t){dL(this._delegate,e,t)}setUserProperties(e,t){fL(this._delegate,e,t)}setAnalyticsCollectionEnabled(e){mL(this._delegate,e)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var U_;(function(n){n.ADD_SHIPPING_INFO="add_shipping_info",n.ADD_PAYMENT_INFO="add_payment_info",n.ADD_TO_CART="add_to_cart",n.ADD_TO_WISHLIST="add_to_wishlist",n.BEGIN_CHECKOUT="begin_checkout",n.CHECKOUT_PROGRESS="checkout_progress",n.EXCEPTION="exception",n.GENERATE_LEAD="generate_lead",n.LOGIN="login",n.PAGE_VIEW="page_view",n.PURCHASE="purchase",n.REFUND="refund",n.REMOVE_FROM_CART="remove_from_cart",n.SCREEN_VIEW="screen_view",n.SEARCH="search",n.SELECT_CONTENT="select_content",n.SELECT_ITEM="select_item",n.SELECT_PROMOTION="select_promotion",n.SET_CHECKOUT_OPTION="set_checkout_option",n.SHARE="share",n.SIGN_UP="sign_up",n.TIMING_COMPLETE="timing_complete",n.VIEW_CART="view_cart",n.VIEW_ITEM="view_item",n.VIEW_ITEM_LIST="view_item_list",n.VIEW_PROMOTION="view_promotion",n.VIEW_SEARCH_RESULTS="view_search_results"})(U_||(U_={}));/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL=n=>{const e=n.getProvider("app-compat").getImmediate(),t=n.getProvider("analytics").getImmediate();return new CS(e,t)};function vL(){const n={Analytics:CS,settings:oL,isSupported:cL,EventName:U_};Nn.INTERNAL.registerComponent(new Mn("analytics-compat",yL,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}vL();Nn.registerVersion(gL,_L);/**
 * @license
 * IMAM System - Integrated Madrasah Academic Manager
 */const EL={apiKey:"AIzaSyACaFuJPIvj8urf5ZSDaw_pvgZNkx1mQLM",authDomain:"edusync-manager.firebaseapp.com",databaseURL:"https://edusync-manager-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"edusync-manager",storageBucket:"edusync-manager.firebasestorage.app",messagingSenderId:"776387068593",appId:"1:776387068593:web:aa562f6f9d62c14ff09890",measurementId:"G-WDB4WFXBLZ"},TL=()=>{if(typeof window<"u"){const n=localStorage.getItem("imam_force_mock");if(n==="true")return!0;if(n==="false"||window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")return!1}return!1},B_=TL();let o2,Al,Oc,wL;try{B_?console.log("IMAM DB: SIMULATION ENGINE ACTIVE (FIREBASE BYPASSED)"):(Nn.apps.length?o2=Nn.app():o2=Nn.initializeApp(EL),Al=Nn.auth(),Oc=Nn.firestore(),typeof window<"u"&&Oc&&(Al.setPersistence(Nn.auth.Auth.Persistence.LOCAL).catch(n=>{console.warn("Auth persistence error:",n.message)}),Oc.enablePersistence({synchronizeTabs:!0}).catch(n=>{console.warn("Firestore Persistence Disabled:",n.code)})),typeof window<"u"&&Nn.analytics.isSupported()&&(wL=Nn.analytics()),console.log("IMAM DB: CLOUD ENGINE INITIALIZED"))}catch(n){console.error("Critical Firebase Init Failure:",n.message)}const AL=Ne.lazy(()=>He(()=>import("./Login-XURm7nE5.js"),[])),IL=Ne.lazy(()=>He(()=>import("./Register-B1cDIh2Y.js"),[])),l2=Ne.lazy(()=>He(()=>import("./Dashboard-BzJEALrc.js"),__vite__mapDeps([0,1]))),bL=Ne.lazy(()=>He(()=>import("./Presensi-8idRMrgh.js"),__vite__mapDeps([2,3,1]))),SL=Ne.lazy(()=>He(()=>import("./ContentGeneration-BJv-4Mnz.js"),__vite__mapDeps([4,5]))),RL=Ne.lazy(()=>He(()=>import("./ClassList-xNRslrpl.js"),__vite__mapDeps([6,3]))),CL=Ne.lazy(()=>He(()=>import("./ClassPromotion-BZTzTdj2.js"),[])),DL=Ne.lazy(()=>He(()=>import("./Schedule-BoYNlNRX.js"),__vite__mapDeps([7,8]))),xL=Ne.lazy(()=>He(()=>import("./Profile-Bf_b8slB.js"),__vite__mapDeps([9,10,8,11]))),NL=Ne.lazy(()=>He(()=>import("./AcademicYear-weYae3US.js"),__vite__mapDeps([12,8]))),OL=Ne.lazy(()=>He(()=>import("./Reports-9ljv0CcT.js").then(n=>n.R),__vite__mapDeps([13,8,1]))),kL=Ne.lazy(()=>He(()=>import("./Advisor-DNma1eLS.js"),__vite__mapDeps([14,5]))),PL=Ne.lazy(()=>He(()=>import("./Settings-qplp6qiA.js"),__vite__mapDeps([15,8]))),VL=Ne.lazy(()=>He(()=>import("./PointsView-D5IhyvPF.js"),__vite__mapDeps([16,8]))),ML=Ne.lazy(()=>He(()=>import("./AllFeatures-Cp5JHacX.js"),__vite__mapDeps([17,8]))),LL=Ne.lazy(()=>He(()=>import("./AttendanceHistory-Bl2ZVBPs.js"),__vite__mapDeps([18,8,1]))),UL=Ne.lazy(()=>He(()=>import("./QRScanner-7oNgfgty.js"),__vite__mapDeps([19,1,8]))),BL=Ne.lazy(()=>He(()=>import("./TeachingJournal-BTDRRVmn.js"),__vite__mapDeps([20,8,21]))),jL=Ne.lazy(()=>He(()=>import("./Assignments-C1d3r1ia.js"),__vite__mapDeps([22,8,21]))),zL=Ne.lazy(()=>He(()=>import("./Grades-C3VclZtW.js"),__vite__mapDeps([23,8,3]))),FL=Ne.lazy(()=>He(()=>import("./StudentData-Cj9Es4bv.js"),__vite__mapDeps([24,3,8]))),qL=Ne.lazy(()=>He(()=>import("./TeacherData-DeQjlCmp.js"),__vite__mapDeps([25,8]))),GL=Ne.lazy(()=>He(()=>import("./IDCard-BfB2yVZW.js"),__vite__mapDeps([26,8]))),HL=Ne.lazy(()=>He(()=>import("./Letters-CUyxhcYM.js"),__vite__mapDeps([27,8,11]))),KL=Ne.lazy(()=>He(()=>import("./CreateAccount-Dm1b8je4.js"),__vite__mapDeps([28,8]))),QL=Ne.lazy(()=>He(()=>import("./DeveloperConsole-CU_k8nOx.js"),__vite__mapDeps([29,8]))),YL=Ne.lazy(()=>He(()=>import("./LoginHistory-cInqUAY4.js"),__vite__mapDeps([30,8]))),WL=Ne.lazy(()=>He(()=>import("./About-BTisZVLe.js"),[])),$L=Ne.lazy(()=>He(()=>import("./History-tIcazThG.js"),__vite__mapDeps([31,8]))),XL=Ne.lazy(()=>He(()=>import("./Premium-yoDzmP3u.js"),__vite__mapDeps([32,8]))),ZL=Ne.lazy(()=>He(()=>import("./News-Dx2pVudi.js"),__vite__mapDeps([33,8]))),JL=Ne.lazy(()=>He(()=>import("./MadrasahInfo-BezRS9d3.js"),__vite__mapDeps([34,8]))),e6=Ne.lazy(()=>He(()=>import("./KemenagHub-DS17fVmx.js"),__vite__mapDeps([35,8]))),t6=Ne.lazy(()=>He(()=>import("./ClaimManagement-CvNDc733.js"),__vite__mapDeps([36,8,10]))),DS={[X.LOGIN]:"/login",[X.REGISTER]:"/register",[X.DASHBOARD]:"/dashboard",[X.PROFILE]:"/profile",[X.SCHEDULE]:"/schedule",[X.ALL_FEATURES]:"/features",[X.NEWS]:"/news",[X.ABOUT]:"/about",[X.LOGIN_HISTORY]:"/login-history",[X.ID_CARD]:"/id-card",[X.HISTORY]:"/history",[X.PREMIUM]:"/premium",[X.ADVISOR]:"/advisor",[X.MADRASAH_INFO]:"/madrasah-info",[X.KEMENAG_HUB]:"/kemenag-hub",[X.SETTINGS]:"/settings",[X.CLASSES]:"/classes",[X.PROMOTION]:"/promotion",[X.ACADEMIC_YEAR]:"/academic-year",[X.SCANNER]:"/scanner",[X.ATTENDANCE_HISTORY]:"/attendance-history",[X.PRESENSI]:"/presensi",[X.CONTENT_GENERATION]:"/content-generation",[X.REPORTS]:"/reports",[X.JOURNAL]:"/journal",[X.ASSIGNMENTS]:"/assignments",[X.GRADES]:"/grades",[X.REPORT_CARDS]:"/report-cards",[X.STUDENTS]:"/students",[X.TEACHERS]:"/teachers",[X.LETTERS]:"/letters",[X.POINTS]:"/points",[X.CLAIM_MANAGEMENT]:"/claim-management",[X.CREATE_ACCOUNT]:"/create-account",[X.DEVELOPER]:"/developer"},n6=Object.entries(DS).reduce((n,[e,t])=>(t&&(n[t]=e),n),{}),xS=n=>!n||n==="/"?"/dashboard":n.endsWith("/")&&n.length>1?n.slice(0,-1):n,Zg=n=>{const e=xS(n);return n6[e]||X.DASHBOARD},Jg=n=>DS[n]||"/dashboard",i6=()=>{const n=b.jsx("div",{className:"h-full w-full flex items-center justify-center bg-white dark:bg-[#020617]",children:b.jsx(iT,{className:"w-7 h-7 text-indigo-500 animate-spin opacity-70"})}),[e,t]=Pi.useState(X.LOGIN),[r,a]=Pi.useState(!1),[l,c]=Pi.useState(Me.TAMU),[d,m]=Pi.useState(navigator.onLine),[g,v]=Pi.useState(!0),[T,I]=Pi.useState(0);Pi.useEffect(()=>{const R=localStorage.getItem("theme"),S=window.matchMedia("(prefers-color-scheme: dark)").matches,C=R==="dark"||!R&&S;a(C),C?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark");const P=()=>{m(!0),sT.success("Koneksi online.")},V=()=>{m(!1),sT.warning("Mode Offline Aktif.")};if(window.addEventListener("online",P),window.addEventListener("offline",V),B_)v(!1);else if(Al){const L=Al.onAuthStateChanged(async x=>{if(x&&Oc)try{const Ut=await Oc.collection("users").doc(x.uid).get();if(Ut.exists){const K=Ut.data(),oe=y5(K==null?void 0:K.role,Me.TAMU);c(oe);const _e=Zg(window.location.pathname);_e===X.LOGIN||_e===X.REGISTER?(t(X.DASHBOARD),window.history.replaceState({},"",Jg(X.DASHBOARD))):t(_e)}else{c(Me.TAMU);const K=Zg(window.location.pathname);K===X.LOGIN||K===X.REGISTER?(t(X.DASHBOARD),window.history.replaceState({},"",Jg(X.DASHBOARD))):t(K)}}catch(wt){console.warn("Auth sync failure:",wt.message)}v(!1)});return()=>L()}else v(!1);return()=>{window.removeEventListener("online",P),window.removeEventListener("offline",V)}},[]),Pi.useEffect(()=>{const R=()=>{const S=Zg(window.location.pathname);t(S)};return R(),window.addEventListener("popstate",R),()=>window.removeEventListener("popstate",R)},[]);const N=R=>{const S=Jg(R);I(C=>C+1),t(R),xS(window.location.pathname)!==S&&(window.history.pushState({},"",S),window.dispatchEvent(new PopStateEvent("popstate")))},Q=()=>{a(R=>{const S=!R;return localStorage.setItem("theme",S?"dark":"light"),S?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),S})},ee=R=>{c(R),N(X.DASHBOARD)},Z=async()=>{!B_&&Al&&await Al.signOut(),c(Me.TAMU),N(X.LOGIN)},te=()=>N(X.DASHBOARD),me=[Me.ADMIN,Me.DEVELOPER,Me.GURU,Me.STAF_TU,Me.WALI_KELAS,Me.KEPALA_MADRASAH],ce=[Me.ADMIN,Me.DEVELOPER],Ae=[Me.DEVELOPER];if(g)return b.jsx("div",{className:"fixed inset-0 h-screen w-full flex flex-col items-center justify-center bg-[#020617] z-[100]",children:b.jsxs("div",{className:"relative z-10 flex flex-col items-center animate-in fade-in duration-500",children:[b.jsx("div",{className:"w-16 h-16 mb-6 opacity-40",children:b.jsx(F_,{className:"w-full h-full"})}),b.jsx(iT,{className:"w-6 h-6 text-indigo-500 animate-spin opacity-30"})]})});const Re=e===X.LOGIN||e===X.REGISTER,Te=R=>{switch(R){case X.LOGIN:return b.jsx(AL,{onLogin:ee,onNavigateRegister:()=>N(X.REGISTER)});case X.REGISTER:return b.jsx(IL,{onLogin:ee,onLoginClick:()=>N(X.LOGIN)});case X.DASHBOARD:return b.jsx(l2,{onNavigate:N,isDarkMode:r,onToggleTheme:Q,userRole:l,onLogout:Z});case X.PROFILE:return b.jsx(xL,{onBack:te,onLogout:Z});case X.SCHEDULE:return b.jsx(DL,{onBack:te});case X.ALL_FEATURES:return b.jsx(ML,{onBack:te,onNavigate:N,userRole:l});case X.NEWS:return b.jsx(ZL,{onBack:te});case X.ABOUT:return b.jsx(WL,{onBack:te});case X.LOGIN_HISTORY:return b.jsx(YL,{onBack:te});case X.ID_CARD:return b.jsx(GL,{onBack:te});case X.HISTORY:return b.jsx($L,{onBack:te,userRole:l});case X.PREMIUM:return b.jsx(XL,{onBack:te});case X.ADVISOR:return b.jsx(kL,{onBack:te});case X.MADRASAH_INFO:return b.jsx(JL,{onBack:te});case X.KEMENAG_HUB:return b.jsx(e6,{onBack:te});case X.SETTINGS:return b.jsx(PL,{onBack:te,onNavigate:N,onLogout:Z,isDarkMode:r,onToggleTheme:Q,userRole:l});case X.PROMOTION:return b.jsx(CL,{onBack:te});case X.ACADEMIC_YEAR:return b.jsx(NL,{onBack:te});case X.CLASSES:return b.jsx(ki,{allowedRoles:me,userRole:l,onBack:te,children:b.jsx(RL,{onBack:te,userRole:l})});case X.SCANNER:return b.jsx(ki,{allowedRoles:me,userRole:l,onBack:te,children:b.jsx(UL,{onBack:te})});case X.ATTENDANCE_HISTORY:return b.jsx(LL,{onBack:te,onNavigate:N,userRole:l});case X.PRESENSI:return b.jsx(ki,{allowedRoles:me,userRole:l,onBack:te,children:b.jsx(bL,{onBack:te,onNavigate:N})});case X.CONTENT_GENERATION:return b.jsx(ki,{allowedRoles:me,userRole:l,onBack:te,children:b.jsx(SL,{onBack:te})});case X.REPORTS:return b.jsx(ki,{allowedRoles:ce,userRole:l,onBack:te,children:b.jsx(OL,{onBack:te})});case X.JOURNAL:return b.jsx(ki,{allowedRoles:me,userRole:l,onBack:te,children:b.jsx(BL,{onBack:te,userRole:l})});case X.ASSIGNMENTS:return b.jsx(jL,{onBack:te,userRole:l});case X.GRADES:case X.REPORT_CARDS:return b.jsx(zL,{onBack:te,userRole:l});case X.STUDENTS:return b.jsx(ki,{allowedRoles:me,userRole:l,onBack:te,children:b.jsx(FL,{onBack:te,userRole:l})});case X.TEACHERS:return b.jsx(ki,{allowedRoles:me,userRole:l,onBack:te,children:b.jsx(qL,{onBack:te,userRole:l})});case X.LETTERS:return b.jsx(HL,{onBack:te,userRole:l});case X.POINTS:return b.jsx(VL,{onBack:te});case X.CLAIM_MANAGEMENT:return b.jsx(ki,{allowedRoles:ce,userRole:l,onBack:te,children:b.jsx(t6,{onBack:te})});case X.CREATE_ACCOUNT:return b.jsx(ki,{allowedRoles:ce,userRole:l,onBack:te,children:b.jsx(KL,{onBack:te,userRole:l})});case X.DEVELOPER:return b.jsx(ki,{allowedRoles:Ae,userRole:l,onBack:te,children:b.jsx(QL,{onBack:te})});default:return b.jsx(l2,{onNavigate:N,isDarkMode:r,onToggleTheme:Q,userRole:l,onLogout:Z})}};return b.jsxs("div",{className:"h-screen w-full flex flex-col font-sans overflow-hidden bg-white dark:bg-[#020617] relative",children:[!d&&b.jsx("div",{className:"fixed top-0 left-0 right-0 z-[1000] bg-orange-600 text-white text-[9px] font-black uppercase tracking-[0.2em] text-center py-1",children:"Mode Offline Aktif"}),b.jsxs("div",{className:"h-full w-full relative flex overflow-hidden",children:[!Re&&b.jsx("div",{className:"hidden md:block w-72 lg:w-80 shrink-0 h-full border-r border-slate-100 dark:border-slate-800 bg-white/50 dark:bg-[#0B1121]/50 backdrop-blur-xl z-40",children:b.jsx(M5,{currentView:e,onNavigate:N,userRole:l,onLogout:Z})}),b.jsxs("div",{className:"flex-1 flex flex-col h-full w-full relative overflow-hidden",children:[b.jsx("div",{className:`flex-1 overflow-hidden relative animate-in fade-in slide-in-from-bottom-2 duration-300 ${d?"":"mt-4"}`,children:b.jsx(Pi.Suspense,{fallback:n,children:Te(e)})},T),!Re&&b.jsx("div",{className:"shrink-0 z-50",children:b.jsx(V5,{currentView:e,onNavigate:N,userRole:l})})]})]})]})},NS=document.getElementById("root");if(!NS)throw new Error("Could not find root element to mount to");const r6=m5.createRoot(NS);r6.render(b.jsx(Ne.StrictMode,{children:b.jsx(i6,{})}));export{G6 as $,F_ as A,rT as B,b6 as C,p2 as D,S5 as E,F6 as F,q6 as G,h6 as H,N5 as I,P6 as J,H6 as K,T5 as L,j6 as M,I6 as N,nT as O,Q6 as P,tT as Q,u6 as R,m2 as S,A6 as T,Me as U,X as V,l6 as W,S6 as X,C6 as Y,B6 as Z,He as _,iT as a,E5 as a0,k6 as a1,O6 as a2,w6 as a3,O5 as a4,T6 as a5,x6 as a6,b5 as a7,A5 as a8,c2 as a9,d6 as aa,f6 as ab,p6 as ac,m6 as ad,y6 as ae,v6 as af,g6 as ag,_6 as ah,s6 as ai,Nn as aj,a6 as ak,U6 as al,Ne as am,o6 as an,K6 as ao,Y6 as ap,R6 as aq,W6 as ar,$6 as as,X6 as at,Z6 as au,s5 as av,c6 as b,Al as c,Oc as d,h2 as e,f2 as f,I5 as g,d2 as h,B_ as i,b as j,k5 as k,x5 as l,D6 as m,y5 as n,w5 as o,C5 as p,N6 as q,Pi as r,D5 as s,sT as t,M6 as u,L6 as v,E6 as w,R5 as x,V6 as y,z6 as z};
