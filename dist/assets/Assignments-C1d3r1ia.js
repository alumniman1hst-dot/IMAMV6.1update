import{r as a,j as e,g as m,a7 as I,a as S,e as C,b as D,a5 as M,i as T,c as h,d as f,t as U,U as n}from"./index-CcQVG4nr.js";import{L as E}from"./Layout-aA6jRwwe.js";import{b as L}from"./academicService-BlZ1ib-Y.js";const K=({onBack:k,userRole:l})=>{const[c,j]=a.useState([]),[w,o]=a.useState(!0),[P,N]=a.useState(!1),[s,x]=a.useState("tugas"),[g,p]=a.useState(""),i=l===n.GURU||l===n.ADMIN,y=l===n.SISWA;a.useEffect(()=>{(async()=>{var b,u;o(!0);let r="X IPA 1";if(!T&&((b=h)!=null&&b.currentUser)&&f){const d=await f.collection("users").doc(h.currentUser.uid).get();d.exists&&(r=((u=d.data())==null?void 0:u.class)||"X IPA 1",p(r))}else p(r);try{const A=await L(i?void 0:r);j(A)}catch{U.error("Gagal memuat tugas.")}finally{o(!1)}})()},[i]);const v=t=>{switch(t){case"High":return e.jsx("span",{className:"text-[9px] font-bold text-red-600 bg-red-50 dark:bg-red-900/30 px-1.5 py-0.5 rounded-md border border-red-100 dark:border-red-800 flex items-center gap-1",children:"Tinggi"});case"Medium":return e.jsx("span",{className:"text-[9px] font-bold text-orange-600 bg-orange-50 dark:bg-orange-900/30 px-1.5 py-0.5 rounded-md border border-orange-100 dark:border-orange-800",children:"Sedang"});default:return e.jsx("span",{className:"text-[9px] font-bold text-blue-600 bg-blue-50 dark:bg-blue-900/30 px-1.5 py-0.5 rounded-md border border-blue-100 dark:border-blue-800",children:"Rendah"})}};return e.jsx(E,{title:"Akademik",subtitle:y?`Tugas Kelas ${g}`:"Pekerjaan Rumah & Tugas",icon:m,onBack:k,actions:i&&s==="tugas"&&e.jsx("button",{onClick:()=>N(!0),className:"bg-indigo-600 text-white p-2 rounded-xl shadow-lg active:scale-90 transition-all",children:e.jsx(M,{className:"w-4 h-4"})}),children:e.jsxs("div",{className:"p-3 lg:p-6 pb-24 space-y-4",children:[e.jsxs("div",{className:"flex p-1 bg-slate-100 dark:bg-slate-800 rounded-xl w-full border border-slate-200 dark:border-slate-700",children:[e.jsxs("button",{onClick:()=>x("tugas"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-lg text-[9px] font-black uppercase tracking-widest transition-all ${s==="tugas"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white shadow-sm ring-1 ring-black/5":"text-slate-400"}`,children:[e.jsx(m,{className:"w-3.5 h-3.5"})," Daftar Tugas"]}),e.jsxs("button",{onClick:()=>x("agenda"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-lg text-[9px] font-black uppercase tracking-widest transition-all ${s==="agenda"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white shadow-sm ring-1 ring-black/5":"text-slate-400"}`,children:[e.jsx(I,{className:"w-3.5 h-3.5"})," Agenda Hari Ini"]})]}),s==="tugas"?w?e.jsx("div",{className:"py-20 text-center",children:e.jsx(S,{className:"w-8 h-8 animate-spin mx-auto text-indigo-500"})}):e.jsxs("div",{className:"grid grid-cols-1 gap-2.5",children:[c.map(t=>e.jsxs("div",{className:"bg-white dark:bg-[#151E32] p-3.5 rounded-xl border border-slate-100 dark:border-slate-800 shadow-sm relative overflow-hidden group",children:[e.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${t.priority==="High"?"bg-red-500":"bg-indigo-500"}`}),e.jsxs("div",{className:"flex justify-between items-start mb-2 pl-1",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-[7px] font-black text-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 px-1.5 py-0.5 rounded uppercase tracking-tighter",children:t.subject}),v(t.priority)]}),e.jsx("h3",{className:"font-black text-slate-800 dark:text-white text-[11px] truncate uppercase tracking-tight",children:t.title})]}),e.jsx("span",{className:"text-[7px] font-black text-red-500 bg-red-50 dark:bg-red-900/20 px-2 py-0.5 rounded-md border border-red-100 dark:border-red-900/50 uppercase whitespace-nowrap ml-2",children:new Date(t.dueDate).toLocaleDateString("id-ID",{day:"numeric",month:"short"})})]}),e.jsx("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 line-clamp-2 leading-relaxed pl-1 mb-3",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between pl-1 pt-2.5 border-t border-slate-50 dark:border-slate-800/50",children:[e.jsxs("span",{className:"text-[8px] font-bold text-slate-400 uppercase flex items-center gap-1",children:[e.jsx(C,{className:"w-3 h-3"})," ",t.teacherName]}),e.jsx(D,{className:"w-3 h-3.5 text-slate-300 group-hover:text-indigo-500 transition-colors"})]})]},t.id)),c.length===0&&e.jsx("div",{className:"text-center py-10 text-slate-400 text-[10px] font-bold uppercase tracking-widest bg-white dark:bg-slate-800/50 rounded-2xl border border-dashed border-slate-200 dark:border-slate-800",children:"Tidak ada tugas untuk kelas Anda."})]}):e.jsxs("div",{className:"space-y-2.5",children:[e.jsx("div",{className:"px-1 mb-1",children:e.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:["Jadwal Kelas ",g]})}),e.jsxs("div",{className:"p-3 bg-white dark:bg-[#151E32] rounded-xl border border-indigo-500 ring-2 ring-indigo-500/5 shadow-indigo-500/10 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-indigo-600 text-white flex flex-col items-center justify-center text-[9px] font-black shrink-0 font-mono",children:"07:30"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-black text-slate-800 dark:text-white text-[11px] truncate uppercase",children:"KBM Inti"}),e.jsx("p",{className:"text-[8px] text-slate-400",children:"Sesuai Jadwal Mingguan"})]})]})]})]})})};export{K as default};
