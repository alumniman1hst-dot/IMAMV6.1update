/**
 * @license
 * IMAM System - Integrated Madrasah Academic Manager
 */const l=a=>{let n="Anda adalah konsultan pendidikan ahli untuk sistem IMAM di MAN 1 Hulu Sungai Tengah. Jawablah dalam Bahasa Indonesia yang baik dan benar.";return a==="rpp"&&(n+=" Buat RPP yang mendetail dan siap pakai."),a==="quiz"&&(n+=" Buat kuis pilihan ganda lengkap kunci jawaban."),a==="announcement"&&(n+=" Buat draf pengumuman sekolah yang formal dan ringkas."),n},c=()=>{if(typeof localStorage>"u")return{};const a=localStorage.getItem("imam_id_token");return a?{Authorization:`Bearer ${a}`}:{}},d=async(a,n)=>{var r,i,o,s,u;const e=await fetch("/api/gemini",{method:"POST",headers:{"Content-Type":"application/json",...c()},body:JSON.stringify({contents:[{role:"user",parts:[{text:a}]}],systemInstruction:{parts:[{text:n}]}})});if(!e.ok)throw new Error(`Gemini proxy error: ${e.status}`);const t=await e.json();return((u=(s=(o=(i=(r=t==null?void 0:t.candidates)==null?void 0:r[0])==null?void 0:i.content)==null?void 0:o.parts)==null?void 0:s[0])==null?void 0:u.text)??"Tidak dapat membuat konten."},g=async(a,n)=>{try{return await d(a,l(n))}catch(e){return console.warn("Gemini API Error:",e),"Maaf, terjadi kendala teknis dalam membuat konten."}},m=async a=>{try{return await d(a,"Anda adalah layanan LIVE CHAT IMAM (Helpdesk Digital) dan hanya membantu pengoperasian fitur aplikasi IMAM secara profesional.")}catch(n){return console.warn("Gemini API Error:",n),"Saya sedang mengalami gangguan koneksi. Silakan coba beberapa saat lagi."}};export{m as a,g};
