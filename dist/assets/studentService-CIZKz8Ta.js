import{i as s,d as a}from"./index-CcQVG4nr.js";const c="students",n="imam_students_cache_v2",i="imam_students_cache_time",l=1e3*60*30,d=async(o=!1)=>{if(s)return[{id:"mock-1",namaLengkap:"DIENDE ADELLYA AQILLA",nisn:"0086806447",tingkatRombel:"12 A",status:"Aktif",jenisKelamin:"Perempuan"}];if(!o){const e=localStorage.getItem(n),t=localStorage.getItem(i),r=Date.now();if(e&&t&&r-parseInt(t)<l)return JSON.parse(e)}try{if(!a)throw new Error("Database not initialized");const t=(await a.collection(c).orderBy("namaLengkap").get()).docs.map(r=>({id:r.id,...r.data()}));return localStorage.setItem(n,JSON.stringify(t)),localStorage.setItem(i,Date.now().toString()),t}catch(e){console.error("Error fetching students:",e);const t=localStorage.getItem(n);return t?JSON.parse(t):[]}},g=async o=>{if(s)return d();try{if(!a)throw new Error("Database not initialized");return(await a.collection(c).where("tingkatRombel","==",o).limit(50).get()).docs.map(t=>({id:t.id,...t.data()}))}catch(e){return console.error("Error fetching students by class:",e),[]}},u=async o=>{if(!s)try{if(!a)throw new Error("Database not initialized");await a.collection(c).doc(o).delete(),localStorage.removeItem(n)}catch(e){throw e}};export{g as a,u as d,d as g};
