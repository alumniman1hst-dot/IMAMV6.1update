import{r as i,j as e,A as E,E as M,L as I,S as T,a as L,b as D,i as R,t as u,U as l,c as w,d as k,n as U}from"./index-CcQVG4nr.js";const z=({onLogin:r,onNavigateRegister:v})=>{const[x,j]=i.useState("dgt.3652@gmail.com"),[m,N]=i.useState("123456"),[n,o]=i.useState(!1),[h,d]=i.useState(""),[C,c]=i.useState(!1),y=async(s,p=!1)=>{var f;s&&s.preventDefault(),o(!0),d(""),c(!1);const g=x.trim(),A=m.trim();if(R||p){if(p){localStorage.setItem("imam_force_mock","true"),u.info("Mengaktifkan Mode Simulasi..."),setTimeout(()=>window.location.reload(),800);return}setTimeout(()=>{const a=g.toLowerCase();let t=l.GURU;a.includes("admin")?t=l.ADMIN:a.includes("siswa")?t=l.SISWA:a.includes("dev")?t=l.DEVELOPER:a.includes("tamu")&&(t=l.TAMU),r(t),u.success(`Mode Simulasi: Masuk sebagai ${t}`),o(!1)},1200);return}try{if(!w||!k)throw c(!0),new Error("Layanan Firebase tidak dapat dihubungi.");const t=(await w.signInWithEmailAndPassword(g,A)).user;if(t){const b=await k.collection("users").doc(t.uid).get();if(b.exists){const S=U((f=b.data())==null?void 0:f.role,l.TAMU);r(S),u.success(`Selamat datang, ${t.displayName||"Pengguna"}`)}else r(l.TAMU)}}catch(a){o(!1),a.code==="auth/network-request-failed"?(c(!0),d("Gagal menghubungi server. Periksa internet Anda.")):d("Email atau Password salah.")}};return e.jsxs("div",{className:"flex h-screen w-full bg-[#f8fafc] dark:bg-[#020617] transition-colors duration-500 relative overflow-hidden",children:[e.jsxs("div",{className:"hidden lg:flex flex-1 bg-gradient-to-br from-indigo-700 via-blue-600 to-indigo-900 relative items-center justify-center p-12 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 mix-blend-overlay"}),e.jsxs("div",{className:"relative z-10 text-center max-w-lg",children:[e.jsx(E,{className:"w-32 h-32 mx-auto mb-8"}),e.jsxs("h1",{className:"text-5xl font-black text-white mb-6 leading-tight tracking-tight",children:["IMAM ",e.jsx("br",{}),"Digital Hub"]}),e.jsx("p",{className:"text-indigo-100 text-lg opacity-80 font-medium",children:"Sistem Terintegrasi MAN 1 Hulu Sungai Tengah."})]})]}),e.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-6 md:p-12 relative h-full",children:e.jsxs("div",{className:"w-full max-w-sm z-10 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsxs("div",{className:"text-center lg:text-left",children:[e.jsx("h2",{className:"text-2xl font-black text-slate-900 dark:text-white tracking-tight uppercase",children:"Masuk Sistem"}),e.jsx("p",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest mt-1",children:"Gunakan Akun Anda yang Terdaftar"})]}),e.jsxs("form",{onSubmit:s=>y(s),className:"space-y-5",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 ml-1",children:"Email / Akun"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within:text-indigo-500 transition-colors",children:e.jsx(M,{className:"w-5 h-5"})}),e.jsx("input",{type:"email",value:x,onChange:s=>j(s.target.value),className:"w-full bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl py-4 pl-12 pr-4 text-slate-900 dark:text-white text-sm font-bold shadow-sm",placeholder:"Email Anda",required:!0})]})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 ml-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within:text-indigo-500 transition-colors",children:e.jsx(I,{className:"w-5 h-5"})}),e.jsx("input",{type:"password",value:m,onChange:s=>N(s.target.value),className:"w-full bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl py-4 pl-12 pr-4 text-slate-900 dark:text-white text-sm font-bold shadow-sm",placeholder:"••••••••",required:!0})]})]})]}),h&&e.jsxs("div",{className:"p-4 rounded-2xl bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-[10px] font-black uppercase tracking-widest flex items-center gap-3",children:[e.jsx(T,{className:"w-4 h-4"})," ",e.jsx("span",{children:h})]}),e.jsxs("button",{type:"submit",disabled:n,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-500/20 transition-all active:scale-[0.98] flex items-center justify-center gap-3 group relative overflow-hidden",children:[n?e.jsx(L,{className:"w-5 h-5 animate-spin"}):e.jsx("span",{className:"uppercase tracking-[0.2em] text-xs",children:"Aktivasi Sesi"}),!n&&e.jsx(D,{className:"w-5 h-5 relative z-10 group-hover:translate-x-1 transition-transform"})]})]}),e.jsxs("div",{className:"text-center pt-4 space-y-3",children:[e.jsxs("p",{className:"text-[11px] font-bold text-slate-500 dark:text-slate-400",children:["Belum memiliki akun? ",e.jsx("button",{onClick:v,className:"text-indigo-600 dark:text-indigo-400 hover:underline",children:"Daftar Akun Baru (Tamu)"})]}),e.jsx("p",{className:"text-[9px] font-black text-slate-300 uppercase tracking-widest",children:"IMAM v6.2 • MADRASAH DIGITAL"})]})]})})]})};export{z as default};
