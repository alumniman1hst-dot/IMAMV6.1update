import{r as i,j as e,k as A,a0 as k,h as C,J as E,f as R,x as T,A as O,s as P,T as _,a1 as U,a2 as V,a3 as $,S as G,I as J,v as B,l as W,U as u,t as d,V as c,a4 as F}from"./index-CcQVG4nr.js";import{L as q}from"./Layout-aA6jRwwe.js";const z=({onBack:j,onNavigate:o,onLogout:w,isDarkMode:t,onToggleTheme:N,userRole:x})=>{const[g,m]=i.useState(null),h=i.useRef(null),[r,f]=i.useState({metrics:!0,quickActions:!0,trend:!0,agenda:!0}),[H,v]=i.useState({bg:t?"#1e293b":"#ffffff",primary:t?"#818cf8":"#4f46e5",secondary:t?"#312e81":"#e0e7ff",border:t?"#334155":"#f1f5f9"}),I=x===u.ADMIN||x===u.DEVELOPER;i.useEffect(()=>{const s=localStorage.getItem("custom_app_logo");s&&m(s);const a=localStorage.getItem("news_card_theme");a&&v(JSON.parse(a));const l=localStorage.getItem("dashboard_widgets");if(l)try{f(JSON.parse(l))}catch{console.error("Failed to parse widgets")}},[]);const y=s=>{const a={...r,[s]:!r[s]};f(a),localStorage.setItem("dashboard_widgets",JSON.stringify(a)),d.info(`Widget ${s} ${a[s]?"ditampilkan":"disembunyikan"}`)},b=[{label:"Edit Data Profil",icon:$,action:()=>o(c.PROFILE),color:"text-blue-600",bg:"bg-blue-50 dark:bg-blue-900/20",desc:"Perbarui informasi pribadi Anda"},{label:"Riwayat Login",icon:G,action:()=>o(c.LOGIN_HISTORY),color:"text-emerald-600",bg:"bg-emerald-50 dark:bg-emerald-900/20",desc:"Pantau aktivitas masuk akun"},{label:"Tentang Aplikasi",icon:J,action:()=>o(c.ABOUT),color:"text-indigo-600",bg:"bg-indigo-50 dark:bg-indigo-900/20",desc:"Versi, pengembang, dan info sekolah"}];x===u.DEVELOPER&&b.splice(1,0,{label:"Developer Console",icon:F,action:()=>o(c.DEVELOPER),color:"text-slate-600",bg:"bg-slate-50 dark:bg-slate-700",desc:"Alat teknis & database"});const S=s=>{var l;const a=(l=s.target.files)==null?void 0:l[0];if(a){if(a.size>2*1024*1024){d.error("Ukuran file terlalu besar (Maks 2MB)");return}const n=new FileReader;n.onloadend=()=>{const p=n.result;localStorage.setItem("custom_app_logo",p),m(p),d.success("Logo aplikasi berhasil diperbarui"),window.dispatchEvent(new Event("storage"))},n.readAsDataURL(a)}},L=()=>{window.confirm("Kembalikan ke logo default IMAM?")&&(localStorage.removeItem("custom_app_logo"),m(null),d.success("Logo dikembalikan ke default"),window.dispatchEvent(new Event("storage")))};return e.jsx(q,{title:"Pengaturan",subtitle:"Konfigurasi Aplikasi",icon:A,onBack:j,children:e.jsxs("div",{className:"p-4 lg:p-6 space-y-8 max-w-2xl mx-auto w-full pb-32",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[e.jsx(k,{className:"w-4 h-4 text-indigo-500"}),e.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Tampilan Beranda"})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-3xl border border-slate-100 dark:border-slate-700 p-2 shadow-sm",children:[{id:"metrics",label:"Statistik Utama",icon:C,desc:"Ringkasan data harian"},{id:"quickActions",label:"Menu Navigasi",icon:k,desc:"Akses cepat fitur"},{id:"trend",label:"Grafik Tren",icon:E,desc:"Visualisasi kehadiran"},{id:"agenda",label:"Agenda Hari Ini",icon:R,desc:"Jadwal mapel harian"}].map((s,a,l)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${r[s.id]?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":"bg-slate-50 dark:bg-slate-900 text-slate-300"}`,children:e.jsx(s.icon,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-slate-800 dark:text-white",children:s.label}),e.jsx("p",{className:"text-[10px] text-slate-400 font-medium uppercase tracking-tighter",children:s.desc})]})]}),e.jsx("button",{onClick:()=>y(s.id),className:`w-12 h-6 rounded-full p-1 transition-all duration-300 ${r[s.id]?"bg-indigo-600":"bg-slate-200 dark:bg-slate-700"}`,children:e.jsx("div",{className:`w-4 h-4 rounded-full bg-white shadow-sm transition-transform duration-300 ${r[s.id]?"translate-x-6":"translate-x-0"}`})})]}),a<l.length-1&&e.jsx("hr",{className:"border-slate-50 dark:border-slate-700 mx-4"})]},s.id))})]}),I&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[e.jsx(T,{className:"w-4 h-4 text-amber-500"}),e.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Branding Sekolah"})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-3xl border border-slate-100 dark:border-slate-700 p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative group shrink-0",children:[e.jsxs("div",{className:"w-20 h-20 rounded-2xl bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 flex items-center justify-center overflow-hidden relative",children:[g?e.jsx("img",{src:g,alt:"Logo Sekolah",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-10 h-10 text-indigo-600 dark:text-indigo-400",children:e.jsx(O,{})}),e.jsx("div",{onClick:()=>{var s;return(s=h.current)==null?void 0:s.click()},className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:e.jsx(P,{className:"w-6 h-6 text-white"})})]}),e.jsx("input",{type:"file",ref:h,className:"hidden",accept:"image/*",onChange:S})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white",children:"Logo Instansi"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 leading-relaxed",children:"Ganti logo default dengan logo sekolah Anda. Format: PNG/JPG."}),e.jsxs("div",{className:"flex gap-3 mt-3",children:[e.jsx("button",{onClick:()=>{var s;return(s=h.current)==null?void 0:s.click()},className:"px-4 py-2 bg-indigo-600 text-white text-xs font-bold rounded-xl transition-colors shadow-sm",children:"Upload"}),g&&e.jsxs("button",{onClick:L,className:"px-4 py-2 bg-red-50 text-red-600 text-xs font-bold rounded-xl transition-colors flex items-center gap-1",children:[e.jsx(_,{className:"w-3 h-3"})," Hapus"]})]})]})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider ml-2",children:"Tampilan Sistem"}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-3xl border border-slate-100 dark:border-slate-700 overflow-hidden shadow-sm",children:e.jsxs("button",{onClick:N,className:"w-full flex items-center gap-4 p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors text-left group",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-violet-50 dark:bg-violet-900/20 text-violet-600 dark:text-violet-400 group-hover:scale-110 transition-transform",children:t?e.jsx(U,{className:"w-6 h-6"}):e.jsx(V,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-800 dark:text-white",children:"Mode Tema"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:t?"Mode Gelap Aktif":"Mode Terang Aktif"})]}),e.jsx("div",{className:`w-12 h-6 rounded-full p-1 transition-colors duration-300 ${t?"bg-indigo-600":"bg-slate-200"}`,children:e.jsx("div",{className:`w-4 h-4 rounded-full bg-white shadow-sm transition-transform duration-300 ${t?"translate-x-6":"translate-x-0"}`})})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider ml-2",children:"Akun & Sistem"}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-3xl border border-slate-100 dark:border-slate-700 overflow-hidden shadow-sm",children:b.map((s,a)=>e.jsxs("div",{children:[e.jsxs("button",{onClick:s.action,className:"w-full flex items-center gap-4 p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors text-left group",children:[e.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${s.bg} ${s.color} group-hover:scale-110 transition-transform`,children:e.jsx(s.icon,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-800 dark:text-white",children:s.label}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:s.desc})]}),e.jsx(B,{className:"w-5 h-5 text-slate-300 dark:text-slate-600 group-hover:text-indigo-500 transition-colors"})]}),a<b.length-1&&e.jsx("hr",{className:"border-slate-100 dark:border-slate-700 mx-4"})]},a))})]}),e.jsx("div",{className:"pt-4",children:e.jsxs("button",{onClick:w,className:"w-full bg-red-50 dark:bg-red-900/10 border border-red-100 dark:border-red-900/30 p-4 rounded-2xl flex items-center justify-center gap-2 text-red-600 dark:text-red-400 font-bold text-sm hover:bg-red-100 transition-colors",children:[e.jsx(W,{className:"w-5 h-5"})," Keluar Aplikasi"]})})]})})};export{z as default};
